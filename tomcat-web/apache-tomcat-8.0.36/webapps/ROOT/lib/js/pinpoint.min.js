/*! @preserve pinpoint - v1.6.0 - 2017-11-04*/
!function(){"use strict";angular.module("pinpointApp").filter("iconUrl","PreferenceService",function(a){return function(b){var c=a.getIconPath(),d="";if(angular.isString(b)){switch(b){case"UNKNOWN_GROUP":d=c+"UNKNOWN.png";break;default:d=c+b+".png"}return d}return""}})}(),function(){"use strict";angular.module("pinpointApp").filter("applicationNameToClassName",function(){return function(a){return a.replace(/[\.\^:]/gi,"_")}})}(),function(){"use strict";pinpointApp.factory("TimeSliderVoService",function(){return function(){this._nFrom=!1,this._nTo=!1,this._nInnerFrom=!1,this._nInnerTo=!1,this._nCount=!1,this._nTotal=!1,this.setFrom=function(a){if(a=parseInt(a,10),!angular.isNumber(a))throw new Error("timeSliderVoService:setFrom, It should be number. "+a);if(angular.isNumber(this._nTo)&&a>=this._nTo)throw"timeSliderVoService:setFrom, It should be smaller than To value.";return this._nFrom=a,this}.bind(this),this.getFrom=function(){return this._nFrom}.bind(this),this.setTo=function(a){if(a=parseInt(a,10),!angular.isNumber(a))throw new Error("timeSliderVoService:setTo It should be number. "+a);if(angular.isNumber(a)&&this._nFrom>=a)throw"timeSliderVoService:setTo, It should be bigger than From value.";return this._nTo=a,this}.bind(this),this.getTo=function(){return this._nTo}.bind(this),this.setInnerFrom=function(a){if(a=parseInt(a,10),!angular.isNumber(a))throw new Error("timeSliderVo:setInnerFrom It should be number. "+a);if(angular.isNumber(this._nInnerTo)&&a>=this._nInnerTo)throw"timeSliderVo:setInnerFrom, It should be smaller than InnerTo value.";return this._nInnerFrom=a,this}.bind(this),this.getInnerFrom=function(){return this._nInnerFrom}.bind(this),this.setInnerTo=function(a){if(a=parseInt(a,10),!angular.isNumber(a))throw new Error("timeSliderVoService:setInnerTo It should be number. "+a);if(angular.isNumber(this._nInnerFrom)&&this._nInnerFrom>=a)throw"timeSliderVoService:setInnerTo, It should be bigger than InnerFrom value.";return this._nInnerTo=a,this}.bind(this),this.getInnerTo=function(){return this._nInnerTo}.bind(this),this.setCount=function(a){if(a=parseInt(a,10),!angular.isNumber(a))throw new Error("timeSliderVoService:setCount It should be number. "+a);if(angular.isNumber(this._nTotal)&&a>this._nTotal)throw"timeSliderVoService:setCount, It should be smaller than Total value.";return this._nCount=a,this}.bind(this),this.addCount=function(a){if(a=parseInt(a,10),!angular.isNumber(a))throw new Error("timeSliderVoService:setCount It should be number. "+a);if(angular.isNumber(this._nTotal)&&a+this._nCount>this._nTotal)throw"timeSliderVoService:setCount, It should be smaller than Total value.";return this._nCount+=a,this}.bind(this),this.getCount=function(){return this._nCount}.bind(this),this.setTotal=function(a){if(a=parseInt(a,10),!angular.isNumber(a))throw new Error("timeSliderVoService:setTotal It should be number. "+a);if(angular.isNumber(this._nCount)&&this._nCount>a)throw"timeSliderVoService:setTotal, It should be bigger than Count value.";return this._nTotal=a,this}.bind(this),this.getTotal=function(){return this._nTotal}.bind(this),this.getReady=function(){return this._nFrom&&this._nTo&&this._nInnerFrom&&this._nInnerTo}.bind(this)}})}(),function(){"use strict";pinpointApp.factory("AlertsService",["$timeout",function(a){return function(b){this.$parent=b||null,this.setParent=function(a){return this.$parent=a,this}.bind(this),this.getParent=function(){return this.$parent}.bind(this),this.showError=function(b){a(function(){this.getElement(".error").show(),"string"==typeof b?this.getElement(".error .msg").text(b):(this.getElement(".error .msg").text(b.message),this.getElement(".error .method").text(b.request.method),this.getElement(".error .header").html(this._transTableFormat(b.request.heads)),this.getElement(".error .parameters").html(this._transTableFormat(b.request.parameters)),this.getElement(".error .url").text(b.request.url),this.getElement(".error .stacktrace").text(b.stacktrace))}.bind(this),300)}.bind(this),this.hideError=function(){a(function(){this.getElement(".error").hide()}.bind(this))}.bind(this),this.showWarning=function(b){a(function(){this.getElement(".warning").show(),this.getElement(".warning .msg").text(b)}.bind(this),300)}.bind(this),this.hideWarning=function(){a(function(){this.getElement(".warning").hide()}.bind(this))}.bind(this),this.showInfo=function(b){a(function(){this.getElement(".info").show(),this.getElement(".info .msg").html(b)}.bind(this),300)}.bind(this),this.hideInfo=function(){a(function(){this.getElement(".info").hide()}.bind(this))}.bind(this),this.getElement=function(a){return this.$parent?$(a,this.$parent):$(a)}.bind(this),this._transTableFormat=function(a){var b=["<table>"];for(var c in a)b.push("<tr>"),b.push("<td>"+c+"</td><td style='padding-left:20px'>"+a[c]+"</td>"),b.push("</tr>");return b.push("</table>"),b.join("")}}}])}(),function(){"use strict";pinpointApp.factory("ProgressBarService",["$timeout","$window","$location","CommonUtilService","UserLocalesService",function(a,b,c,d,e){var f=["ko","en"],g=5,h="__HIDE_LOADING_TIP";return function(i){this.$parent=i||null,this.nPercentage=0,this.bAutoIncrease=!0,this.nTimePromise=null,this.setParent=function(a){return this.$parent=a,this}.bind(this),this.getParent=function(){return this.$parent}.bind(this),this.startLoading=function(d){var e=!0;if(b.localStorage){var f=b.localStorage.getItem(h)||"-";e="-"===f||!((new Date).valueOf()<parseInt(f))}this.bAutoIncrease=d||!0,this.setLoading(0),a(function(){/^\/main/.test(c.path())&&e&&(this.showBackground(),this.showTip()),this.getProgress().show(),this.autoIncrease()}.bind(this))}.bind(this),this.stopLoading=function(){a.cancel(this.nTimePromise),a(function(){this.getProgress().hide(),this.hideTip(),this.hideBackground()}.bind(this),300)}.bind(this),this.setLoading=function(a){return this.nPercentage=a,this.getProgressBar().width(a+"%"),this}.bind(this),this.getProgress=function(){return this.$parent?$(".progress",this.$parent):$(".progress")}.bind(this),this.getProgressBar=function(){return this.$parent?$(".progress .bar",this.$parent):$(".progress .bar")}.bind(this),this.autoIncrease=function(){if(this.bAutoIncrease!==!1){var b=d.random(1,4);this.nPercentage+b<=99&&(this.setLoading(this.nPercentage+b),this.nTimePromise=a(function(){this.autoIncrease()}.bind(this),500))}}.bind(this),this.showBackground=function(){}.bind(this),this.showTip=function(){}.bind(this),this._getRandomNum=function(){var a=parseInt(Math.random()*(g+1));return a<10?"0"+a:a+""}.bind(this),this._getLocale=function(){return f.indexOf(e.userLocale)==-1?e.defaultLocale:e.userLocale}.bind(this),this.hideBackground=function(){this.$parent&&$(".progress-back",this.$parent).hide()}.bind(this),this.hideTip=function(){this.$parent&&$(".progress-tip",this.$parent).hide()}.bind(this)}}])}(),function(){"use strict";pinpointApp.factory("NavbarVoService",["UserConfigurationService","CommonUtilService",function(a,b){return function(){var c=this;this._sApplication=!1,this._periodType="",this._nPeriod=!1,this._nQueryEndTime=!1,this._sFilter=!1,this._sAgentId=!1,this._nQueryPeriod=!1,this._nQueryStartTime=!1,this._sReadablePeriod=!1,this._sQueryEndDateTime=!1,this._nCalleeRange=a.getCallee(),this._nCallerRange=a.getCaller(),this._sHint=!1,this.setApplication=function(a){return angular.isString(a)&&a.indexOf("@")>0&&(c._sApplication=a),c},this.getApplication=function(){return c._sApplication},this.setPeriod=function(a){return angular.isNumber(a)&&a>0&&(c._nPeriod=a),c},this.getPeriod=function(){return c._nPeriod},this.setQueryEndTime=function(a){return angular.isNumber(a)&&a>0&&(c._nQueryEndTime=a),c},this.getQueryEndTime=function(){return c._nQueryEndTime},this.getQueryPeriod=function(){return c._nQueryPeriod},this.getApplicationName=function(){return c._sApplication.split("@")[0]},this.getServiceTypeName=function(){return c._sApplication.split("@")[1]},this.getCalleeRange=function(){return c._nCalleeRange},this.getCallerRange=function(){return c._nCallerRange},this.setCalleeRange=function(a){c._nCalleeRange=a},this.setCallerRange=function(a){c._nCallerRange=a},this.setQueryStartTime=function(a){return angular.isNumber(a)&&a>0&&(c._nQueryStartTime=a),c},this.getQueryStartTime=function(){return c._nQueryStartTime},this.getReady=function(){return c._sApplication&&c._nPeriod&&c._nQueryEndTime},this.setFilter=function(a){return angular.isString(a)&&(c._sFilter=a),c},this.getFilter=function(){return c._sFilter},this.getFilterAsJson=function(){return JSON.parse(c._sFilter)},this.setHint=function(a){return angular.isString(a)&&(c._sHint=a),c},this.getHint=function(){return c._sHint},this.setAgentId=function(a){return angular.isString(a)&&(c._sAgentId=a),c},this.getAgentId=function(){return c._sAgentId},this.setReadablePeriod=function(a){var b=/^(\d)+(s|m|h|d|w|M|y)$/,d=b.exec(a);if(d){c._sReadablePeriod=a;var e=parseInt(a,10);switch(d[2]){case"m":c.setPeriod(60*e);break;case"h":c.setPeriod(60*e*60);break;case"d":c.setPeriod(60*e*60*24);break;case"w":c.setPeriod(60*e*60*24*7);break;case"M":c.setPeriod(60*e*60*24*30);break;case"y":c.setPeriod(60*e*60*24*30*12);break;default:c.setPeriod(e)}}else"realtime"===a&&(c.setPeriodType("realtime"),c._sReadablePeriod="1m",c.setPeriod(300));return c},this.isRealtime=function(){return"realtime"===this._periodType},this.getReadablePeriod=function(){return c._sReadablePeriod},this.setQueryEndDateTime=function(a){var b=/^(19[7-9][0-9]|20\d{2})-(0[0-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])-(0[0-9]|1[0-9]|2[0-3])-([0-5][0-9])-([0-5][0-9])$/;return b.test(a)&&(c._sQueryEndDateTime=a,c.setQueryEndTime(c._parseQueryEndDateTimeToTimestamp(a))),c},this.getQueryEndDateTime=function(){return c._sQueryEndDateTime},this._parseQueryEndDateTimeToTimestamp=function(a){return b.getMilliSecond(a)},this.autoCalcultateByQueryStartTimeAndQueryEndTime=function(){return c._nQueryPeriod=c._nQueryEndTime-c._nQueryStartTime,c._nPeriod=c._nQueryPeriod/1e3/60,c._sReadablePeriod=c._nQueryPeriod/1e3/60+"m",c._sQueryEndDateTime=b.formatDate(c._nQueryEndTime),c},this.autoCalculateByQueryEndDateTimeAndReadablePeriod=function(){return c._nQueryPeriod=1e3*c._nPeriod,c._nQueryStartTime=c._nQueryEndTime-c._nQueryPeriod,c},this.getPartialURL=function(a,b){return(a?c.getApplication()+"/":"")+c.getReadablePeriod()+"/"+c.getQueryEndDateTime()+(b&&c.getFilter()?"/"+c.getFilter():"")},this.setPeriodType=function(a){this._periodType=a},this.getPeriodType=function(){return this._periodType}}}])}(),function(){"use strict";pinpointApp.service("UrlVoService",["$location","$routeParams","PreferenceService","UserConfigurationService","CommonUtilService",function(a,b,c,d,e){function f(a){return e.getMilliSecond(a)}function g(a){switch(a){case"m":return 60;case"h":return 3600;case"d":return 86400;case"w":return 604800;case"M":return 2592e3;case"y":return 31104e3;default:return 1}}var h="",i="",j="",k="",l="",m=5,n=-1,o=-1,p="",q="",r=-1,s="",t="",u=d.getCallee(),v=d.getCaller(),w=c.getPeriodType(),x=c.getPeriodTime();this.initUrlVo=function(a,b){switch(a){case"main":b.readablePeriod===w.REALTIME?this.setApplication(b.application).setReadablePeriod(b.readablePeriod):this.setApplication(b.application).setReadablePeriod(b.readablePeriod).setQueryEndDateTime(b.queryEndDateTime).setCallee(c.getCalleeByApp(b.application)).setCaller(c.getCallerByApp(b.application));break;case"filteredMap":this.setApplication(b.application).setReadablePeriod(b.readablePeriod).setQueryEndDateTime(b.queryEndDateTime).setFilter(b.filter).setHint(b.hint);break;case"inspector":this.setApplication(b.application).setReadablePeriod(b.readablePeriod).setQueryEndDateTime(b.queryEndDateTime).setAgentId(b.agentId);break;case"transactionList":this.setApplication(b.application).setReadablePeriod(b.readablePeriod).setQueryEndDateTime(b.queryEndDateTime).setTransactionInfo(b.transactionInfo);break;case"scatterFullScreenMode":this.setApplication(b.application).setReadablePeriod(b.readablePeriod).setQueryEndDateTime(b.queryEndDateTime).setAgentList(b.agentList)}return this},this.getApplication=function(){return h},this.setApplication=function(a){return h=angular.isString(a)&&a.indexOf("@")>0?a:h,this},this.getApplicationName=function(){return h.split("@")[0]},this.getServiceType=function(){return h.split("@")[1]},this.getCallee=function(){return u},this.setCallee=function(a){return u=a,this},this.getCaller=function(){return v},this.setCaller=function(a){return v=a,this},this.getPeriod=function(){return m},this.getQueryEndTime=function(){return r},this.setQueryEndTime=function(a){return r=angular.isNumber(a)&&a>0?a:r,q=e.formatDate(a),this},this.getQueryStartTime=function(){return o},this.setQueryStartTime=function(a){return o=a,this},this.getFilter=function(){return j},this.setFilter=function(a){return j=angular.isString(a)?a:j,this},this.getFilterAsJson=function(){return JSON.parse(j)},this.getHint=function(){return k},this.setHint=function(a){return k=angular.isString(a)?a:k,this},this.getAgentId=function(){return l},this.setAgentId=function(a){return l=a,this},this.getPeriodType=function(a){return i},this.setPeriodType=function(a){return i=a,i===w.REALTIME&&(m=parseInt(c.getRealtimeScatterXRangeStr()),n=60*m*1e3),this},this.setTransactionInfo=function(a){return s=angular.isString(a)?a:s,this},this.getTransactionInfo=function(){return s},this.setAgentList=function(a){return t=angular.isString(a)?a.split(","):t,this},this.getAgentList=function(){return t},this.isRealtime=function(){return i===w.REALTIME},this.setReadablePeriod=function(a){if(a===w.REALTIME)i=w.REALTIME,p="5m",m=5,n=3e5;else{var b=/^(\d)+(s|m|h|d|w|M|y)$/,c=b.exec(a);c&&(p=a,n=parseInt(a,10)*g(c[2])*1e3,i=x.indexOf(a)>-1?w.LAST:w.RANGE)}return this},this.getReadablePeriod=function(){return p},this.setQueryEndDateTime=function(a){var b=/^(19[7-9][0-9]|20\d{2})-(0[0-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])-(0[0-9]|1[0-9]|2[0-3])-([0-5][0-9])-([0-5][0-9])$/;return b.test(a)&&(q=a,this.setQueryEndTime(f(a))),this},this.getQueryEndDateTime=function(){return q},this.autoCalcultateByQueryStartTimeAndQueryEndTime=function(){return n=r-o,m=n/1e3/60,p=m+"m",q=e.formatDate(r),this},this.autoCalculateByQueryEndDateTimeAndReadablePeriod=function(){return n===-1&&(n=1e3*m*60),o=r-n,this},this.getPartialURL=function(a,b){return(a?h+"/":"")+p+"/"+q+(b&&j?"/"+j:"")},this.initUrlVo(a.path().split("/")[1],b),this.autoCalculateByQueryEndDateTimeAndReadablePeriod()}])}(),function(){"use strict";pinpointApp.constant("TransactionDaoServiceConfig",{transactionInfoUrl:"/transactionInfo.pinpoint"}),pinpointApp.service("TransactionDaoService",["TransactionDaoServiceConfig","$timeout","$window",function(a,b,c){b(function(){c.transactionData={}}),this.addData=function(a,b,d){c.transactionData[a]=b},this.getDataByName=function(a,b){angular.isFunction(b)&&b(opener.transactionData[a]||{})},this.getTransactionDetail=function(b,c,d,e,f){jQuery.ajax({type:"GET",url:a.transactionInfoUrl,cache:!1,dataType:"json",data:{agentId:b,spanId:c,traceId:d,focusTimestamp:e},success:function(a){angular.isFunction(f)&&f(null,a)},error:function(a,b,c){angular.isFunction(f)&&f("ERROR",{})}})}}])}(),function(){"use strict";pinpointApp.factory("locationService",["$location","$route","$rootScope",function(a,b,c){return a.skipReload=function(){var d=b.current,e=c.$on("$locationChangeSuccess",function(){b.current=d,e()});return a},a}])}(),function(){"use strict";pinpointApp.constant("serverMapDaoServiceConfig",{serverMapDataUrl:"/getServerMapData.pinpoint",filteredServerMapDataUrl:"/getFilteredServerMapDataMadeOfDotGroup.pinpoint",filtermapUrl:"/filtermap.pinpoint",lastTransactionListUrl:"/lastTransactionList.pinpoint",transactionListUrl:"/transactionList.pinpoint",FILTER_DELIMETER:"^",FILTER_ENTRY_DELIMETER:"|",FILTER_FETCH_LIMIT:5e3}),pinpointApp.service("ServerMapDaoService",["serverMapDaoServiceConfig",function(a){var b=this;this.abort=function(){this._oAjax&&this._oAjax.abort()},this.getServerMapData=function(c,d){var e={applicationName:c.applicationName,from:c.from,to:c.to,callerRange:c.callerRange,calleeRange:c.calleeRange};isNaN(parseInt(c.serviceTypeName))?e.serviceTypeName=c.serviceTypeName:e.serviceTypeCode=c.serviceTypeName,this._oAjax=jQuery.ajax({type:"GET",url:a.serverMapDataUrl,cache:!1,dataType:"json",data:e,success:function(a){angular.isFunction(d)&&d(null,c,a),b._oAjax=null},error:function(a,e,f){"abort"!==e&&angular.isFunction(d)&&d(f,c,{}),b._oAjax=null}})},this.getFilteredServerMapData=function(b,c){var d={applicationName:b.applicationName,from:b.from,to:b.to,originTo:b.originTo,filter:b.filter,limit:a.FILTER_FETCH_LIMIT,callerRange:b.callerRange,calleeRange:b.calleeRange,v:3,xGroupUnit:987,yGroupUnit:57};isNaN(parseInt(b.serviceTypeName))?d.serviceTypeName=b.serviceTypeName:d.serviceTypeCode=b.serviceTypeName,b.hint&&(d.hint=b.hint),jQuery.ajax({type:"GET",url:a.filteredServerMapDataUrl,cache:!1,dataType:"json",data:d,success:function(a){angular.isFunction(c)&&c(null,b,a)},error:function(a,d,e){angular.isFunction(c)&&c(e,b,{})}})},this.mergeFilteredMapData=function(a,b){return 0===a.linkDataArray.length&&0===a.nodeDataArray.length?(a.linkDataArray=b.linkDataArray,a.nodeDataArray=b.nodeDataArray):(angular.forEach(b.nodeDataArray,function(b,c){var d=this.findExistingNodeKeyFromLastMapData(a,b);d>=0?a=this.mergeNodeData(a,d,b):a.nodeDataArray.push(b)},this),angular.forEach(b.linkDataArray,function(b,c){var d=this.findExistingLinkFromLastMapData(a,b);d>=0?a=this.mergeLinkData(a,d,b):a.linkDataArray.push(b)},this)),a},this.findExistingNodeKeyFromLastMapData=function(a,b){for(var c in a.nodeDataArray)if(a.nodeDataArray[c].applicationName===b.applicationName&&a.nodeDataArray[c].serviceTypeCode===b.serviceTypeCode)return c;return-1},this.findExistingLinkFromLastMapData=function(a,b){for(var c in a.linkDataArray)if(a.linkDataArray[c].from===b.from&&a.linkDataArray[c].to===b.to)return c;return-1},this.addFilterProperty=function(a,b){var c=this.parseFilterText(a,b);return angular.forEach(b.nodeDataArray,function(a){angular.isDefined(_.findWhere(c,{nodeKey:a.key}))?a.isFiltered=!0:a.isFiltered=!1}),angular.forEach(b.linkDataArray,function(a,b){angular.isDefined(_.findWhere(c,{fromKey:a.from,toKey:a.to}))?a.isFiltered=!0:a.isFiltered=!1},this),b},this.parseFilterText=function(a,b){var c=[];return angular.forEach(a,function(a){c.push({fromServiceType:a.fst,fromApplication:a.fa,fromKey:this.findNodeKeyByApplicationName(a.fa,b),toServiceType:a.tst,toApplication:a.ta,toKey:this.findNodeKeyByApplicationName(a.ta,b),nodeKey:""})},this),c},this.findNodeKeyByApplicationName=function(a,b){var c=_.findWhere(b.nodeDataArray,{applicationName:a});return!!angular.isDefined(c)&&c.key},this.mergeNodeData=function(a,b,c){if(angular.isUndefined(a.nodeDataArray[b]))return a.nodeDataArray[b]=c,a;var d,e,f=a.nodeDataArray[b];if(f.errorCount+=c.errorCount,f.slowCount+=c.slowCount,f.totalCount+=c.totalCount,c.hasAlert&&(f.hasAlert=c.hasAlert),angular.isDefined(c.histogram))if(angular.isDefined(f.histogram))for(d in c.histogram)angular.isDefined(f.histogram[d])?f.histogram[d]+=c.histogram[d]:f.histogram[d]=c.histogram[d];else f.histogram=c.histogram;if(angular.isDefined(c.agentHistogram))for(d in c.agentHistogram)if(angular.isDefined(f.agentHistogram[d]))for(e in c.agentHistogram[d])angular.isDefined(f.agentHistogram[d][e])?f.agentHistogram[d][e]+=c.agentHistogram[d][e]:f.agentHistogram[d][e]=c.agentHistogram[d][e];else f.agentHistogram[d]=c.agentHistogram[d];if(angular.isDefined(c.timeSeriesHistogram))for(d in c.timeSeriesHistogram)if(angular.isDefined(f.timeSeriesHistogram)){var g=[];a:for(e in c.timeSeriesHistogram[d].values){for(var h in f.timeSeriesHistogram[d].values)if(f.timeSeriesHistogram[d].values[h][0]===c.timeSeriesHistogram[d].values[e][0]){f.timeSeriesHistogram[d].values[h][1]+=c.timeSeriesHistogram[d].values[e][1];continue a}g.push(c.timeSeriesHistogram[d].values[e])}f.timeSeriesHistogram[d].values=g.concat(f.timeSeriesHistogram[d].values)}else f.timeSeriesHistogram=c.timeSeriesHistogram;if(angular.isDefined(c.agentTimeSeriesHistogram))for(d in c.agentTimeSeriesHistogram)if(angular.isDefined(f.agentTimeSeriesHistogram))if(angular.isDefined(f.agentTimeSeriesHistogram[d]))for(e in c.agentTimeSeriesHistogram[d])angular.isDefined(f.agentTimeSeriesHistogram[d][e])?f.agentTimeSeriesHistogram[d][e].values=c.agentTimeSeriesHistogram[d][e].values.concat(f.agentTimeSeriesHistogram[d][e].values):f.agentTimeSeriesHistogram[d][e]=c.agentTimeSeriesHistogram[d][e];else f.agentTimeSeriesHistogram[d]=c.agentTimeSeriesHistogram[d];else f.agentTimeSeriesHistogram=c.agentTimeSeriesHistogram;if(angular.isDefined(c.serverList))for(d in c.serverList)if(f.serverList[d])for(e in c.serverList[d].instanceList)if(f.serverList[d].instanceList[e])for(var i in c.serverList[d].instanceList[e].histogram)f.serverList[d].instanceList[e].histogram[i]?f.serverList[d].instanceList[e].histogram[i]+=c.serverList[d].instanceList[e].histogram[i]:f.serverList[d].instanceList[e].histogram[i]=c.serverList[d].instanceList[e].histogram[i];else f.serverList[d].instanceList[e]=c.serverList[d].instanceList[e];else f.serverList[d]=c.serverList[d];return a},this.mergeLinkData=function(a,b,c){if(angular.isUndefined(a.linkDataArray[b]))return a.linkDataArray[b]=c,a;var d,e,f=a.linkDataArray[b];if(f.errorCount+=c.errorCount,f.slowCount+=c.slowCount,f.totalCount+=c.totalCount,c.hasAlert&&(f.hasAlert=c.hasAlert),angular.isDefined(c.histogram))for(d in c.histogram)f.histogram[d]?f.histogram[d]+=c.histogram[d]:f.histogram[d]=c.histogram[d];if(angular.isDefined(c.timeSeriesHistogram))for(d in c.timeSeriesHistogram)if(angular.isDefined(f.timeSeriesHistogram)){var g=[];a:for(e in c.timeSeriesHistogram[d].values){for(var h in f.timeSeriesHistogram[d].values)if(f.timeSeriesHistogram[d].values[h][0]===c.timeSeriesHistogram[d].values[e][0]){f.timeSeriesHistogram[d].values[h][1]+=c.timeSeriesHistogram[d].values[e][1];continue a}g.push(c.timeSeriesHistogram[d].values[e])}f.timeSeriesHistogram[d].values=g.concat(f.timeSeriesHistogram[d].values)}else f.timeSeriesHistogram=c.timeSeriesHistogram;if(angular.isDefined(c.sourceHistogram))for(d in c.sourceHistogram)if(angular.isDefined(f.sourceHistogram[d]))for(e in c.sourceHistogram[d])f.sourceHistogram[d][e]?f.sourceHistogram[d][e]+=c.sourceHistogram[d][e]:f.sourceHistogram[d][e]=c.sourceHistogram[d][e];else f.sourceHistogram[d]=c.sourceHistogram[d];if(angular.isDefined(c.targetHistogram))for(d in c.targetHistogram)if(angular.isDefined(f.targetHistogram[d]))for(e in c.targetHistogram[d])f.targetHistogram[d][e]?f.targetHistogram[d][e]+=c.targetHistogram[d][e]:f.targetHistogram[d][e]=c.targetHistogram[d][e];else f.targetHistogram[d]=c.targetHistogram[d];return a},this.mergeTimeSeriesResponses=function(a,b){return angular.forEach(b.values,function(b,c){angular.isUndefined(a.timeSeriesResponses.values[c])?a.timeSeriesResponses.values[c]=b:a.timeSeriesResponses.values[c]=_.union(b,a.timeSeriesResponses.values[c])},this),a.timeSeriesResponses.time=_.union(b.time,a.timeSeriesResponses.time),a},this.mergeGroup=function(a,b){var c=this,d=a.nodeDataArray,e=a.linkDataArray,f=c._getInboundCountMap(d,e);return b.forEach(function(a){var b=a+"_GROUP",g=[],h=[],i={},j={};d.forEach(function(k,l){var m,n,o=b+"_"+k.key,p=0;e.forEach(function(b,c){b.from==k.key&&b.targetInfo.serviceType==a&&f[b.to]&&1==f[b.to].toCount&&p++}),p<2||(e.forEach(function(e,g){e.targetInfo.serviceType==a&&(f[e.to]&&f[e.to].toCount>1||e.from==k.key&&(m||(m=c._createNewNode(o,b)),n||(n=c._createNewLink(k.key,o)),c._addToSubNode(m,c._getNodeByApplicationName(d,e.targetInfo.applicationName,a),function(){}),c._mergeLinkData(n,e),n.unknownLinkGroup.push(e),i[e.to]=null,j[e.key]=null))}),m&&(m.unknownNodeGroup.sort(function(a,b){return b.totalCount-a.totalCount}),g.push(m)),n&&(n.unknownLinkGroup.sort(function(a,b){return b.totalCount-a.totalCount}),h.push(n)))}),c._addToOriginal(d,g),c._addToOriginal(e,h),c._removeByKey(d,i),c._removeByKey(e,j)}),a},this._addToOriginal=function(a,b){b.forEach(function(b){a.push(b)})},this._getInboundCountMap=function(a,b){var c={};return a.forEach(function(a){var d={toCount:0,fromCount:0,totalCallCount:0};b.forEach(function(b){b.to===a.key&&(d.toCount++,d.totalCallCount+=b.totalCount),b.from===a.key&&d.fromCount++}),c[a.key]=d}),c},this._selectMergeTarget=function(a,b){var c=[];return a.forEach(function(a,d){b[a.key].fromCount>0||b[a.key].toCount<2||c.push(a)}),c},this._getFromNodes=function(a,b){var c=[];return a.forEach(function(a){a.to===b&&c.push(a.from)}),c},this.mergeMultiLinkGroup=function(a,b){var c=this,d=a.nodeDataArray,e=a.linkDataArray,f=this._getInboundCountMap(d,e),g=this._selectMergeTarget(d,f),h={},i=[],j=[],k={},l={};return g.forEach(function(a,d){if(h[a.key]!==!0||b.indexOf(a.serviceType)!=-1){h[a.key]=!0;var f=a.serviceType+"_GROUP",m=null,n=null,o=f+"_"+a.key,p=c._getFromNodes(e,a.key);g.forEach(function(d,g){if(h[d.key]!==!0&&a.serviceType===d.serviceType&&b.indexOf(d.serviceType)!=-1){var i=c._getFromNodes(e,d.key);if(p.length===i.length){var j=0;for(j=0;j<p.length;j++)if(i.indexOf(p[j])===-1)return;if(h[d.key]=!0,null===m&&(m=c._createNewMultiGroupNode(o,f)),null===n)for(n=[],j=0;j<i.length;j++)n.push(c._createNewLink(i[j],o));c._addToSubNode(m,d,function(a){k[a]=null}),c._addToSubLink(e,n,d.key,function(a,b){l[a]=null;var c=/(.*)\^(.*)/.exec(b.from),d=/(.*)\^(.*)/.exec(b.to),e=!1,f=null,g=0;m.subGroup.forEach(function(a,b){a.applicationName===c[1]&&(e=!0,f=a,g=b)}),e===!1&&(f={applicationName:c[1],groups:[],isLast:!1},m.subGroup.push(f),g=m.subGroup.length-1),f.groups.push({applicationName:d[1],hasAlert:b.hasAlert,totalCount:b.totalCount,serviceType:d[2],key:b.to,idx:g})})}}}),null!==m&&c._addToSubNode(m,a,function(a){k[a]=null}),null!==n&&c._addToSubLink(e,n,a.key,function(a,b){l[a]=null;var c=/(.*)\^(.*)/.exec(b.from),d=/(.*)\^(.*)/.exec(b.to),e=!1,f=null,g=0;m.subGroup.forEach(function(a,b){a.applicationName===c[1]&&(e=!0,f=a,g=b)}),e===!1&&(f={applicationName:c[1],groups:[],isLast:!1},m.subGroup.push(f),g=m.subGroup.length-1),f.groups.push({applicationName:d[1],hasAlert:b.hasAlert,totalCount:b.totalCount,serviceType:d[2],key:b.to,idx:g})}),m&&m.subGroup&&(m.subGroup[m.subGroup.length-1].isLast=!0),null!==m&&null!==n&&(i.push(m),n.forEach(function(a){j.push(a)})),m=null,n=null}}),c._addToOriginal(d,i),c._addToOriginal(e,j),c._removeByKey(d,k),c._removeByKey(e,l),a},this._createNewLink=function(a,b){return{key:a+"-"+b,from:a,to:b,sourceInfo:{},targetInfo:[],totalCount:0,errorCount:0,slowCount:0,hasAlert:!1,unknownLinkGroup:[],histogram:{}}},this._createNewNode=function(a,b){return{key:a,unknownNodeGroup:[],serviceType:b,category:b,instanceCount:0,isMultiGroup:!1,isCollapse:!0}},this._createNewMultiGroupNode=function(a,b){return{key:a,unknownNodeGroup:[],subGroup:[],serviceType:b,category:b,instanceCount:0,isMultiGroup:!0,isCollapse:!0}},this._removeByKey=function(a,b){$.each(b,function(b,c){a.forEach(function(c,d){c.key==b&&a.splice(d,1)})})},this._addToSubNode=function(a,b,c){delete b.category,a.instanceCount+=b.instanceCount,a.unknownNodeGroup.push(b),c(b.key)},this._addToSubLink=function(a,b,c,d){var e=this;a.forEach(function(a){a.to===c&&(b.forEach(function(b){b.from==a.from&&(e._mergeLinkData(b,a),b.unknownLinkGroup.push(a))}),d(a.key,a))})},this._mergeLinkData=function(a,b){a.totalCount+=b.totalCount,a.errorCount+=b.errorCount,a.slowCount+=b.slowCount,a.sourceInfo=b.sourceInfo,b.hasAlert&&(a.hasAlert=b.hasAlert)},this._getNodeByApplicationName=function(a,b,c){for(var d in a)if(b===a[d].applicationName&&c===a[d].serviceType)return a[d];return!1},this.getNodeDataByKey=function(a,b){var c=a.nodeDataArray,d=!1;return c.forEach(function(a){a.key===b&&(d=a)}),d},this.getLinkNodeDataByNodeKey=function(a,b,c){var d=a.linkDataArray,e=!1;return d.forEach(function(a){a.to===b&&a.from.indexOf(c)!=-1&&(e=a)}),e},this.getLinkDataByKey=function(a,b){var c=a.linkDataArray,d=!1;return c.forEach(function(a){a.key===b&&(d=a)}),d},this.getUnknownNodeDataByUnknownNodeGroup=function(a,c){for(var d in c)c[d]=b.getNodeDataByKey(a,c[d].key);return c},this.getUnknownLinkDataByUnknownLinkGroup=function(a,c){for(var d in c)c[d]=b.getLinkDataByKey(a,c[d].key),c[d].fromNode=b.getNodeDataByKey(a,c[d].from),c[d].toNode=b.getNodeDataByKey(a,c[d].to);return c},this.extractDataFromApplicationMapData=function(a){var b=["applicationName","category","errorCount","hasAlert","instanceCount","isWas","isQueue","isAuthorized","key","slowCount","serviceType","totalCount","histogram"],c=["errorCount","from","hasAlert","key","sourceInfo","slowCount","to","targetInfo","totalCount"],d={nodeDataArray:[],linkDataArray:[]};return angular.forEach(a.nodeDataArray,function(a,c){d.nodeDataArray.push({}),angular.forEach(b,function(b){d.nodeDataArray[c][b]=a[b]})}),angular.forEach(a.linkDataArray,function(a,b){d.linkDataArray.push({}),angular.forEach(c,function(c){d.linkDataArray[b][c]=a[c]})}),d}}])}(),function(){"use strict";pinpointApp.constant("agentDaoServiceConfig",{agentStatUrl:"/getAgentStat.pinpoint",dateFormat:"YYYY-MM-DD HH:mm:ss"}),pinpointApp.service("AgentDaoService",["agentDaoServiceConfig",function(a){function b(a){return angular.isNumber(a)?a.toFixed(2):0}this.getAgentStat=function(b,c){jQuery.ajax({type:"GET",url:a.agentStatUrl,cache:!1,dataType:"json",data:b,success:function(a){angular.isFunction(c)&&c(null,a)},error:function(a,b,d){angular.isFunction(c)&&c(d,{})}})},this.getSampleRate=function(a){var b=100,c=a/5,d=Math.floor(c/b);return c<=b?1:d},this.parseMemoryChartDataForAmcharts=function(b,c){var d=[],e=c.charts.JVM_GC_OLD_TIME.points,f=c.charts.JVM_GC_OLD_COUNT.points;if(e.length!==f.length)throw new Error("assertion error","time.length != count.length");for(var g=0,h=0;h<f.length;++h){var i={time:moment(e[h].xVal).format(a.dateFormat)};for(var j in b.line)if(b.line[j].isFgc){var k=f[h].sumYVal,l=e[h].sumYVal;l>0&&(g+=l),k>0&&(i[b.line[j].key+"Count"]=k,i[b.line[j].key+"Time"]=g,g=0)}else{var m=c.charts[b.line[j].id].points[h].maxYVal;m>=0&&(i[b.line[j].key]=m)}d.push(i)}return d},this.parseCpuLoadChartDataForAmcharts=function(b,c){var d=c.charts.CPU_LOAD_JVM,e=c.charts.CPU_LOAD_SYSTEM;if(d||e){b.isAvailable=!0;var f=[],g=d.points,h=e.points;if(g.length!==h.length)throw new Error("assertion error","jvmCpuLoad.length != systemCpuLoad.length");for(var i=0;i<g.length;++i){if(g[i].xVal!==h[i].xVal)throw new Error("assertion error","timestamp mismatch between jvmCpuLoad and systemCpuLoad");var j={time:moment(g[i].xVal).format(a.dateFormat),maxCpuLoad:100},k="number"==typeof c.charts.CPU_LOAD_JVM.points[i].maxYVal?c.charts.CPU_LOAD_JVM.points[i].maxYVal.toFixed(2):0,l="number"==typeof c.charts.CPU_LOAD_SYSTEM.points[i].maxYVal?c.charts.CPU_LOAD_SYSTEM.points[i].maxYVal.toFixed(2):0;k>=0&&(j.jvmCpuLoad=k),l>=0&&(j.systemCpuLoad=l),f.push(j)}return f}},this.parseTpsChartDataForAmcharts=function(c,d){var e=d.charts.TPS_SAMPLED_CONTINUATION.points,f=d.charts.TPS_SAMPLED_NEW.points,g=d.charts.TPS_UNSAMPLED_CONTINUATION.points,h=d.charts.TPS_UNSAMPLED_NEW.points,i=d.charts.TPS_TOTAL.points,j=[],k=-1,l=i.length;if(!(l>0))return j;c.isAvailable=!0;for(var m=0;m<l;m++){var n={time:moment(e[m].xVal).format(a.dateFormat)},o=b(e[m].avgYVal),p=b(f[m].avgYVal),q=b(g[m].avgYVal),r=b(h[m].avgYVal),s=b(i[m].avgYVal);o!=k&&(n.sampledContinuationTps=o),p!=k&&(n.sampledNewTps=p),q!=k&&(n.unsampledContinuationTps=q),r!=k&&(n.unsampledNewTps=r),s!=k&&(n.totalTps=s),j.push(n)}return j},this.parseActiveTraceChartDataForAmcharts=function(c,d){var e=d.charts.ACTIVE_TRACE_FAST.points,f=d.charts.ACTIVE_TRACE_NORMAL.points,g=d.charts.ACTIVE_TRACE_SLOW.points,h=d.charts.ACTIVE_TRACE_VERY_SLOW.points,i=[],j=-1;if(!(e||f||g||h))return i;c.isAvailable=!0;for(var k=0;k<e.length;k++){var l={time:moment(e[k].xVal).format(a.dateFormat)},m=b(e[k].avgYVal),n=b(f[k].avgYVal),o=b(g[k].avgYVal),p=b(h[k].avgYVal);m!=j&&(l.fast=m,l.fastTitle=e[k].title),n!=j&&(l.normal=n,l.normalTitle=f[k].title),o!=j&&(l.slow=o,l.slowTitle=g[k].title),
p!=j&&(l.verySlow=p,l.verySlowTitle=h[k].title),i.push(l)}return i},this.parseDataSourceChartDataForAmcharts=function(b,c,d){var e=[];if(0===c.length)return e;for(var f=0,g=0;g<c.length;g++){var h=c[g],i=h.id,j=h.charts.ACTIVE_CONNECTION_SIZE.points;if(0===j.length)return e;for(var k=0;k<j.length;k++){var l=j[k];0===g&&(e[k]={time:moment(l.xVal).format(a.dateFormat)}),f=Math.max(f,l.avgYVal),e[k][d+i]=l.avgYVal.toFixed(1)}}return b.isAvailable=!0,{max:parseInt(f)+1,data:e}}}])}(),function(){"use strict";pinpointApp.factory("SidebarTitleVoService",["PreferenceService",function(a){return function(){var b=a.getIconPath(),c=this;this._sImage=!1,this._sImageType=!1,this._sTitle=!1,this._sImage2=!1,this._sImageType2=!1,this._sTitle2=!1,this.setImageType=function(a){if(!angular.isString(a))throw"ImageType should be string in SidebarTitleVo";return c._sImageType=a,c._sImage=c._parseImageTypeToImageUrl(a),c},this._parseImageTypeToImageUrl=function(a){if(angular.isString(a)){var c="";switch(a){case"UNKNOWN_GROUP":c=b+"UNKNOWN.png";break;default:c=b+a+".png"}return c}throw"ImageType should be string in SidebarTitleVo"},this.getImageType=function(){return c._sImageType},this.getImage=function(){return c._sImage},this.setTitle=function(a){if(!angular.isString(a))throw"Title should be string in SidebarTitleVo";return c._sTitle=a,c},this.getTitle=function(){return c._sTitle},this.setImageType2=function(a){if(!angular.isString(a))throw"ImageType2 should be string in SidebarTitleVo";return c._sImageType2=a,c._sImage2=c._parseImageTypeToImageUrl(a),c},this.getImageType2=function(){return c._sImageType2},this.getImage2=function(){return c._sImage2},this.setTitle2=function(a){if(!angular.isString(a))throw"Title2 should be string in SidebarTitleVo";return c._sTitle2=a,c},this.getTitle2=function(){return c._sTitle2}}}])}(),function(){"use strict";pinpointApp.factory("filteredMapUtilService",["filterConfig","ServerMapFilterVoService","$window",function(a,b,c){return{mergeFilters:function(a,b){var c=[];if(a.getFilter()){var d=JSON.parse(a.getFilter());if(angular.isArray(d)){c=d;var e=this.findFilterInNavbarVo(b.getFromApplication(),b.getFromServiceType(),b.getToApplication(),b.getToServiceType(),a);if(e)return c[e.index]=b.toJson(),c}}return c.push(b.toJson()),c},mergeHints:function(a,b){var c={},d=this.parseShortHintToLongHint(JSON.parse(a.getHint())),e=b.getHint();if(d)if(e){var f=_.keys(e)[0],g=e[f];c=angular.copy(d),angular.isDefined(c[f])?(c[f]=_.union(c[f],g),c[f]=this.uniqueHintValue(c[f])):c[f]=g}else c=d;else c=b.getHint();return c},uniqueHintValue:function(a){for(var b=0;b<a.length;++b)for(var c=b+1;c<a.length;++c)a[b].rpc===a[c].rpc&&a[b].rpcServiceTypeCode===a[c].rpcServiceTypeCode&&a.splice(c--,1);return a},parseShortHintToLongHint:function(a){var b=angular.copy(a);return angular.forEach(b,function(a,c){for(var d=[],e=0;e<a.length;e+=2)d.push({rpc:a[e],rpcServiceTypeCode:a[e+1]});b[c]=d}),b},parseLongHintToShortHint:function(a){var b=angular.copy(a);return angular.forEach(b,function(a,c){var d=[];for(var e in a)d.push(a[e].rpc),d.push(a[e].rpcServiceTypeCode);b[c]=d}),b},getStartValueForFilterByLabel:function(a,b){var c=function(){for(var c in b)if(b[c].label===a)return c;return!1}(),d=0;return c>0&&(d=parseInt(b[c-1].label,10)),d},getFilteredMapUrlWithFilterVo:function(a,b,d){var e=this.mergeFilters(a,b),f=b.getMainApplication()+"@"+b.getMainServiceTypeName(),g="#/filteredMap/"+f+"/"+a.getReadablePeriod()+"/"+a.getQueryEndDateTime()+"/"+c.encodeURIComponent(JSON.stringify(e));if(a.getHint()||d.getHint()){var h=this.mergeHints(a,d),i=this.parseLongHintToShortHint(h);g+="/"+c.encodeURIComponent(JSON.stringify(i))}return g},findFilterInNavbarVo:function(a,c,d,e,f){var g=JSON.parse(f.getFilter()),h=!1;return"USER"===c&&(a="USER"),angular.isArray(g)&&angular.forEach(g,function(f,g){var i=new b(f);a===i.getFromApplication()&&d===i.getToApplication()&&c===i.getFromServiceType()&&e===i.getToServiceType()&&(h={oServerMapFilterVoService:i,index:g})}),h},doFiltersHaveUnknownNode:function(a){for(var b in a)if("UNKNOWN"===a[b].tst)return!0;return!1}}}])}(),function(){"use strict";pinpointApp.constant("filterConfig",{FILTER_DELIMETER:"^",FILTER_ENTRY_DELIMETER:"|"})}(),function(){"use strict";pinpointApp.factory("ServerMapFilterVoService",[function(){return function(a){var b=this;this._sMainApplication=null,this._nMainServiceTypeCode=null,this._sMainServiceTypeName=null,this._sFromApplication=null,this._sFromServiceType=null,this._sFromAgentName=null,this._sToApplication=null,this._sToServiceType=null,this._sToAgentName=null,this._sResponseFrom=0,this._sResponseTo="max",this._bIncludeException=null,this._sRequestUrlPattern="",this.setMainApplication=function(a){if(!angular.isString(a))throw new Error("mainApplication should be string in ServerMapFilterVo. : ",a);return b._sMainApplication=a,b},this.getMainApplication=function(){return b._sMainApplication},this.setMainServiceTypeCode=function(a){if(!angular.isNumber(a))throw new Error("mainServiceTypeCode should be number in ServerMapFilterVo. : ",a);return b._nMainServiceTypeCode=a,b},this.setMainServiceTypeName=function(a){if(!angular.isString(a))throw new Error("mainServiceTypeName should be string in ServerMapFilterVo. : ",a);return b._sMainServiceTypeName=a,b},this.getMainServiceTypeCode=function(){return b._nMainServiceTypeCode},this.getMainServiceTypeName=function(){return b._sMainServiceTypeName},this.setFromApplication=function(a){if(!angular.isString(a))throw new Error("fromApplication should be string in ServerMapFilterVo. : ",a);return b._sFromApplication=a,b},this.getFromApplication=function(){return b._sFromApplication},this.setFromServiceType=function(a){if(!angular.isString(a))throw new Error("fromServiceType should be string in ServerMapFilterVo. : ",a);return b._sFromServiceType=a,b},this.getFromServiceType=function(){return b._sFromServiceType},this.setFromAgentName=function(a){if(!angular.isString(a))throw new Error("fromAgentName should be string in ServerMapFilterVo. : ",a);return b._sFromAgentName=a,b},this.getFromAgentName=function(){return b._sFromAgentName},this.setToApplication=function(a){if(!angular.isString(a))throw new Error("toApplication should be string in ServerMapFilterVo. : ",a);return b._sToApplication=a,b},this.getToApplication=function(){return b._sToApplication},this.setToServiceType=function(a){if(!angular.isString(a))throw new Error("toServiceType should be string in ServerMapFilterVo. : ",a);return b._sToServiceType=a,b},this.getToServiceType=function(){return b._sToServiceType},this.setToAgentName=function(a){if(!angular.isString(a))throw new Error("toAgentName should be string in ServerMapFilterVo. : ",a);return b._sToAgentName=a,b},this.getToAgentName=function(){return b._sToAgentName},this.setResponseFrom=function(a){if(angular.isString(a))b._sResponseFrom=parseInt(a,10);else{if(!angular.isNumber(a))throw new Error("responseFrom should be string in ServerMapFilterVo. : ",a);b._sResponseFrom=a}return b},this.getResponseFrom=function(){return b._sResponseFrom},this.setResponseTo=function(a){if("max"===a)b._sResponseTo="max";else{if(!angular.isNumber(a)&&!angular.isString(a))throw new Error("responseTo should be string in ServerMapFilterVo.");a=parseInt(a,10),a>=3e4?b._sResponseTo="max":b._sResponseTo=a}return b},this.getResponseTo=function(){return b._sResponseTo},this.setIncludeException=function(a){if(!angular.isDefined(a))throw new Error("includeException should be defined in ServerMapFilterVo.");return b._bIncludeException=a,b},this.getIncludeException=function(){return b._bIncludeException},this.setRequestUrlPattern=function(a){return angular.isString(a)&&(b._sRequestUrlPattern=a),b},this.getRequestUrlPattern=function(){return b._sRequestUrlPattern},this.toJson=function(){var a={fa:b._sFromApplication,fst:b._sFromServiceType,ta:b._sToApplication,tst:b._sToServiceType,ie:b._bIncludeException};return 0===b._sResponseFrom&&"max"===b._sResponseTo||(a.rf=b._sResponseFrom,a.rt=b._sResponseTo),b._sRequestUrlPattern&&(a.url=b._sRequestUrlPattern),b._sFromAgentName&&(a.fan=b._sFromAgentName),b._sToAgentName&&(a.tan=b._sToAgentName),a},a&&angular.isObject(a)&&(this.setFromApplication(a.fa).setFromServiceType(a.fst).setToApplication(a.ta).setToServiceType(a.tst).setIncludeException(a.ie),angular.isNumber(a.rf)&&a.rt&&this.setResponseFrom(a.rf).setResponseTo(a.rt),a.url&&this.setRequestUrlPattern(a.url),a.fan&&this.setFromAgentName(a.fan),a.tan&&this.setToAgentName(a.tan))}}])}(),function(a){"use strict";pinpointApp.constant("AlarmAjaxServiceConfig",{group:"/userGroup.pinpoint",groupMember:"/userGroup/member.pinpoint",pinpointUser:"/user.pinpoint",alarmRule:"/application/alarmRule.pinpoint",alarmRuleSet:"/application/alarmRule/checker.pinpoint"}),pinpointApp.service("AlarmAjaxService",["AlarmAjaxServiceConfig","$http",function(b,c){function d(a,b,d){c.post(a,b).then(function(a){d(a.data)},function(a){d(a)})}function e(a,b,d){c.put(a,b).then(function(a){d(a.data)},function(a){d(a)})}function f(b,c,d){a.ajax(b,{type:"DELETE",data:JSON.stringify(c),contentType:"application/json"}).done(function(a){d(a)}).fail(function(a){d(a)})}function g(b,d,e){c.get(b+"?"+a.param(d)).then(function(a){e(a.data)},function(a){e(a)})}this.getUserGroupList=function(a,c){g(b.group,a,c)},this.createUserGroup=function(a,c){d(b.group,a,c)},this.updateUserGroup=function(a,c){e(b.group,a,c)},this.removeUserGroup=function(a,c){f(b.group,a,c)},this.addMemberInGroup=function(a,c){d(b.groupMember,a,c)},this.getGroupMemberListInGroup=function(a,c){g(b.groupMember,a,c)},this.removeMemberInGroup=function(a,c){f(b.groupMember,a,c)},this.getPinpointUserList=function(a,c){g(b.pinpointUser,a,c)},this.createPinpointUser=function(a,c){d(b.pinpointUser,a,c)},this.updatePinpointUser=function(a,c){e(b.pinpointUser,a,c)},this.removePinpointUser=function(a,c){f(b.pinpointUser,a,c)},this.getRuleList=function(a,c){g(b.alarmRule,a,c)},this.createRule=function(a,c){d(b.alarmRule,a,c)},this.updateRule=function(a,c){e(b.alarmRule,a,c)},this.removeRule=function(a,c){f(b.alarmRule,a,c)},this.getRuleSet=function(a,c){g(b.alarmRuleSet,a,c)}}])}(jQuery),function(a){"use strict";pinpointApp.constant("AlarmUtilServiceConfig",{hideClass:"hide-me"}),pinpointApp.service("AlarmUtilService",["AlarmUtilServiceConfig","$timeout","AlarmAjaxService","SystemConfigurationService",function(b,c,d,e){var f=this;this.show=function(a){a.removeClass(b.hideClass)},this.hide=function(){for(var a=0;a<arguments.length;a++)arguments[a].addClass(b.hideClass)},this.sendCRUD=function(a,b,f,g){(angular.isUndefined(b)||""===b)&&(b={userId:e.get("userId")||""}),c(function(){d[a](b,function(a){a.errorCode||a.status?g(a):f(a)})})},this.setTotal=function(a,b){a.html("("+b+")")},this.hasDuplicateItem=function(a,b){for(var c=a.length,d=!1,e=0;e<c;e++)if(b(a[e])){d=!0;break}return d},this.closeAlert=function(a,b){a.animate({height:50},100,function(){f.hide(a,b)})},this.extractID=function(a){return a.prop("id").split("_")[1]},this.getNode=function(b,c){return a(b.toElement||b.target).parents(c)}}])}(jQuery),function(){"use strict";pinpointApp.factory("ServerMapHintVoService",[function(){return function(a){var b=this;this._sApplicationName=!1,this._aHint=!1,this.setHint=function(a,b){this._sApplicationName=a,this._aHint=b},this.getHint=function(){var a={};return b._sApplicationName?a[b._sApplicationName]=b._aHint:a=!1,a}}}])}(),function(){"use strict";pinpointApp.factory("isVisibleService",function(){function a(d,e,f,g,h,i,j,k){var l=d.parentNode,m=2;if(!c(d))return!1;if(e||0===e||(e=99999),9===l.nodeType)return!0;if("0"===b(d,"opacity")||"none"===b(d,"display")||"hidden"===b(d,"visibility"))return!1;if("undefined"!=typeof f&&"undefined"!=typeof g&&"undefined"!=typeof h&&"undefined"!=typeof i&&"undefined"!=typeof j&&"undefined"!=typeof k||(f=d.offsetTop,i=d.offsetLeft,h=f+d.offsetHeight,g=i+d.offsetWidth,j=d.offsetWidth,k=d.offsetHeight),l){var n=b(l,"overflow");return!(("hidden"===n||"scroll"===n||"auto"===n)&&e>0&&(e-=1,i+m>l.offsetWidth+l.scrollLeft||i+j-m<l.scrollLeft||f+m>l.offsetHeight+l.scrollTop||f+k-m<l.scrollTop))&&(d.offsetParent===l&&(i+=l.offsetLeft,f+=l.offsetTop),a(l,e,f,g,h,i,j,k))}return!0}function b(a,b){return window.getComputedStyle?document.defaultView.getComputedStyle(a,null)[b]:a.currentStyle?a.currentStyle[b]:void 0}function c(a){for(;a=a.parentNode;)if(a==document)return!0;return!1}return a})}(),function(){"use strict";pinpointApp.factory("UserLocalesService",["$window",function(a){var b="en",c=a.navigator.userLanguage||a.navigator.language;return c="string"===$.type(c)&&c.length>=2?c.substring(0,2):b,{userLocale:c,defaultLocale:b}}])}(),function(){"use strict";var a={configuration:{general:{warning:"(User configuration is stored in browser cache. Server-side storage will be supported in a future release.)",empty:"Favorite list empty"},alarmRules:{mainStyle:"",title:"Alarm Rule Type",desc:"The following types of alarm rules are supported by Pinpoint.",category:[{title:"[Type]",items:[{name:"SLOW COUNT",desc:"Sends an alarm when the number of slow requests sent by the application exceeds the configured threshold."},{name:"SLOW RATE",desc:"Sends an alarm when the percentage(%) of slow requests sent by the application exceeds the configured threshold."},{name:"ERROR COUNT",desc:"Sends an alarm when the number of failed requests sent by the application exceeds the configured threshold."},{name:"ERROR RATE",desc:"Sends an alarm when the percentage(%) of failed requests sent by the application exceeds the configured threshold."},{name:"TOTAL COUNT",desc:"Sends an alarm when the number of all requests sent by the application exceeds the configured threshold."},{name:"SLOW COUNT TO CALLEE",desc:"Sends an alarm when the number of slow responses returned by the application exceeds the configured threshold."},{name:"SLOW RATE TO CALLEE",desc:"Sends an alarm when the percentage(%) of slow responses returned by the application exceeds the configured threshold."},{name:"ERROR COUNT TO CALLEE",desc:"Sends an alarm when the number of failed responses returned by the application exceeds the configured threshold."},{name:"ERROR RATE TO CALLEE",desc:"Sends an alarm when the percentage(%) of failed responses returned by the application exceeds the configured threshold."},{name:"TOTAL COUNT TO CALLEE",desc:"Sends an alarm when the number of all remote calls sent to the application exceeds the configured threshold."},{name:"HEAP USAGE RATE",desc:"Sends an alarm when the application's heap usage(%) exceeds the configured threshold."},{name:"JVM CPU USAGE RATE",desc:"Sends an alarm when the application's CPU usage(%) exceeds the configured threshold."}]}]}},navbar:{searchPeriod:{guide:"Search duration may not be greater than {{day}} days."},applicationSelector:{mainStyle:"",title:"Application List",desc:"Shows the list of applications with Pinpoint installed.",category:[{title:"[Legend]",items:[{name:"Icon",desc:"Application Type"},{name:"Text",desc:"Application Name. The value set using <code>-Dpinpoint.applicationName</code> when launching Pinpoint agent."}]}]},depth:{mainStyle:"",title:'<img src="images/inbound.png" width="22px" height="22px" style="margin-top:-4px;"> Inbound and <img src="images/outbound.png" width="22px" height="22px" style="margin-top:-4px"> Outbound',desc:"Search-depth of server map.",category:[{title:"[Legend]",items:[{name:"Inbound",desc:"Number of depth to render for requests coming in to the selected node."},{name:"Outbound",desc:"Number of depth to render for requests going out from the selected node"}]}]},periodSelector:{mainStyle:"",title:"Period Selector",desc:"Selects the time period for querying data.",category:[{title:"[Usage]",items:[{name:"<button type='button' class='btn btn-success btn-xs'><span class='glyphicon glyphicon-th-list'></span></button>",desc:"Query for data traced during the most recent selected time-period.<br/>Auto-refresh is supported for 5m, 10m, 3h time-period."},{name:"<button type='button' class='btn btn-success btn-xs'><span class='glyphicon glyphicon-calendar'></span></button>",desc:"Query for data traced between the two selected times for a maximum of 48 hours."}]}]}},servermap:{"default":{mainStyle:"width:560px;",title:"Server Map",desc:"Displays a topological view of the distributed server map.",category:[{title:"[Node]",list:["Each node is a logical unit of application.","The value on the top-right corner represents the number of server instances assigned to that application. (Not shown when there is only one such instance)","An alarm icon is displayed on the top-left corner if an error/exception is detected in one of the server instances.","Clicking a node shows information on all incoming transactions on the right-hand side of the screen."]},{title:"[Arrow]",list:["Each arrow represents a transaction flow.","The number shows the transaction count and is displayed in red for transactions with error.","<span class='glyphicon glyphicon-filter' style='color:green;'></span> is shown when a filter is applied.","Clicking an arrow shows information on all transactions passing through the selected section on the right-hand side of the screen."]},{title:"[Applying Filter]",list:["Right-clicking on an arrow displays a filter menu.","'Filter' filters the server map to only show transactions that has passed through the selected section.","'Filter Wizard' allows additional filter configurations."]},{title:"[Chart Configuration]",list:["Right-clicking on an empty area displays a chart configuration menu.","Node Setting / Merge Unknown : Groups all agent-less applications into a single node.","Double-clicking on an empty resets the zoom level of the server map."]}]}},realtime:{"default":{mainStyle:"",title:"Realtime Active Thread Chart",desc:"Shows the Active Thread count of each agent in realtime.",category:[{title:"[Error Messages]",items:[{name:"UNSUPPORTED VERSION",desc:"Agent version too old. (Please upgrade the agent to 1.5.0+)",nameStyle:"width:120px;border-bottom:1px solid gray",descStyle:"border-bottom:1px solid gray"},{name:"CLUSTER OPTION NOTSET",desc:"Option disabled by agent. (Please set profiler.pinpoint.activethread to true in profiler.config)",nameStyle:"width:120px;border-bottom:1px solid gray",descStyle:"border-bottom:1px solid gray"},{name:"TIMEOUT",desc:"Agent connection timed out receiving active thread count. Please contact the administrator if problem persists.",nameStyle:"width:120px;border-bottom:1px solid gray",descStyle:"border-bottom:1px solid gray"},{name:"NOT FOUND",desc:"Agent not found. (If you get this message while the agent is running, please set profiler.tcpdatasender.command.accept.enable to true in profiler.config)",nameStyle:"width:120px;border-bottom:1px solid gray",descStyle:"border-bottom:1px solid gray"},{name:"CLUSTER CHANNEL CLOSED",desc:"Agent session expired.",nameStyle:"width:120px;border-bottom:1px solid gray",descStyle:"border-bottom:1px solid gray"},{name:"PINPOINT INTERNAL ERROR",desc:"Pinpoint internal error. Please contact the administrator.",nameStyle:"width:120px;border-bottom:1px solid gray",descStyle:"border-bottom:1px solid gray"},{name:"No Active Thread",desc:"The agent has no threads that are currently active.",nameStyle:"width:120px;border-bottom:1px solid gray",descStyle:"border-bottom:1px solid gray"},{name:"No Response",desc:"No response from Pinpoint Web. Please contact the administrator.",nameStyle:"width:120px;border-bottom:1px solid gray",descStyle:"border-bottom:1px solid gray"}]}]}},scatter:{"default":{mainStyle:"",title:"Response Time Scatter Chart",desc:"",category:[{title:"[Legend]",items:[{name:"<span class='glyphicon glyphicon-stop' style='color:#2ca02c'></span>",desc:"Successful Transaction"},{name:"<span class='glyphicon glyphicon-stop' style='color:#f53034'></span>",desc:"Failed Transaction"},{name:"X-axis",desc:"Transaction Timestamp (hh:mm)"},{name:"Y-axis",desc:"Response Time (ms)"}]},{title:"[Usage]",image:"<img src='/images/help/scatter_01.png' width='200px' height='125px'>",items:[{name:"<span class='glyphicon glyphicon-plus'></span>",desc:"Drag on the scatter chart to show detailed information on selected transactions."},{name:"<span class='glyphicon glyphicon-cog'></span>",desc:"Set the min/max value of the Y-axis (Response Time)."},{name:"<span class='glyphicon glyphicon-download-alt'></span>",desc:"Download the chart as an image file."},{name:"<span class='glyphicon glyphicon-fullscreen'></span>",desc:"Open the chart in a new window."}]}]}},nodeInfoDetails:{responseSummary:{mainStyle:"",title:"Response Summary Chart",desc:"",category:[{title:"[Legend]",items:[{name:"X-Axis",desc:"Response Time"},{name:"Y-Axis",desc:"Transaction Count"},{name:"<spanstyle='color:#2ca02c'>1s</span>",desc:"No. of Successful transactions (less than 1 second)"},{name:"<span style='color:#3c81fa'>3s</span>",desc:"No. of Successful transactions (1 ~ 3 seconds)"},{name:"<span style='color:#f8c731'>5s</span>",desc:"No. of Successful transactions (3 ~ 5 seconds)"},{name:"<span style='color:#f69124'>Slow</span>",desc:"No. of Successful transactions (greater than 5 seconds)"},{name:"<span style='color:#f53034'>Error</span>",desc:"No. of Failed transactions regardless of response time"}]}]},load:{mainStyle:"",title:"Load Chart",desc:"",category:[{title:"[Legend]",items:[{name:"X-Axis",desc:"Transaction Timestamp (in minutes)"},{name:"Y-Axis",desc:"Transaction Count"},{name:"<spanstyle='color:#2ca02c'>1s</span>",desc:"No. of Successful transactions (less than 1 second)"},{name:"<span style='color:#3c81fa'>3s</span>",desc:"No. of Successful transactions (1 ~ 3 seconds)"},{name:"<span style='color:#f8c731'>5s</span>",desc:"No. of Successful transactions (3 ~ 5 seconds)"},{name:"<span style='color:#f69124'>Slow</span>",desc:"No. of Successful transactions (greater than 5 seconds)"},{name:"<span style='color:#f53034'>Error</span>",desc:"No. of Failed transactions regardless of response time"}]},{title:"[Usage]",list:["Clicking on a legend item shows/hides all transactions within the selected group.","Dragging on the chart zooms in to the dragged area."]}]},nodeServers:{mainStyle:"width:400px;",title:"Server Information",desc:"List of physical servers and their server instances.",category:[{title:"[Legend]",items:[{name:"<span class='glyphicon glyphicon-home'></span>",desc:"Hostname of the physical server"},{name:"<span class='glyphicon glyphicon-hdd'></span>",desc:"AgentId of the Pinpoint agent installed on the server instance running on the physical server"}]},{title:"[Usage]",items:[{name:"<button type='button' class='btn btn-default btn-xs'>Inspector</button>",desc:"Open a new window with detailed information on the WAS with Pinpoint installed."},{name:"<span class='glyphicon glyphicon-record' style='color:#3B99FC'></span>",desc:"Display statistics on transactions carried out by the server instance."},{name:"<span class='glyphicon glyphicon-hdd' style='color:red'></span>",desc:"Display statistics on transactions (with error) carried out by the server instance."}]}]},unknownList:{mainStyle:"",title:"UnknownList",desc:"From the chart's top-right icon",category:[{title:"[Usage]",items:[{name:"1st",desc:"Toggle between Response Summary Chart / Load Chart"},{name:"2nd",desc:"Show Node Details"}]}]},searchAndOrder:{mainStyle:"",title:"Search and Fliter",desc:"Filter by server name or total count.Clicking Name or Count sorts the list in ascending/descending order."}},linkInfoDetails:{responseSummary:{mainStyle:"",title:"Response Summary Chart",desc:"",category:[{title:"[Legend]",items:[{name:"X-Axis",desc:"Response Time"},{name:"Y-Axis",desc:"Transaction Count"},{name:"<spanstyle='color:#2ca02c'>1s</span>",desc:"No. of Successful transactions (less than 1 second)"},{name:"<span style='color:#3c81fa'>3s</span>",desc:"No. of Successful transactions (1 ~ 3 seconds)"},{name:"<span style='color:#f8c731'>5s</span>",desc:"No. of Successful transactions (3 ~ 5 seconds)"},{name:"<span style='color:#f69124'>Slow</span>",desc:"No. of Successful transactions (greater than 5 seconds)"},{name:"<span style='color:#f53034'>Error</span>",desc:"No. of Failed transactions regardless of response time"}]},{title:"[Usage]",list:["Click on the bar to query for transactions within the selected response time."]}]},load:{mainStyle:"",title:"Load Chart",desc:"",category:[{title:"[Legend]",items:[{name:"X-Axis",desc:"Transaction Timestamp (in minutes)"},{name:"Y-Axis",desc:"Transaction Count"},{name:"<spanstyle='color:#2ca02c'>1s</span>",desc:"No. of Successful transactions (less than 1 second)"},{name:"<span style='color:#3c81fa'>3s</span>",desc:"No. of Successful transactions (1 ~ 3 seconds)"},{name:"<span style='color:#f8c731'>5s</span>",desc:"No. of Successful transactions (3 ~ 5 seconds)"},{name:"<span style='color:#f69124'>Slow</span>",desc:"No. of Successful transactions (greater than 5 seconds)"},{name:"<span style='color:#f53034'>Error</span>",desc:"No. of Failed transactions regardless of response time"}]},{title:"[Usage]",list:["Clicking on a legend item shows/hides all transactions within the selected group.","Dragging on the chart zooms in to the dragged area."]}]},linkServers:{mainStyle:"width:350px;",title:"Server Information",desc:"List of physical servers and their server instances.",category:[{title:"[Legend]",items:[{name:"<span class='glyphicon glyphicon-home'></span>",desc:"Hostname of the physical server"},{name:"<span class='glyphicon glyphicon-hdd'></span>",desc:"AgentId of the Pinpoint agent installed on the server instance running on the physical server"}]},{title:"[Usage]",items:[{name:"<button type='button' class='btn btn-default btn-xs'>Inspector</button>",desc:"Open a new window with detailed information on the WAS with Pinpoint installed."},{name:"<button type='button' class='btn btn-default btn-xs'><span class='glyphicon glyphicon-plus'></span></button>",desc:"Display statistics on transactions carried out by the server instance."},{name:"<button type='button' class='btn btn-danger btn-xs'><span class='glyphicon glyphicon-plus'></span></button>",desc:"Display statistics on transactions (with error) carried out by the server instance."}]}]},unknownList:{mainStyle:"",title:"UnknownList",desc:"From the chart's top-right icon,",category:[{title:"[Usage]",items:[{name:"1st",desc:"Toggle between Response Summary Chart"},{name:"2dn",desc:"Show Node Details"}]}]},searchAndOrder:{mainStyle:"",title:"Search and Filter",desc:"Filter by server name or total count.<br/>Clicking Name or Count sorts the list in ascending/descending order."}},inspector:{list:{mainStyle:"",title:"Agent list",desc:"List of agents registered under the current Application Name",category:[{title:"[Legend]",items:[{name:"<span class='glyphicon glyphicon-home'></span>",desc:"Hostname of the agent's machine"},{name:"<span class='glyphicon glyphicon-hdd'></span>",desc:"Agent-id of the installed agent"},{name:"<span class='glyphicon glyphicon-ok-sign' style='color:#40E340'></span>",desc:"Agent was running at the time of query"},{name:"<span class='glyphicon glyphicon-minus-sign' style='color:#F00'></span>",desc:"Agent was shutdown at the time of query"},{name:"<span class='glyphicon glyphicon-remove-sign' style='color:#AAA'></span>",desc:"Agent was disconnected at the time of query"},{name:"<span class='glyphicon glyphicon-question-sign' style='color:#AAA'></span>",desc:"Agent status was unknown at the time of query"}]}]},heap:{mainStyle:"",title:"Heap",desc:"JVM's heap information and full garbage collection times(if any)",category:[{title:"[Legend]",items:[{name:"Max",desc:"Maximum heap size"},{name:"Used",desc:"Heap currently in use"},{name:"FGC",desc:"Full garbage collection duration (number of FGCs in parenthesis if it occurred more than once)"}]}]},permGen:{mainStyle:"",title:"PermGen",desc:"JVM's PermGen information and full garbage collection times(if any)",category:[{title:"[Legend]",items:[{name:"Max",desc:"Maximum heap size"},{name:"Used",desc:"Heap currently in use"},{name:"FGC",desc:"Full garbage collection duration (number of FGCs in parenthesis if it occurred more than once)"}]}]},cpuUsage:{mainStyle:"",title:"Cpu Usage",desc:"JVM/System's CPU Usage - For multi-core CPUs, displays the average CPU usage of all the cores",category:[{title:"[Legend]",items:[{name:"Java 1.6",desc:"Only the JVM's CPU usage is collected"},{name:"Java 1.7+",desc:"Both the JVM's and the system's CPU usage are collected"}]}]},tps:{mainStyle:"",title:"TPS",desc:"Transactions per second received by the server",category:[{title:"[Legend]",items:[{name:"Sampled New (S.N)",desc:"Profiled transactions that started from the current agent"},{name:"Sampled Continuation (S.C)",desc:"Profiled transactions that started from another agent"},{name:"Unsampled New (U.N)",desc:"Unprofiled transactions that started from the current agent"},{name:"Unsampled Continuation (U.C)",desc:"Unprofiled transactions that started from another agent"},{name:"Total",desc:"All transactions"}]}]},activeThread:{mainStyle:"",title:"Active Thread",desc:"Snapshots of the agent's active thread count, categorized by how long they have active for serving a request.",category:[{title:"[Legend]",items:[{name:"Fast (1s)",desc:"Number of threads that have been active for less than or equal to 1s"},{name:"Normal (3s)",desc:"Number of threads that have been active for less than or equal to 3s but longer than 1s"},{name:"Slow (5s)",desc:"Number of threads that have been active for less than or equal to 5s but longer than 3s"},{name:"Very Slow (slow)",desc:"Number of threads that have been active for longer than 5s"}]}]},dataSource:{mainStyle:"",title:"Data Source",desc:"Show the status of agent's data source.",category:[{title:"[Legend]",items:[{name:"Active Avg",desc:"Average number of active connections"},{name:"Active Max",desc:"Maximum number of active connections"},{name:"Total Max",desc:"The maximum number of active connections that can be allocated at the same time"},{name:"Type",desc:"DB Connection Pool Type"}]}]},wrongApp:["<div style='font-size:12px'>The agent is currently registered under {{application2}} due to the following:<br>","1. The agent has moved from {{application1}} to {{application2}}<br>","2. A different agent with the same agent id has been registered to {{application2}}<hr>","For the former case, you should delete the mapping between {{application1}} and {{agentId}}.<br>","For the latter case, the agent id of the duplicate agent must be changed.</div>"].join("")},callTree:{column:{mainStyle:"",title:"Call Tree",desc:"",category:[{title:"[Column]",items:[{name:"Gap",desc:"Time elapsed between the start of the previous method and entry of this method"},{name:"Exec",desc:"The overall duration of the method call from method entry until method exit"},{name:"Exec(%)",desc:"<img src='/images/help/callTree_01.png'/>"},{name:"",desc:"<span style='background-color:#FFFFFF;color:#5bc0de'>Light blue</span> The execution time of the method call as a percentage of the total execution time of the transaction"},{name:"",desc:"<span style='background-color:#FFFFFF;color:#4343C8'>Dark blue</span> A percentage of the self execution time"},{name:"Self",desc:"The time that was used for execution of this method only, excluding time consumed in nested methods call"}]}]}},transactionTable:{log:{}},transactionList:{openError:{noParent:"Scatter data of parent window had been changed.\r\nso can't scan the data any more.",noData:"There is no {{application}} scatter data in parent window."}}};pinpointApp.constant("helpContent-en",a)}(),function(){"use strict";var a={configuration:{general:{warning:"* 설정 정보는 브라우저 캐쉬에 저장합니다. 서버 측 저장은 추후 지원 할 예정입니다.",empty:"등록된 목록이 없습니다."},alarmRules:{mainStyle:"",title:"알람 룰의 종류",desc:"Pinpoint에서 지원하는 Alarm rule의 종류는 아래와 같습니다.",category:[{title:"[항목]",items:[{name:"SLOW COUNT",desc:"application 내에서 외부서버를 호출한 요청 중 slow 호출의 개수가 임계치를 초과한 경우 알람이 전송된다."},{name:"SLOW RATE",desc:"application 내에서 외부서버를 호출한 요청 중 slow 호출의 비율(%)이 임계치를 초과한 경우 알람이 전송된다."
},{name:"ERROR COUNT",desc:"application 내에서 외부서버를 호출한 요청 중 error 가 발생한 호출의 개수가 임계치를 초과한 경우 알람이 전송된다."},{name:"ERROR RATE",desc:"application 내에서 외부서버를 호출한 요청 중 error 가 발생한 호출의 비율이 임계치를 초과한 경우 알람이 전송된다."},{name:"TOTAL COUNT",desc:"application 내에서 외부서버를 호출한 요청의 개수가 임계치를 초과한 경우 알람이 전송된다."},{name:"SLOW COUNT TO CALLEE",desc:"외부에서 application을 호출한 요청 중에 외부서버로 응답을 늦게 준 요청의 개수가 임계치를 초과한 경우 알람이 전송된다."},{name:"SLOW RATE TO CALLEE",desc:"외부에서 application을 호출한 요청 중에 외부서버로 응답을 늦게 준 요청의 비율(%)이 임계치를 초과한 경우 알람이 전송된다."},{name:"ERROR COUNT TO CALLEE",desc:"외부에서 application을 호출한 요청 중에 에러가 발생한 요청의 개수가 임계치를 초과한 경우 알람이 전송된다."},{name:"ERROR RATE TO CALLEE",desc:"외부에서 application을 호출한 요청 중에 에러가 발생한 요청의 비율(%)이 임계치를 초과한 경우 알람이 전송된다."},{name:"TOTAL COUNT TO CALLEE",desc:"외부에서 application을 호출한 요청 개수가 임계치를 초과한 경우 알람이 전송된다."},{name:"HEAP USAGE RATE",desc:"heap의 사용률이 임계치를 초과한 경우 알람이 전송된다."},{name:"JVM CPU USAGE RATE",desc:"applicaiton의 CPU 사용률이 임계치를 초과한 경우 알람이 전송된다."}]}]}},navbar:{searchPeriod:{guide:"한번에 검색 할 수 있는 최대 기간은 {{day}}일 입니다."},applicationSelector:{mainStyle:"",title:"응용프로그램 목록",desc:"핀포인트가 설치된 응용프로그램 목록입니다.",category:[{title:"[범례]",items:[{name:"아이콘",desc:"응용프로그램의 종류"},{name:"텍스트",desc:"응용프로그램의 이름입니다. Pinpoint agent 설정에서 applicationName에 지정한 값입니다."}]}]},depth:{mainStyle:"",title:'<img src="images/inbound.png" width="22px" height="22px" style="margin-top:-4px;"> Inbound 와 <img src="images/outbound.png" width="22px" height="22px" style="margin-top:-4px"> Outbound',desc:"서버맵의 탐색 깊이를 설정합니다.",category:[{title:"[범례]",items:[{name:"Inbound",desc:"선택된 노드를 기준으로 들어오는 탐색깊이"},{name:"Outbound",desc:"선택된 노드를 기준으로 나가는 탐색 깊이"}]}]},periodSelector:{mainStyle:"",title:"조회 시간 설정",desc:"데이터 조회 시간을 선택합니다.",category:[{title:"[범례]",items:[{name:"<button type='button' class='btn btn-success btn-xs'><span class='glyphicon glyphicon-th-list'></span></button>",desc:"현재 시간을 기준으로 선택한 시간 이전부터 현재시간 사이에 수집된 데이터를 조회합니다.<br/>최근 5m, 10m, 3h조회는 자동 새로고침 기능을 지원합니다."},{name:"<button type='button' class='btn btn-success btn-xs'><span class='glyphicon glyphicon-calendar'></span></button>",desc:"지정된 시간 사이에 수집된 데이터를 조회합니다. 조회 시간은 분단위로 최대 48시간을 지정할 수 있습니다."}]}]}},servermap:{"default":{mainStyle:"width:560px;",title:"서버맵",desc:"분산된 서버를 도식화 한 지도 입니다.",category:[{title:"[박스]",list:["박스는 응용프로그램 그룹을 나타냅니다.","우측의 숫자는 응용프로그램 그룹에 속한 서버 인스턴스의 개수입니다.(한 개일 때에는 숫자를 보여주지 않습니다.)","좌측 빨간 알람은 임계값을 초과한 모니터링 항목이 있을 때 나타납니다."]},{title:"[화살표]",list:["화살표는 트랜잭션의 흐름을 나타냅니다.","화살표의 숫자는 호출 수 입니다. 임계치 이상의 에러를 포함하면 빨간색으로 보여집니다.","<span class='glyphicon glyphicon-filter' style='color:green;'></span> : 필터가 적용되면 아이콘이 표시됩니다."]},{title:"[박스의 기능]",list:["박스를 선택하면 어플리케이션으로 유입된 트랜잭션 정보를 화면 우측에 보여줍니다."]},{title:"[화살표의 기능]",list:["화살표를 선택하여 선택된 구간을 통과하는 트랜잭션의 정보를 화면 우측에 보여줍니다.","Context menu의 Filter는 선택된 구간을 통과하는 트랜잭션만 모아서 보여줍니다.","Filter wizard는 보다 상세한 필터 설정을 할 수 있습니다.","필터가 적용되면 화살표에 <span class='glyphicon glyphicon-filter' style='color:green;'></span>아이콘이 표시됩니다."]},{title:"[차트 설정]",list:["비어있는 부분을 마우스 오른쪽 클릭하여 context menu를 열면 차트 설정메뉴가 보입니다.","Node Setting / Merge Unknown : agent가 설치되어있지 않은 응용프로그램을 하나의 박스로 보여줍니다.","비어있는 부분 더블클릭 : 줌을 초기화 합니다."]}]}},realtime:{"default":{mainStyle:"",title:"Realtime Active Thread Chart",desc:"각 Agent의 Active Thread 갯수를 실시간으로 보여줍니다.",category:[{title:"[에러 메시지 설명]",items:[{name:"UNSUPPORTED VERSION",desc:"해당 에이전트의 버전에서는 지원하지 않는 기능입니다. (1.5.0 이상 버전으로 업그레이드하세요.)",nameStyle:"width:120px;border-bottom:1px solid gray",descStyle:"border-bottom:1px solid gray"},{name:"CLUSTER OPTION NOTSET",desc:"해당 에이전트의 설정에서 기능이 비활성화되어 있습니다. (pinpoint 설정 파일에서 profiler.pinpoint.activethread 항목을 true로 변경하세요.)",nameStyle:"width:120px;border-bottom:1px solid gray",descStyle:"border-bottom:1px solid gray"},{name:"TIMEOUT",desc:"해당 에이전트에서 일시적으로 활성화 된 스레드 개수를 받지 못하였습니다.(오래 지속될 경우 담당자에게 문의하세요.)",nameStyle:"width:120px;border-bottom:1px solid gray",descStyle:"border-bottom:1px solid gray"},{name:"NOT FOUND",desc:"해당 에이전트를 찾을 수 없습니다.(에이전트가 활성화 되어 있는 경우에 해당 메시지가 발생한다면 pinpoint 설정 파일에서 profiler.tcpdatasender.command.accept.enable 항목을 true로 변경하세요.)",nameStyle:"width:120px;border-bottom:1px solid gray",descStyle:"border-bottom:1px solid gray"},{name:"CLUSTER CHANNEL CLOSED",desc:"해당 에이전트와의 세션이 종료되었습니다.",nameStyle:"width:120px;border-bottom:1px solid gray",descStyle:"border-bottom:1px solid gray"},{name:"PINPOINT INTERNAL ERROR",desc:"핀포인트 내부 에러가 발생하였습니다.(담당자에게 문의하세요.)",nameStyle:"width:120px;border-bottom:1px solid gray",descStyle:"border-bottom:1px solid gray"},{name:"No Active Thread",desc:"현재 해당 에이전트는 활성화된 스레드가 존재하지 않습니다.",nameStyle:"width:120px;border-bottom:1px solid gray",descStyle:"border-bottom:1px solid gray"},{name:"No Response",desc:"핀포인트 웹 서버로부터의 응답을 받지 못하였습니다.(담당자에게 문의하세요.)",nameStyle:"width:120px;border-bottom:1px solid gray",descStyle:"border-bottom:1px solid gray"}]}]}},scatter:{"default":{mainStyle:"",title:"Response Time Scatter Chart",desc:"수집된 트랜잭션의 응답시간 분포도입니다.",category:[{title:"[범례]",items:[{name:"<span class='glyphicon glyphicon-stop' style='color:#2ca02c'></span>",desc:"에러가 없는 트랜잭션 (Success)"},{name:"<span class='glyphicon glyphicon-stop' style='color:#f53034'></span>",desc:"에러를 포함한 트랜잭션 (Failed)"},{name:"X축",desc:"트랜잭션이 실행된 시간 (시:분)"},{name:"Y축",desc:"트랜잭션의 응답 속도 (ms)"}]},{title:"[기능]",image:"<img src='/images/help/scatter_01.png' width='200px' height='125px'>",items:[{name:"<span class='glyphicon glyphicon-plus'></span>",desc:"마우스로 영역을 드래그하여 드래그 된 영역에 속한 트랜잭션의 상세정보를 조회할 수 있습니다."},{name:"<span class='glyphicon glyphicon-cog'></span>",desc:"에러를 포함한 트랜잭션 (Failed)"},{name:"X축",desc:"응답시간(Y축)의 최대 또는 최소값을 변경할 수 있습니다."},{name:"<span class='glyphicon glyphicon-download-alt'></span>",desc:"차트를 새창으로 크게 보여줍니다."}]}]}},nodeInfoDetails:{responseSummary:{mainStyle:"",title:"Response Summary Chart",desc:"응답결과 요약 입니다.",category:[{title:"[범례]",items:[{name:"X축",desc:"트랜잭션 응답시간 요약 단위"},{name:"Y축",desc:"트랜잭션의 개수"},{name:"<spanstyle='color:#2ca02c'>1s</span>",desc:"<span class='label label-info'>0초 <= 응답시간 < 1초</span> 에 해당하는 성공한 트랜잭션의 수"},{name:"<span style='color:#3c81fa'>3s</span>",desc:"<span class='label label-info'>1초 <= 응답시간 < 3초</span> 에 해당하는 성공한 트랜잭션의 수"},{name:"<span style='color:#f8c731'>5s</span>",desc:"<span class='label label-info'>3초 <= 응답시간 < 5초</span> 에 해당하는 성공한 트랜잭션의 수"},{name:"<span style='color:#f69124'>Slow</span>",desc:"<span class='label label-info'>5초 <= 응답시간</span> 에 해당하는 성공한 트랜잭션의 수"},{name:"<span style='color:#f53034'>Error</span>",desc:"응답시간과 무관하게 실패한 트랜잭션의 수"}]}]},load:{mainStyle:"",title:"Load Chart",desc:"시간별 트랜잭션의 응답 결과입니다.",category:[{title:"[범례]",items:[{name:"X축",desc:"트랜잭션이 실행된 시간 (분단위)"},{name:"Y축",desc:"트랜잭션의 개수"},{name:"<spanstyle='color:#2ca02c'>1s</span>",desc:"<span class='label label-info'>0초 <= 응답시간 < 1초</span> 에 해당하는 성공한 트랜잭션의 수"},{name:"<span style='color:#3c81fa'>3s</span>",desc:"<span class='label label-info'>1초 <= 응답시간 < 3초</span> 에 해당하는 성공한 트랜잭션의 수"},{name:"<span style='color:#f8c731'>5s</span>",desc:"<span class='label label-info'>3초 <= 응답시간 < 5초</span> 에 해당하는 성공한 트랜잭션의 수"},{name:"<span style='color:#f69124'>Slow</span>",desc:"<span class='label label-info'>5초 <= 응답시간</span> 에 해당하는 성공한 트랜잭션의 수"},{name:"<span style='color:#f53034'>Error</span>",desc:"응답시간과 무관하게 실패한 트랜잭션의 수"}]},{title:"[기능]",list:["범례를 클릭하여 해당 응답시간에 속한 트랜잭션을 차트에서 제외하거나 포함 할 수 있습니다.","마우스로 드래그하여 드래그 한 범위를 확대할 수 있습니다."]}]},nodeServers:{mainStyle:"width:400px;",title:"Server Information",desc:"물리서버와 해당 서버에서 동작중인 서버 인스턴스의 정보를 보여줍니다.",category:[{title:"[범례]",items:[{name:"<span class='glyphicon glyphicon-home'></span>",desc:"물리서버의 호스트이름입니다."},{name:"<span class='glyphicon glyphicon-hdd'></span>",desc:"물리서버에 설치된 서버 인스턴스에서 동작중인 Pinpoint의 agentId입니다."}]},{title:"[기능]",items:[{name:"<button type='button' class='btn btn-default btn-xs'>Inspector</button>",desc:"Pinpoint가 설치된 WAS의 상세한 정보를 보여줍니다."},{name:"<span class='glyphicon glyphicon-record' style='color:#3B99FC'></span>",desc:"해당 인스턴스에서 처리된 트랜잭션 통계를 조회할 수 있습니다."},{name:"<span class='glyphicon glyphicon-hdd' style='color:red'></span>",desc:"에러를 발생시킨 트랜잭션이 포함되어있다는 의미입니다."}]}]},unknownList:{mainStyle:"",title:"UnknownList",desc:"차트 오른쪽 상단의 아이콘부터",category:[{title:"[기능]",items:[{name:"첫번째",desc:"Response Summary"},{name:"두번째",desc:"해당 노드 상세보기"}]}]},searchAndOrder:{mainStyle:"",title:"검색과 필터링",desc:"서버 이름과 Count로 검색이 가능합니다.",category:[{title:"[기능]",items:[{name:"Name",desc:"이름을 오름/내림차순 정렬 합니다."},{name:"Count",desc:"갯수를 오름/내림차순 정렬 합니다."}]}]}},linkInfoDetails:{responseSummary:{mainStyle:"",title:"Response Summary Chart",desc:"응답결과 요약 입니다.",category:[{title:"[범례]",items:[{name:"X축",desc:"트랜잭션 응답시간 요약 단위"},{name:"Y축",desc:"트랜잭션의 개수"},{name:"<spanstyle='color:#2ca02c'>1s</span>",desc:"<span class='label label-info'>0초 <= 응답시간 < 1초</span> 에 해당하는 성공한 트랜잭션의 수"},{name:"<span style='color:#3c81fa'>3s</span>",desc:"<span class='label label-info'>1초 <= 응답시간 < 3초</span> 에 해당하는 성공한 트랜잭션의 수"},{name:"<span style='color:#f8c731'>5s</span>",desc:"<span class='label label-info'>3초 <= 응답시간 < 5초</span> 에 해당하는 성공한 트랜잭션의 수"},{name:"<span style='color:#f69124'>Slow</span>",desc:"<span class='label label-info'>5초 <= 응답시간</span> 에 해당하는 성공한 트랜잭션의 수"},{name:"<span style='color:#f53034'>Error</span>",desc:"응답시간과 무관하게 실패한 트랜잭션의 수"}]},{title:"[기능]",list:["바(bar)를 클릭하면 해당 응답시간에 속한 트랜잭션의 목록을 조회합니다."]}]},load:{mainStyle:"",title:"Load Chart",desc:"시간별 트랜잭션의 응답 결과입니다.",category:[{title:"[범례]",items:[{name:"X축",desc:"트랜잭션이 실행된 시간 (분단위)"},{name:"Y축",desc:"트랜잭션의 개수"},{name:"<spanstyle='color:#2ca02c'>1s</span>",desc:"<span class='label label-info'>0초 <= 응답시간 < 1초</span> 에 해당하는 성공한 트랜잭션의 수"},{name:"<span style='color:#3c81fa'>3s</span>",desc:"<span class='label label-info'>1초 <= 응답시간 < 3초</span> 에 해당하는 성공한 트랜잭션의 수"},{name:"<span style='color:#f8c731'>5s</span>",desc:"<span class='label label-info'>3초 <= 응답시간 < 5초</span> 에 해당하는 성공한 트랜잭션의 수"},{name:"<span style='color:#f69124'>Slow</span>",desc:"<span class='label label-info'>5초 <= 응답시간</span> 에 해당하는 성공한 트랜잭션의 수"},{name:"<span style='color:#f53034'>Error</span>",desc:"응답시간과 무관하게 실패한 트랜잭션의 수"}]},{title:"[기능]",list:["범례를 클릭하여 해당 응답시간에 속한 트랜잭션을 차트에서 제외하거나 포함 할 수 있습니다.","마우스로 드래그하여 드래그 한 범위를 확대할 수 있습니다."]}]},linkServers:{mainStyle:"width:350px;",title:"Server Information",desc:"해당 구간을 통과하는 트랜잭션을 호출한 서버 인스턴스의 정보입니다. (호출자)",category:[{title:"[범례]",items:[{name:"<span class='glyphicon glyphicon-hdd'></span>",desc:"물리서버에 설치된 서버 인스턴스에서 동작중인 Pinpoint의 agentId입니다."}]},{title:"[기능]",items:[{name:"<button type='button' class='btn btn-default btn-xs'>Inspector</button>",desc:"Pinpoint가 설치된 WAS의 상세한 정보를 보여줍니다."},{name:"<button type='button' class='btn btn-default btn-xs'><span class='glyphicon glyphicon-plus'></span></button>",desc:"해당 인스턴스에서 처리된 트랜잭션 통계를 조회할 수 있습니다."},{name:"<button type='button' class='btn btn-danger btn-xs'><span class='glyphicon glyphicon-plus'></span></button>",desc:"에러를 발생시킨 트랜잭션이 포함되어있다는 의미입니다."}]}]},unknownList:{mainStyle:"",title:"UnknownList",desc:"차트 오른쪽 상단의 아이콘부터",category:[{title:"[기능]",items:[{name:"첫번째",desc:"Response Summary"},{name:"두번째",desc:"해당 노드 상세보기"}]}]},searchAndOrder:{mainStyle:"",title:"검색과 필터링",desc:"서버 이름과 Count로 검색이 가능합니다.",category:[{title:"[기능]",items:[{name:"Name",desc:"이름을 오름/내림차순 정렬 합니다."},{name:"Count",desc:"갯수를 오름/내림차순 정렬 합니다."}]}]}},inspector:{list:{mainStyle:"",title:"Agent 리스트",desc:"현 Appliation Name에 등록된 agent 리스트입니다.",category:[{title:"[범례]",items:[{name:"<span class='glyphicon glyphicon-home'></span>",desc:"Agent가 설치된 장비의 호스트 이름"},{name:"<span class='glyphicon glyphicon-hdd'></span>",desc:"설치된 agent의 agent-id"},{name:"<span class='glyphicon glyphicon-ok-sign' style='color:#40E340'></span>",desc:"정상적으로 실행중인 agent 상태 표시"},{name:"<span class='glyphicon glyphicon-minus-sign' style='color:#F00'></span>",desc:"Shutdown 된 agent 상태 표시"},{name:"<span class='glyphicon glyphicon-remove-sign' style='color:#AAA'></span>",desc:"연결이 끊긴 agent 상태 표시"},{name:"<span class='glyphicon glyphicon-question-sign' style='color:#AAA'></span>",desc:"알수 없는 상태의 agent 상태 표시"}]}]},heap:{mainStyle:"",title:"Heap",desc:"JVM의 heap 정보와 full garbage collection 소요 시간",category:[{title:"[범례]",items:[{name:"Max",desc:"최대 heap 사이즈"},{name:"Used",desc:"현재 사용 중인 heap 사이즈"},{name:"FGC",desc:"Full garbage collection의 총 소요 시간(2번 이상 발생 시, 괄호 안에 발생 횟수 표시)"}]}]},permGen:{mainStyle:"",title:"PermGen",desc:"JVM의 PermGen 정보와 full garbage collection 소요 시간",category:[{title:"[범례]",items:[{name:"Max",desc:"최대 heap 사이즈"},{name:"Used",desc:"현재 사용 중인 heap 사이즈"},{name:"FGC",desc:"Full garbage collection의 총 소요 시간(2번 이상 발생 시, 괄호 안에 발생 횟수 표시)"}]}]},cpuUsage:{mainStyle:"",title:"Cpu Usage",desc:"JVM과 시스템의 CPU 사용량 - 멀티코어 CPU의 경우, 전체 코어 사용량의 평균입니다.",category:[{title:"[범례]",items:[{name:"Java 1.6",desc:"JVM의 CPU 사용량만 수집됩니다."},{name:"Java 1.7+",desc:"JVM과 전체 시스템의 CPU 사용량 모두 수집됩니다."}]}]},tps:{mainStyle:"",title:"TPS",desc:"서버로 인입된 초당 트랜잭션 수",category:[{title:"[범례]",items:[{name:"Sampled New (S.N)",desc:"선택된 agent에서 시작한 샘플링된 트랜잭션"},{name:"Sampled Continuation (S.C)",desc:"다른 agent에서 시작한 샘플링된 트랜잭션"},{name:"Unsampled New (U.N)",desc:"선택된 agent에서 시작한 샘플링되지 않은 트랜잭션"},{name:"Unsampled Continuation (U.C)",desc:"다른 agent에서 시작한 샘플링되지 않은 트랜잭션"},{name:"Total",desc:"모든 트랜잭션"}]}]},activeThread:{mainStyle:"",title:"Active Thread",desc:"사용자 request를 처리하는 agent의 active thread 현황을 보여줍니다.",category:[{title:"[범례]",items:[{name:"Fast (1s)",desc:"현재 소요시간이 1초 이하인 thread 갯수"},{name:"Normal (3s)",desc:"현재 소요시간이 1초 초과, 3초 이하인 thread 갯수"},{name:"Slow (5s)",desc:"현재 소요시간이 3초 초과, 5초 이하인 thread 갯수"},{name:"Very Slow (slow)",desc:"현재 소요시간이 5초를 넘고 있는 thread 갯수"}]}]},dataSource:{mainStyle:"",title:"Data Source",desc:"에이전트의 DataSource 현황을 보여줍니다.",category:[{title:"[범례]",items:[{name:"Active Avg",desc:"사용한 Connection의 평균 갯수"},{name:"Active Max",desc:"사용한 Connection의 최대 갯수"},{name:"Total Max",desc:"사용이 가능한 Connection의 최대 갯수"},{name:"Type",desc:"DB Connection Pool 종류"}]}]},wrongApp:["<div style='font-size:12px'>해당 agent는 {{application1}}이 아닌 {{application2}}에 포함되어 있습니다.<br>","원인은 다음 중 하나입니다.<hr>","1. 해당 agent가 {{application1}}에서 {{application2}}으로 이동한 경우<br>","2.{{agentId}}의 agent가 {{application2}}에도 등록 된 경우<hr>","1의 경우 {{application1}}과 {{agentId}}간의 매핑 저보를 삭제해야 합니다<br>","2의 경우 중복 등록 된 agent의 id를 변경해야 합니다.</div>"].join("")},callTree:{column:{mainStyle:"",title:"Call Tree",desc:"Call Tree의 컬럼명을 설명합니다.",category:[{title:"[컬럼]",items:[{name:"Gap",desc:"이전 메소드가 시작된 후 현재 메소드를 실행하기 까지의 지연 시간"},{name:"Exec",desc:"메소드 시작부터 종료까지의 시간"},{name:"Exec(%)",desc:"<img src='/images/help/callTree_01.png'/>"},{name:"",desc:"<span style='background-color:#FFFFFF;color:#5bc0de'>옅은 파란색</span><br/>트랜잭션 전체 실행 시간 대 exec 시간의 비율"},{name:"",desc:"<span style='background-color:#FFFFFF;color:#4343C8'>진한 파란색</span><br/>self 시간 비율"},{name:"Self",desc:"메소드 자체의 시작부터 종료까지의 시간으로 하위의 메소드가 실행된 시간을 제외한 값"}]}]}},transactionTable:{log:{}},transactionList:{openError:{noParent:"부모 윈도우의 scatter chart 정보가 변경되어 더 이상 transaction 정보를 표시할 수 없습니다.",noData:"부모 윈도우에 {{application}} scatter chart 정보가 없습니다."}}};pinpointApp.constant("helpContent-ko",a)}(),function(){"use strict";var a=['<div class="pinpoint-tooltip" style="{{mainStyle}}">',"<dl>","<dt>{{{title}}}</dt>","<dd>{{{desc}}}</dd>","</dl>","{{#if category}}<hr/>{{/if}}","{{#each category}}","<p>{{title}}</p>",'{{#if image}}<p style="text-align:center">{{{image}}}</p>{{/if}}',"{{#if items}}","<table>","{{#each items}}","<tr>",'<td style="{{nameStyle}}">{{{name}}}</td>','<td style="{{descStyle}}">{{{desc}}}</td>',"</tr>","{{/each}}","</table>","{{/if}}","{{#if list}}","<ul>","{{#each list}}","<li>{{{this}}}</li>","{{/each}}","</ul>","{{/if}}","{{/each}}","</div>"].join(""),b=Handlebars.compile(a);pinpointApp.constant("helpContentTemplate",b)}(),function(){"use strict";pinpointApp.factory("helpContentService",["$window","$injector","UserLocalesService",function(a,b,c){var d="helpContent-"+c.userLocale,e="helpContent-"+c.defaultLocale;return b.has(d)?b.get(d):b.get(e)}])}(),function(a){"use strict";pinpointApp.service("AnalyticsService",["SystemConfigurationService",function(a){this.send=function(b,c,d,e,f){if("undefined"!=typeof ga){if(a.get("sendUsage")!==!0)return;1==arguments.length?ga("send","pageview",arguments[0]):ga("send","event",b,c,d,e,f)}},this.sendMain=function(a,b,c,d){this.send(this.CONST.MAIN,a,b,c,d)},this.CONST={},this.CONST.MAIN="Main",this.CONST.CONTEXT="Context",this.CONST.CALLSTACK="CallStack",this.CONST.MIXEDVIEW="MixedView",this.CONST.INSPECTOR="Inspector",this.CONST.VERSION="Version",this.CONST.CLK_APPLICATION="ClickApplication",this.CONST.CLK_TIME="ClickTime",this.CONST.CLK_SEARCH_NODE="ClickSearchNode",this.CONST.CLK_CLEAR_SEARCH="ClickClearSearch",this.CONST.CLK_NODE="ClickNode",this.CONST.CLK_LINK="ClickLink",this.CONST.CLK_UPDATE_TIME="ClickUpdateTime",this.CONST.CLK_HELP="ClickHelp",this.CONST.CLK_SCATTER_SETTING="ClickScatterSetting",this.CONST.CLK_DOWNLOAD_SCATTER="ClickDownloadScatter",this.CONST.CLK_RESPONSE_GRAPH="ClickResponseGraph",this.CONST.CLK_LOAD_GRAPH="ClickLoadGraph",this.CONST.CLK_SHOW_GRAPH="ClickShowGraph",this.CONST.CLK_SHOW_SERVER_LIST="ClickShowServerList",this.CONST.CLK_OPEN_INSPECTOR="ClickOpenInspector",this.CONST.CLK_FILTER_TRANSACTION="ClickFilterTransaction",this.CONST.CLK_FILTER_TRANSACTION_WIZARD="ClickFilterTransactionWizard",this.CONST.CLK_MORE="ClickMore",this.CONST.CLK_DISTRIBUTED_CALL_FLOW="ClickDistributedCallFlow",this.CONST.CLK_SERVER_MAP="ClickServerMap",this.CONST.CLK_RPC_TIMELINE="ClickRPCTimeline",this.CONST.CLK_CALL="ClickCall",this.CONST.CLK_TRANSACTION="ClickTransaction",this.CONST.CLK_HEAP="ClickHeap",this.CONST.CLK_PERM_GEN="ClickPermGen",this.CONST.CLK_CPU_LOAD="ClickCpuLoad",this.CONST.CLK_REFRESH="ClickRefresh",this.CONST.CLK_CALLEE_RANGE="ClickCalleeRange",this.CONST.CLK_CALLER_RANGE="ClickCallerRange",this.CONST.CLK_REALTIME_CHART_HIDE="ClickRealtimeChartHide",this.CONST.CLK_REALTIME_CHART_SHOW="ClickRealtimeChartShow",this.CONST.CLK_REALTIME_CHART_PIN_ON="ClickRealtimeChartPinOn",this.CONST.CLK_REALTIME_CHART_PIN_OFF="ClickRealtimeChartPinOff",this.CONST.CLK_SHOW_SERVER_TYPE_DETAIL="ClickShowServerTypeDetail",this.CONST.CLK_CHANGE_AGENT_INSPECTOR="ClickChangeAgentInspector",this.CONST.CLK_CHANGE_AGENT_MAIN="ClickChangeAgentMain",this.CONST.CLK_START_REALTIME="ClickStartRealtime",this.CONST.CLK_OPEN_THREAD_DUMP_LAYER="ClickOpenThreadDumpLayer",this.CONST.CLK_CONFIGURATION="ClickConfiguration",this.CONST.CLK_GENERAL="ClickConfigurationGeneral",this.CONST.CLK_ALARM="ClickConfigurationAlarm",this.CONST.CLK_HELP="ClickConfigurationHelp",this.CONST.CLK_GENERAL_SET_DEPTH="ClickGeneralSetDepth",this.CONST.CLK_GENERAL_SET_PERIOD="ClickGeneralSetPeriod",this.CONST.CLK_GENERAL_SET_FAVORITE="ClickGeneralSetFavorite",this.CONST.CLK_GENERAL_SET_TIMEZONE="ClickGeneralSetTimezone",this.CONST.CLK_ALARM_CREATE_USER_GROUP="ClickAlarmCreateUserGroup",this.CONST.CLK_ALARM_REFRESH_USER_GROUP="ClickAlarmRefreshUserGroup",this.CONST.CLK_ALARM_FILTER_USER_GROUP="ClickAlarmFilterUserGroup",this.CONST.CLK_ALARM_ADD_USER="ClickAlarmAddUser",this.CONST.CLK_ALARM_REFRESH_USER="ClickAlarmRefreshUser",this.CONST.CLK_ALARM_FILTER_USER="ClickAlarmFilterUser",this.CONST.CLK_ALARM_CREATE_PINPOINT_USER="ClickAlarmCreatePinpointUser",this.CONST.CLK_ALARM_REFRESH_PINPOINT_USER="ClickAlarmRefreshPinpointUser",this.CONST.CLK_ALARM_FILTER_PINPOINT_USER="ClickAlarmFilterPinpointUser",this.CONST.CLK_ALARM_CREATE_RULE="ClickAlarmCreateUserGroup",this.CONST.CLK_ALARM_REFRESH_RULE="ClickAlarmRefreshUserGroup",this.CONST.CLK_ALARM_FILTER_RULE="ClickAlarmFilterUserGroup",this.CONST.TG_DATE="ToggleDate",this.CONST.TG_UPDATE_ON="ToggleUpdateOn",this.CONST.TG_UPDATE_OFF="ToggleUpdateOff",this.CONST.TG_NODE_VIEW="ToggleNodeView",this.CONST.TG_SCATTER_SUCCESS="ToggleScatterSuccess",this.CONST.TG_SCATTER_FAILED="ToggleScatterFailed",this.CONST.TG_MERGE_TYPE="ToggleMergeType",this.CONST.TG_CALL_COUNT="ToggleCallCount",this.CONST.TG_TPS="ToggleTPS",this.CONST.TG_ROUTING="ToggleRouting",this.CONST.TG_CURVE="ToggleCurve",this.CONST.TG_REALTIME_CHART_RESIZE="ToggleRealtimeChartResize",this.CONST.ST_="Sort",this.CONST.ASCENDING="ascending",this.CONST.DESCENDING="descending",this.CONST.ON="on",this.CONST.OFF="off",this.CONST.MAIN_PAGE="/main.page",this.CONST.FILTEREDMAP_PAGE="/filteredMap.page",this.CONST.INSPECTOR_PAGE="/inspector.page",this.CONST.SCATTER_FULL_SCREEN_PAGE="/scatterFullScreen.page",this.CONST.TRANSACTION_DETAIL_PAGE="/transactionDetail.page",this.CONST.TRANSACTION_LIST_PAGE="/transactionList.page",this.CONST.TRANSACTION_VIEW_PAGE="/transactionView.page"}])}(jQuery),function(){"use strict";pinpointApp.constant("RealtimeWebsocketServiceConfig",{wsUrl:"/agent/activeThread.pinpointws",wsTimeout:1e4,retryTimeout:3e3,maxRetryCount:1}),pinpointApp.service("RealtimeWebsocketService",["RealtimeWebsocketServiceConfig",function(a){function b(){i=new WebSocket("ws://"+location.host+a.wsUrl),i.onopen=function(a){j=!0,g=h=Date.now(),c(),f.onopen(a)},i.onmessage=function(a){h=Date.now(),f.onmessage(JSON.parse(a.data))},i.onclose=function(a){j=!1,i=null,d(),f.onclose(a),e()}}function c(){k=setInterval(function(){null!==h&&(Date.now()-h<a.wsTimeout||f.ondelay())},1e3)}function d(){clearInterval(k)}function e(){null!==g&&g===h&&Date.now()-g<a.retryTimeout&&l<a.maxRetryCount&&(l++,f.retry())}var f,g=null,h=null,i=null,j=!1,k=null,l=0;this.open=function(a){return i=null,f=a,!!angular.isDefined(WebSocket)&&(b(),!0)},this.isOpened=function(){return null!==i},this.close=function(){null!==i&&i.close(),i=null},this.send=function(a){null!==i&&i.send(a)},this.stopReceive=function(a){null!==i&&j&&i.send(a),d()}}])}(),function(a){"use strict";pinpointApp.constant("PreferenceServiceConfig",{cst:{periodType:{RANGE:"range",LAST:"last",REALTIME:"realtime"},inspectorPeriodTime:["5m","20m","1h","3h","6h","12h","1d","2d","7d"],periodTime:["5m","20m","1h","3h","6h","12h","1d","2d"],depthList:[1,2,3,4],maxPeriod:2,inspectorMaxPeriod:7,realtimeScatterPeriod:3e5,responseType:["1s","3s","5s","Slow","Error"],responseTypeColor:["#2ca02c","#3c81fa","#f8c731","#f69124","#f53034"],agentAllStr:"All",updateTimes:[{time:10,label:"10 seconds"},{time:20,label:"20 seconds"},{time:30,label:"30 seconds"},{time:60,label:"1 minute"}],iconPath:"/images/icons/"}}),pinpointApp.service("PreferenceService",["PreferenceServiceConfig","$route","webStorage","UserConfigurationService",function(b,c,d,e){function f(){return c.current.loadedTemplateUrl.indexOf("/inspector")!==-1}this.getDepthList=function(){return b.cst.depthList},this.getPeriodTime=function(){return f()?b.cst.inspectorPeriodTime:b.cst.periodTime},this.getPeriodType=function(){return b.cst.periodType},this.getMaxPeriod=function(){return f()?b.cst.inspectorMaxPeriod:b.cst.maxPeriod},this.getRealtimeScatterXRange=function(){return b.cst.realtimeScatterPeriod},this.getRealtimeScatterXRangeStr=function(){return b.cst.realtimeScatterPeriod/1e3/60+"m"},this.getResponseTypeColor=function(){return b.cst.responseTypeColor},this.getAgentAllStr=function(){return b.cst.agentAllStr},this.getUpdateTimes=function(){return b.cst.updateTimes},this.getResponseTypeFormat=function(){var c={};return a.each(b.cst.responseType,function(a,b){c[b]=0}),c},this.getCalleeByApp=function(a){return angular.isUndefined(a)?e.getCallee():d.get(a+"+callee")||e.getCallee()},this.getCallerByApp=function(a){return angular.isUndefined(a)?e.getCaller():d.get(a+"+caller")||e.getCaller()},this.setDepthByApp=function(a,b){angular.isUndefined(a)||null===a||angular.isUndefined(b)||null===b||d.add(a,b)},this.getIconPath=function(){return b.cst.iconPath}}])}(jQuery),function(){"use strict";pinpointApp.constant("CommonAjaxServiceConfig",{serverTimeUrl:"/serverTime.pinpoint",applicationListUrl:"/applications.pinpoint",realtimeSummaryNLoadDataUrl:"/getResponseTimeHistogramData.pinpoint"}),pinpointApp.service("CommonAjaxService",["CommonAjaxServiceConfig","$http",function(a,b){function c(a){var b=[];for(var c in a)b.push(c+"="+a[c]);return b.join("&")}this.getSQLBind=function(a,b,c){jQuery.ajax({type:"POST",url:a,data:b,cache:!1,dataType:"json",success:function(a){angular.isFunction(c)&&c(a)},error:function(a,b,d){angular.isFunction(c)&&c(d)}})},this.getServerTime=function(c){b.get(a.serverTimeUrl).success(function(a){c(a.currentServerTime)}).error(function(){c(Date.now())})};var d=null;this.getApplicationList=function(c,e){null===d?b.get(a.applicationListUrl).success(function(a){d=a,c(a)}).error(function(){e()}):c(d)},this.getResponseTimeHistogramData=function(d,e,f){b({url:a.realtimeSummaryNLoadDataUrl+"?"+c(d),method:"GET"}).then(function(a){e(a.data)},function(){f()})}}])}(),function(a){"use strict";pinpointApp.constant("AgentAjaxServiceConfig",{agentList:"/getAgentList.pinpoint",agentInfo:"/getAgentInfo.pinpoint",agentEvent:"/getAgentEvent.pinpoint",agentStatus:"/getAgentStatus.pinpoint",agentEventList:"/getAgentEvents.pinpoint",jvmChart:"/getAgentStat/jvmGc/chart.pinpoint",cpuLoadChart:"/getAgentStat/cpuLoad/chart.pinpoint",tpsChart:"/getAgentStat/transaction/chart.pinpoint",activeTraceChart:"/getAgentStat/activeTrace/chart.pinpoint",dataSourceChart:"/getAgentStat/dataSource/chartList.pinpoint",agentStateForChart:"/getAgentStat.pinpoint"}),pinpointApp.service("AgentAjaxService",["AgentAjaxServiceConfig","$http",function(a,b){function c(a,c,e){b.get(a+d(c)).then(function(a){e(a.data)},function(a){e(a)})}function d(a){var b="?";for(var c in a)b+=("?"==b?"":"&")+c+"="+a[c];return b}this.getAgentList=function(b,d){c(a.agentList,b,d)},this.getAgentStateForChart=function(b,d){c(a.agentStateForChart,b,d)},this.getJVMChartData=function(b,d){c(a.jvmChart,b,d)},this.getCpuLoadChartData=function(b,d){c(a.cpuLoadChart,b,d)},this.getTPSChartData=function(b,d){c(a.tpsChart,b,d)},this.getActiveTraceChartData=function(b,d){c(a.activeTraceChart,b,d)},this.getDataSourceChartData=function(b,d){c(a.dataSourceChart,b,d)},this.getAgentInfo=function(b,d){c(a.agentInfo,b,d)},this.getEventList=function(b,d){b.exclude="10199",c(a.agentEventList,b,d)},this.getEvent=function(b,d){c(a.agentEvent,b,d)}}])}(jQuery),function(a){"use strict";pinpointApp.constant("TooltipServiceConfig",{scatter:{position:"bottom",trigger:"click"},navbar:{position:"bottom",trigger:"click"},agentList:{position:"bottom",trigger:"click"},heap:{position:"top",trigger:"click"},permGen:{position:"top",trigger:"click"},cpuUsage:{position:"top",trigger:"click"},tps:{position:"top",trigger:"click"},activeThread:{position:"top",trigger:"click"},dataSource:{position:"top",trigger:"click"},responseSummaryChart:{position:"top",trigger:"click"},loadChart:{position:"top",trigger:"click"},serverList:{position:"bottom",trigger:"click"},callTree:{position:"bottom",trigger:"click"},realtime:{position:"top",trigger:"click"},alarmRules:{position:"top",trigger:"click"}}),pinpointApp.service("TooltipService",["TooltipServiceConfig","helpContentTemplate","helpContentService",function(b,c,d){function e(a){switch(a){case"scatter":return function(){return c(d.scatter["default"])};case"navbar":return function(){return c(d.navbar.applicationSelector)+c(d.navbar.depth)+c(d.navbar.periodSelector)};case"agentList":return function(){return c(d.inspector.list)};case"heap":return function(){return c(d.inspector.heap)};case"permGen":return function(){return c(d.inspector.permGen)};case"cpuUsage":return function(){return c(d.inspector.cpuUsage)};case"tps":return function(){return c(d.inspector.tps)};case"activeThread":return function(){return c(d.inspector.activeThread)};case"dataSource":return function(){return c(d.inspector.dataSource)};case"responseSummaryChart":return function(){return c(d.nodeInfoDetails.responseSummary)};case"loadChart":return function(){return c(d.nodeInfoDetails.load)};case"serverList":return function(){return c(d.nodeInfoDetails.nodeServers)};case"callTree":return function(){return c(d.callTree.column)};case"realtime":return function(){return c(d.realtime["default"])};case"alarmRules":return function(){return c(d.configuration.alarmRules)}}}this.init=function(c){a("."+c+"Tooltip").tooltipster({content:e(c),position:b[c].position,trigger:b[c].trigger})}}])}(jQuery),function(){"use strict";pinpointApp.service("CommonUtilService",[function(){var a="YYYY-MM-DD-HH-mm-ss";this.getRandomNum=function(){return Math.round(1e4*Math.random())},this.formatDate=function(b,c){return moment(new Date(b)).format(c||a)},this.getMilliSecond=function(b){return moment(b,a).valueOf()},this.isEmpty=function(a){return angular.isUndefined(a)||null===a||""===a},this.random=function(a,b){return Math.floor(Math.random()*(b-a+1))+a},this.addComma=function(a){return(a+"").replace(/(\d)(?=(?:\d{3})+(?!\d))/g,"$1,")}}])}(),function(){"use strict";pinpointApp.constant("LocalStorageManagerServiceConfig",{THREAD_DUMP_LAYER_OPEN_TYPE:"thread-dump-layer-open-type",REAL_TIME_LAYER_HEIGHT:"real-time-layer-height"}),pinpointApp.service("LocalStorageManagerService",["LocalStorageManagerServiceConfig","webStorage",function(a,b){this.getThreadDumpLayerOpenType=function(){return b.get(a.THREAD_DUMP_LAYER_OPEN_TYPE)},this.setRealtimeLayerHeight=function(c){b.add(a.REAL_TIME_LAYER_HEIGHT,c)},this.getRealtimeLayerHeight=function(){return b.get(a.REAL_TIME_LAYER_HEIGHT)}}])}(),function(a){"use strict";pinpointApp.constant("SystemConfigurationServiceConfig",{URL:"configuration.pinpoint"}),pinpointApp.service("SystemConfigurationService",["SystemConfigurationServiceConfig","$http",function(a,b){var c={};this.getConfig=function(){return b.get(a.URL).then(function(a){return c=a.data})},this.get=function(a){return c[a]}}])}(jQuery),function(a){"use strict";pinpointApp.constant("UserConfigurationServiceConfig",{URL:"userConfiguration.pinpoint",FAVORITE_LIST_LOCAL_KEY:"preference.favorite",MAX_FAVORITE:5e3,TIME_ZONE_LOCAL_KEY:"pinpoint-timezone",PERIOD_LOCAL_KEY:"period",PERIOD_DEFAULT:"5m",CALLER_LOCAL_KEY:"caller",CALLER_DEFAULT:1,CALLEE_LOCAL_KEY:"callee",CALLEE_DEFAULT:1}),pinpointApp.service("UserConfigurationService",["UserConfigurationServiceConfig","$http","webStorage",function(a,b,c){function d(a,b){var c={include:!1,index:-1};if(1===arguments.length){var d=a.split("@");c.name=d[0],c.type=d[1]}else c.name=a,c.type=b;for(var e=0;e<f.length;e++)if(f[e].applicationName===c.name&&f[e].serviceType===c.type){c.included=!0,c.index=e;break}return c}function e(b){c.add(a.FAVORITE_LIST_LOCAL_KEY,JSON.stringify(f)),b()}var f=[];this.addFavorite=function(b,c,g){var h=d(b);f.length>=a.MAX_FAVORITE||h.include||(f.push({applicationName:h.name,serviceType:h.type,code:c||0}),e(g))},this.removeFavorite=function(a,b,c){var g=d(a,b);g.include||(f.splice(g.index,1),e(c))},this.getFavoriteList=function(a){a(f)},this.getPeriod=function(){return c.get(a.PERIOD_LOCAL_KEY)||a.PERIOD_DEFAULT},this.setPeriod=function(b){c.add(a.PERIOD_LOCAL_KEY,b)},this.getCaller=function(){return c.get(a.CALLER_LOCAL_KEY)||a.CALLER_DEFAULT},this.setCaller=function(b){c.add(a.CALLER_LOCAL_KEY,b)},this.getCallee=function(){return c.get(a.CALLEE_LOCAL_KEY)||a.CALLEE_DEFAULT},this.setCallee=function(b){c.add(a.CALLEE_LOCAL_KEY,b)},this.getTimezone=function(){return c.get(a.TIME_ZONE_LOCAL_KEY)||moment.tz.guess()},this.setTimezone=function(b){c.add(a.TIME_ZONE_LOCAL_KEY,b)};try{var g=JSON.parse(c.get(a.FAVORITE_LIST_LOCAL_KEY)||"[]");if(g.length>0&&"string"==typeof g[0]){for(var h=0;h<g.length;h++){var i=g[h].split("@");f.push({applicationName:i[0],serviceType:i[1],code:0})}e(function(){})}else f=g}catch(j){f=[],console.log(j)}}])}(jQuery),function(a){"use strict";pinpointApp.constant("applicationListDirectiveConfig",{ID:"APPLICATION_LIST_DRTV_",AT:"@"}),pinpointApp.directive("applicationListDirective",["applicationListDirectiveConfig","$rootScope","$http","$timeout","AnalyticsService","PreferenceService","UserConfigurationService","CommonAjaxService","CommonUtilService",function(b,c,d,e,f,g,h,i,j){return{restrict:"EA",replace:!0,templateUrl:"features/applicationList/applicationList.html?v="+G_BUILD_TIME,scope:{initAppName:"@"},link:function(c,d,k){function l(){c.applicationList=[{text:"Loading...",value:""}],c.selectedApplication="",c.disableApplication=!0,c.hideFakeApplication=!1,t===!1&&s.find("optgroup[label=Favorite]").remove(),
m(),o()}function m(){v.select2({allowClear:!1,placeholder:"Select an application",searchInputPlaceholder:"Input your application name",templateResult:q,templateSelection:q,escapeMarkup:function(a){return a}}).on("select2:select",function(){n(v.val(),a(v.select2("data")[0].element).attr("data-code"))})}function n(a,d){f.sendMain(f.CONST.CLK_APPLICATION),c.selectedApplication=a,c.$emit("up.changed.application",b.ID,c.selectedApplication,d)}function o(){i.getApplicationList(function(a){angular.isArray(a)===!1||0===a.length?c.applicationList[0].text="Application not found.":(c.disableApplication=!1,r=a,p(),e(function(){k.initAppName?(v.val(k.initAppName).trigger("change"),c.selectedApplication=k.initAppName):u&&v.select2("open")})),c.hideFakeApplication=!0},function(){c.applicationList[0].text="Application error.",c.hideFakeApplication=!0})}function p(){c.applicationList=[{text:"",value:""}];var a=[];t?h.getFavoriteList(function(d){c.favoriteCount=d.length;var e=[];angular.forEach(r,function(c){for(var f=!1,g=0;g<d.length;g++)if(d[g].applicationName===c.applicationName&&d[g].serviceType===c.serviceType){f=!0;break}var h={text:c.applicationName+b.AT+c.serviceType,value:c.applicationName+b.AT+c.code,code:c.code};f?e.push(h):a.push(h)}),c.applicationList=e.concat(a)}):(c.favoriteCount=0,angular.forEach(r,function(c){a.push({text:c.applicationName+b.AT+c.serviceType,value:c.applicationName+b.AT+c.code,code:c.code})}),c.applicationList=a)}function q(c){if(!c.id)return c.text;var d=c.id.split(b.AT);return d.length>1?a("<img>").attr("src",w+d[1]+".png").css({height:"25px",paddingRight:"3px"}).get(0).outerHTML+"<span>"+d[0]+"</span>":c.text}b.ID+=j.getRandomNum();var r,s=a(d),t="true"===k.useFavorite,u="true"===k.notSetOpen,v=d.find(".application"),w=g.getIconPath();l(),c.$on("down.changed.favorite",function(){t&&e(function(){p(),v.off("select2:select").select2("destroy"),m(),v.val(c.selectedApplication).trigger("change")})})}}}])}(jQuery),function(a){"use strict";pinpointApp.constant("periodSelectorDirectiveConfig",{ID:"PERIOD_SELECTOR_DRTV_"}),pinpointApp.directive("periodSelectorDirective",["periodSelectorDirectiveConfig","$http","$timeout","$window","webStorage","helpContentService","UrlVoService","AnalyticsService","PreferenceService","CommonAjaxService","CommonUtilService",function(b,c,d,e,f,g,h,i,j,k,l){return{restrict:"EA",replace:!0,templateUrl:"features/periodSelector/periodSelector.html?v="+G_BUILD_TIME,link:function(c,e,f){function m(){c.periodType=h.getPeriodType(),c.readablePeriod=h.getReadablePeriod(),c.periodCalendar=h.getReadablePeriod(),n()}function n(){x.find(".guide").html(g.navbar.searchPeriod.guide.replace(/\{\{day\}\}/,j.getMaxPeriod())),x.find("button.ui-datepicker-close").on("click",function(){x.hide()}),w.datetimepicker({altField:"#from-picker-alt",altFieldTimeOnly:!1,dateFormat:"yy-mm-dd",timeFormat:"HH:mm z",controlType:"select",showButtonPanel:!1,timezone:moment().utcOffset(),showTimezone:!1,onSelect:function(){var a=moment(w.datetimepicker("getDate")),b=moment(v.datetimepicker("getDate"));if(b.isAfter(moment(w.datetimepicker("getDate")).add(j.getMaxPeriod(),"days"))||a.isAfter(b)){var c=o();q(v,a.add(c[0],c[1]).format())}},onClose:function(a){""!==v.val()?w.datetimepicker("getDate")>v.datetimepicker("getDate")&&v.datetimepicker("setDate",w.datetimepicker("getDate")):v.val(a)}}),q(w,h.getQueryStartTime()||moment().subtract(20,"minute").valueOf()),v.datetimepicker({altField:"#to-picker-alt",altFieldTimeOnly:!1,dateFormat:"yy-mm-dd",timeFormat:"HH:mm z",controlType:"select",showButtonPanel:!1,timezone:moment().utcOffset(),showTimezone:!1,onSelect:function(){var a=moment(w.datetimepicker("getDate")),b=moment(v.datetimepicker("getDate"));if(a.isBefore(moment(v.datetimepicker("getDate")).subtract(j.getMaxPeriod(),"days"))||a.isAfter(b)){var c=o();q(w,b.subtract(c[0],c[1]).format())}},onClose:function(a){""!==w.val()?w.datetimepicker("getDate")>v.datetimepicker("getDate")&&w.datetimepicker("setDate",v.datetimepicker("getDate")):w.val(a)}}),q(v,h.getQueryEndTime()),a("#from-picker-alt").on("click",function(){p()}),a("#to-picker-alt").on("click",function(){p()}),a(document).mousedown(function(b){x.is(":visible")!==!1&&0===a(b.target).parents("div#ui-datepicker-div").length&&x.hide()})}function o(){var a=[],b=c.periodCalendar.substring(c.periodCalendar.length-1);return a[0]=parseInt(c.periodCalendar),a[1]="d"==b?"days":"h"==b?"hours":"minutes",a}function p(){x.is(":visible")?x.hide():x.css("left",u.offset().left).show()}function q(a,b){a.datetimepicker("setDate",b?new Date(b):new Date)}function r(){h.setPeriodType(c.periodType),c.periodType===y.LAST?s(function(a){h.setReadablePeriod(c.readablePeriod),h.setQueryEndTime(a),h.autoCalculateByQueryEndDateTimeAndReadablePeriod(),t(),c.disableButton=!1}):c.periodType===y.REALTIME?s(function(a){h.setReadablePeriod(j.getRealtimeScatterXRangeStr()),h.setQueryEndTime(a),h.autoCalculateByQueryEndDateTimeAndReadablePeriod(),t()}):c.periodType===y.RANGE&&(h.setQueryStartTime(w.datetimepicker("getDate").getTime()),h.setQueryEndTime(v.datetimepicker("getDate").getTime()),h.autoCalcultateByQueryStartTimeAndQueryEndTime(),t())}function s(a){k.getServerTime(function(b){a(b)})}function t(){c.$emit("up.changed.period",b.ID)}b.ID+=l.getRandomNum();var u=a(e),v=u.find("#to-picker"),w=u.find("#from-picker"),x=u.find("#ui-datepicker-div"),y=j.getPeriodType();c.useRealtime="true"===f.useRealtime,c.useAutoUpdate="true"===f.useAutoUpdate,c.disableButton=!1,c.aReadablePeriodTime=j.getPeriodTime(),c.autoUpdate=!1,c.timeLeft=10,c.timeList=j.getUpdateTimes(),c.timeCountDown=10,m(),c.showUpdate=function(){return!!c.useAutoUpdate&&!!(c.periodType===y.LAST&&c.aReadablePeriodTime.indexOf(c.readablePeriod)>=0&&c.application)},c.changeUpdateSetting=function(){i.send(i.CONST.MAIN,c.autoUpdate?i.CONST.TG_UPDATE_OFF:i.CONST.TG_UPDATE_ON)},c.search=function(){c.periodType=y.RANGE,r()},c.changePeriodTimeOfLast=function(a){i.send(i.CONST.MAIN,i.CONST.CLK_TIME,a),c.periodType=y.LAST,c.disableButton=!0,c.readablePeriod=a,r()},c.getPeriodClassInCalendar=function(a){return c.periodCalendar===a?"btn-success":""},c.getPeriodClass=function(a){var b="";return c.periodType!==y.LAST?b:(c.readablePeriod===a&&(b+="btn-info"),c.disableButton&&(b+=" wait"),b)},c.setPeriodTimeOfCalendar=function(a){c.periodCalendar=a},c.update=function(){var a=c.autoUpdate;c.autoUpdate=!1,c.disableButton=!0,r(),d(function(){c.disableButton=!1,c.timeLeft=c.timeCountDown,c.autoUpdate=a,c.$$phase||c.$digest()},1e3)},c.changeToRealtime=function(){c.periodType!==y.REALTIME&&(i.send(i.CONST.MAIN,i.CONST.CLK_START_REALTIME),c.periodType=y.REALTIME,c.autoUpdate=!1,r())},c.changeToRange=function(){i.send(i.CONST.MAIN,i.CONST.TG_DATE,y.RANGE),c.periodType=y.RANGE},c.changeToLast=function(){i.send(i.CONST.MAIN,i.CONST.TG_DATE,y.LAST),c.periodType=y.LAST},c.getRealtimeBtnClass=function(){return h.isRealtime()?"btn-info":""},c.getPeriodLabel=function(a){return"5m"===a?"Last "+a:a},c.isRangePeriod=function(){return c.periodType===y.RANGE},c.isNotRangePeriod=function(){return c.periodType!==y.RANGE}}}}])}(jQuery),function(a){"use strict";pinpointApp.constant("navbarDirectiveConfig",{periodTypePrefix:".navbar.periodType",periodType:{RANGE:"range",LAST:"last",REALTIME:"realtime"}}),pinpointApp.directive("navbarDirective",["navbarDirectiveConfig","$route","$rootScope","$http","$document","$timeout","$window","webStorage","helpContentService","UrlVoService","AnalyticsService","PreferenceService","UserConfigurationService","TooltipService","CommonAjaxService","CommonUtilService",function(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){return{restrict:"EA",replace:!0,templateUrl:"features/navbar/navbar.html?v="+G_BUILD_TIME,link:function(c,e){function f(){a("#navbar_depth div").on("show.bs.dropdown",function(){}).on("hide.bs.dropdown",function(a){V===!0?a.preventDefault():W===!1&&c.$apply(function(){c.cancelDepth(!1)}),V=!1,W=!1}),a("#navbar_depth .dropdown-menu").on("click",function(){V=!0})}var r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V=!1,W=!1;c.bIsInspector=!1,c.periodDelay=!1,c.aReadablePeriodList=m.getPeriodTime(),c.autoUpdate=!1,c.timeLeft=10,c.timeCountDown=10,c.timeList=m.getUpdateTimes(),c.callee=w=m.getCalleeByApp(c.application),c.caller=x=m.getCallerByApp(c.application),c.rangeList=m.getDepthList(),c.applications=[{text:"Select an application.",value:""}],e.bind("selectstart",function(a){return!1}),o.init("navbar"),f(),y=function(a,b){u=a,c.bIsInspector=b===!0,c.periodType=K(),r=e.find(".application"),r.select2(),c.applications=[{text:"Loading...",value:""}],c.application=u.getApplication()||"",c.callee=w=m.getCalleeByApp(c.application),c.caller=x=m.getCallerByApp(c.application),c.disableApplication=!0,c.readablePeriod=u.getReadablePeriod()||n.getPeriod(),c.periodCalendar=u.getReadablePeriod()||n.getPeriod(),c.queryEndTime=u.getQueryEndTime()||"",A(),z(),E()},J=function(b){u=b,c.periodType=K(),r=e.find(".application"),c.application=u.getApplication()||"",c.applicationName=u.getApplicationName()||"",c.readablePeriod=u.getReadablePeriod()||n.getPeriod(),c.periodCalendar=u.getReadablePeriod()||n.getPeriod(),c.queryEndTime=u.getQueryEndTime()||"",a("#ui-datepicker-div").remove()},z=function(){v=a("#ui-datepicker-div"),v.find(".guide").html(j.navbar.searchPeriod.guide.replace(/\{\{day\}\}/,m.getMaxPeriod())),v.find("button.ui-datepicker-close").on("click",function(){v.hide()}),s=e.find("#from-picker"),s.datetimepicker({altField:"#from-picker-alt",altFieldTimeOnly:!1,dateFormat:"yy-mm-dd",timeFormat:"HH:mm z",controlType:"select",showButtonPanel:!1,timezone:moment().utcOffset(),showTimezone:!1,onSelect:function(){var a=moment(M(s)),b=moment(M(t));if(b.isAfter(moment(M(s)).add(m.getMaxPeriod(),"days"))||a.isAfter(b)){var c=T();B(t,a.add(c[0],c[1]).format())}},onClose:function(a,b){""!==t.val()?s.datetimepicker("getDate")>t.datetimepicker("getDate")&&t.datetimepicker("setDate",s.datetimepicker("getDate")):t.val(a)}}),B(s,u.getQueryStartTime()||moment().subtract(5,"minute").valueOf()),t=e.find("#to-picker"),t.datetimepicker({altField:"#to-picker-alt",altFieldTimeOnly:!1,dateFormat:"yy-mm-dd",timeFormat:"HH:mm z",controlType:"select",showButtonPanel:!1,timezone:moment().utcOffset(),showTimezone:!1,onSelect:function(){var a=moment(M(s)),b=moment(M(t));if(a.isBefore(moment(M(t)).subtract(m.getMaxPeriod(),"days"))||a.isAfter(b)){var c=T();B(s,b.subtract(c[0],c[1]).format())}},onClose:function(a,b){""!==s.val()?s.datetimepicker("getDate")>t.datetimepicker("getDate")&&s.datetimepicker("setDate",t.datetimepicker("getDate")):s.val(a)}}),B(t,u.getQueryEndTime()),a("#from-picker-alt").on("click",function(){S()}),a("#to-picker-alt").on("click",function(){S()}),a(document).mousedown(function(b){v.is(":visible")!==!1&&0===a(b.target).parents("div#ui-datepicker-div").length&&v.hide()})},T=function(){var a=[],b=c.periodCalendar.substring(c.periodCalendar.length-1);return a[0]=parseInt(c.periodCalendar),a[1]="d"==b?"days":"h"==b?"hours":"minutes",a},S=function(){v.is(":visible")?v.hide():(v.css("left",a("#navbar_period").offset().left),v.show())},M=function(a){return a.datetimepicker("getDate")},K=function(){if(u.isRealtime())return b.periodType.REALTIME;var a=b.periodType.LAST;return a=h.name&&i.get(h.name+b.periodTypePrefix)?i.get(h.name+b.periodTypePrefix):u.getApplication()?b.periodType.RANGE:b.periodType.LAST,u.getReadablePeriod()&&_.indexOf(c.aReadablePeriodList,u.getReadablePeriod())<0&&(a=b.periodType.RANGE),a},L=function(){h.name=h.name||"window."+_.random(1e5,999999),i.add(h.name+b.periodTypePrefix,c.periodType)},B=function(a,b){a.datetimepicker("setDate",b?new Date(b):new Date)},D=function(){c.application&&(u.setApplication(c.application),k.setApplication(c.application),c.callee=w=m.getCalleeByApp(c.application),c.caller=x=m.getCallerByApp(c.application),u.setCalleeRange(c.callee),u.setCallerRange(c.caller),k.setCallee(c.callee),k.setCaller(c.caller),c.periodType===b.periodType.LAST&&c.readablePeriod?(u.setPeriodType(b.periodType.LAST),k.setPeriodType(b.periodType.LAST),C(function(a){u.setReadablePeriod(c.readablePeriod),u.setQueryEndDateTime(q.formatDate(a)),u.autoCalculateByQueryEndDateTimeAndReadablePeriod(),k.setReadablePeriod(c.readablePeriod),k.setQueryEndDateTime(q.formatDate(a)),k.autoCalculateByQueryEndDateTimeAndReadablePeriod(),I(),B(s,u.getQueryStartTime()),B(t,u.getQueryEndTime())})):c.periodType===b.periodType.REALTIME?(u.setPeriodType(b.periodType.REALTIME),k.setPeriodType(b.periodType.REALTIME),C(function(a){u.setReadablePeriod(m.getRealtimeScatterXRangeStr()),u.setQueryEndDateTime(q.formatDate(a)),u.autoCalculateByQueryEndDateTimeAndReadablePeriod(),k.setQueryEndDateTime(q.formatDate(a)),k.autoCalculateByQueryEndDateTimeAndReadablePeriod(),I(),B(s,u.getQueryStartTime()),B(t,u.getQueryEndTime())})):F()&&G()&&(u.setPeriodType(b.periodType.RANGE),u.setQueryStartTime(F()),u.setQueryEndTime(G()),u.autoCalcultateByQueryStartTimeAndQueryEndTime(),k.setPeriodType(b.periodType.RANGE),k.setQueryStartTime(F()),k.setQueryEndTime(G()),k.autoCalcultateByQueryStartTimeAndQueryEndTime(),I()))},I=function(){L(),c.$emit("navbarDirective.changed",u)},C=function(a){p.getServerTime(function(b){a(b)})},E=function(){p.getApplicationList(function(a){angular.isArray(a)===!1||0===a.length?c.applications[0].text="Application not found.":(U=a,H(U,function(){c.disableApplication=!1,g(function(){u.getApplication()?(r.val(u.getApplication()).trigger("change"),c.application=u.getApplication()):r.select2("open")})})),c.hideFakeApplication=!0},function(){c.applications[0].text="Application error.",c.hideFakeApplication=!0})},F=function(){return s.datetimepicker("getDate").getTime()},G=function(){return t.datetimepicker("getDate").getTime()},H=function(a,b){n.getFavoriteList(function(d){c.applications=[{text:"",value:""}];var e=[],f=[];angular.forEach(a,function(a,b){for(var c=!1,g={text:a.applicationName+"@"+a.serviceType,value:a.applicationName+"@"+a.code},h=0;h<d.length;h++)if(d[h].applicationName===a.applicationName&&d[h].serviceType===a.serviceType){c=!0;break}c?e.push(g):f.push(g)}),c.favoriteCount=e.length,c.applications=e.concat(f),angular.isFunction(b)&&b.apply(c)})},A=function(){function a(a){if(!a.id)return a.text;var b=a.id.split("@");if(b.length>1){var c=document.createElement("img");return c.src="images/icons/"+b[1]+".png",c.style.height="25px",c.style.paddingRight="3px",c.outerHTML+"<span>"+b[0]+"</span>"}return a.text}r.select2({placeholder:"Select an application",searchInputPlaceholder:"Input your application name",allowClear:!1,templateResult:a,templateSelection:a,escapeMarkup:function(a){return a}}),r.on("select2:select",function(a){l.send(l.CONST.MAIN,l.CONST.CLK_APPLICATION),c.application=r.val(),c.$digest(),D()})},P=function(a){var b=parseInt(a);switch(a.substring(a.length-1)){case"m":b*=6e4;break;case"h":b*=36e5;break;case"d":b*=864e5}return b},Q=function(a){if(c.periodType===b.periodType.LAST){var d=moment(u.getQueryEndTime()+a).format("YYYY-MM-DD-HH-mm-ss");u.setQueryEndDateTime(d),u.autoCalculateByQueryEndDateTimeAndReadablePeriod(),k.setQueryEndDateTime(d),k.autoCalculateByQueryEndDateTimeAndReadablePeriod(),I(),B(s,u.getQueryStartTime()),B(t,u.getQueryEndTime())}else{B(s,u.getQueryStartTime()+a),B(t,u.getQueryEndTime()+a);var e=F(),f=G();u.setQueryStartTime(e),u.setQueryEndTime(f),u.autoCalcultateByQueryStartTimeAndQueryEndTime(),k.setQueryStartTime(e),k.setQueryEndTime(f),k.autoCalcultateByQueryStartTimeAndQueryEndTime(),I()}},R=function(a){l.send(l.CONST.MAIN,l.CONST.CLK_TIME,a),c.periodDelay=!0,c.readablePeriod=a,c.autoUpdate=!1,D(),g(function(){c.periodDelay=!1,c.$$phase||c.$digest()},1e3)},c.search=function(){D()},c.setPeriod=function(a){c.periodType=b.periodType.LAST,R(a)},c.getPreviousClass=function(){return""},c.getNextClass=function(){return""},c.getPeriodClassInCalendar=function(a){return c.periodCalendar===a?"btn-success":""},c.getPeriodClass=function(a){var d="";return c.periodType!==b.periodType.LAST?d:(c.readablePeriod===a&&(d+="btn-info"),c.periodDelay&&(d+=" wait"),d)},c.showUpdate=function(){return!c.bIsInspector&&!!(c.periodType===b.periodType.LAST&&_.indexOf(["5m","20m","1h","3h"],c.readablePeriod)>=0&&c.application)},c.changeUpdateSetting=function(){l.send(l.CONST.MAIN,c.autoUpdate?l.CONST.TG_UPDATE_OFF:l.CONST.TG_UPDATE_ON)},N=function(){c.autoUpdate&&(c.timeLeft-=1,0===c.timeLeft?(c.update(),c.timeLeft=c.timeCountDown):g(N,1e3))},O=function(){c.timeLeft=c.timeCountDown},c.setPeriodForCalendar=function(a){c.periodCalendar=a},c.setAutoUpdateTime=function(a){l.send(l.CONST.MAIN,l.CONST.CLK_UPDATE_TIME,a+"s"),c.timeCountDown=a,c.timeLeft=a},c.setCallee=function(a){c.callee=a},c.setCaller=function(a){c.caller=a},c.setDepth=function(){V=!1,W=!0,a("#navbar_depth .dropdown-menu").trigger("click.bs.dropdown"),w===c.callee&&x===c.caller||(l.send(l.CONST.MAIN,l.CONST.CLK_CALLEE_RANGE,c.callee),l.send(l.CONST.MAIN,l.CONST.CLK_CALLER_RANGE,c.caller),w=c.callee,x=c.caller,m.setDepthByApp(c.application+"+callee",c.callee),m.setDepthByApp(c.application+"+caller",c.caller),window.location.reload(!0))},c.cancelDepth=function(b){c.callee=w,c.caller=x,b&&(V=!1,W=!0,a("#navbar_depth .dropdown-menu").trigger("click.bs.dropdown"))},c.update=function(){var a=c.autoUpdate;c.autoUpdate=!1,c.periodDelay=!0,D(),g(function(){c.periodDelay=!1,O(),c.autoUpdate=a,c.$$phase||c.$digest()},1e3)},c.togglePeriod=function(a){l.send(l.CONST.MAIN,l.CONST.TG_DATE,a),c.periodType=a,c.autoUpdate=!1},c.setRealtime=function(){c.periodType!==b.periodType.REALTIME&&(l.send(l.CONST.MAIN,l.CONST.CLK_START_REALTIME),c.periodType=b.periodType.REALTIME,c.autoUpdate=!1,D())},c.isRealtime=function(){return"undefined"!=typeof u&&null!==u&&u.isRealtime()},c.showConfig=function(){d.$broadcast("configuration.open")},c.$watch("autoUpdate",function(a,b){a?g(N,1e3):O()}),c.$on("navbarDirective.initialize",function(a,b,c){y(b,c)}),c.$on("navbarDirective.initialize.andReload",function(a,d){y(d),c.periodType=b.periodType.LAST,R(n.getPeriod())}),c.$on("navbarDirective.initialize.realtime.andReload",function(a,d){y(d),c.periodType=b.periodType.REALTIME,R(n.getPeriod())}),c.$on("navbarDirective.initializeWithStaticApplication",function(a,b){J(b)}),c.$on("navbarDirective.moveToPast",function(a){Q(c.periodType===b.periodType.LAST?-P(c.readablePeriod):-(u.getQueryEndTime()-u.getQueryStartTime()))}),c.$on("navbarDirective.moveToFuture",function(a){Q(c.periodType===b.periodType.LAST?P(c.readablePeriod):u.getQueryEndTime()-u.getQueryStartTime())}),c.$on("navbarDirective.changedFavorite",function(a){H(U,function(){c.disableApplication=!1,g(function(){u.getApplication()&&(r.val(u.getApplication()).trigger("change"),c.application=u.getApplication())})}),r.off("select2.select").select2("destroy"),A(),r.val(u.getApplication()).trigger("change")})}}}])}(jQuery),function(a){"use strict";pinpointApp.constant("navbar2DirectiveConfig",{ID:"NAVBAR2_DRTV_"}),pinpointApp.directive("navbar2Directive",["navbar2DirectiveConfig","$rootScope","UrlVoService","TooltipService","CommonUtilService",function(a,b,c,d,e){return{restrict:"EA",replace:!0,templateUrl:"features/navbar2/navbar2.html?v="+G_BUILD_TIME,link:function(f,g){a.ID+=e.getRandomNum(),f.paramInitApplication=c.getApplication(),f.$broadcast("down.initialize",a.ID),g.bind("selectstart",function(a){return!1}),d.init("navbar"),f.showConfig=function(){b.$broadcast("configuration.open")}}}}])}(jQuery),function(){"use strict";pinpointApp.constant("serverMapDirectiveConfig",{options:{sContainerId:"servermap",sOverviewId:"servermapOverview",sBigFont:"11pt Lato,NanumGothic,ng,dotum,AppleGothic,sans-serif",sSmallFont:"11pt Lato,NanumGothic,ng,dotum,AppleGothic,sans-serif",sImageDir:"/images/servermap/",htLinkType:{sRouting:"Normal",sCurve:"JumpGap"},htLinkTheme:{"default":{backgroundColor:"#ffffff",borderColor:"#c5c5c5",fontFamily:"11pt Lato,NanumGothic,ng,dotum,AppleGothic,sans-serif",fontColor:"#000000",fontAlign:"center",margin:1,strokeWidth:1},bad:{backgroundColor:"#ffc9c9",borderColor:"#7d7d7d",fontFamily:"11pt Lato,NanumGothic,ng,dotum,AppleGothic,sans-serif",fontColor:"#FF1300",fontAlign:"center",margin:1,strokeWidth:1}}}}),pinpointApp.directive("serverMapDirective",["serverMapDirectiveConfig","$rootScope","ServerMapDaoService","AlertsService","ProgressBarService","SidebarTitleVoService","$filter","ServerMapFilterVoService","filteredMapUtilService","$base64","ServerMapHintVoService","$timeout","$location","$window","helpContentTemplate","helpContentService","AnalyticsService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){return{restrict:"EA",replace:!0,templateUrl:"features/serverMap/serverMap.html?v="+G_BUILD_TIME,link:function(r,s,t){var u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X;z=new d(s),A=new e(s),E=!1,y=null,B={applicationMapData:{linkDataArray:[],nodeDataArray:[]},lastFetchedTimestamp:[],timeSeriesResponses:{values:{},time:[]}},w={},C={},D={},r.oNavbarVoService=null,r.totalRequestCount=!0,r.bShowServerMapStatus=!1,r.linkRouting=a.options.htLinkType.sRouting,r.linkCurve=a.options.htLinkType.sCurve,r.searchNodeQuery="",r.searchNodeIndex=0,r.searchNodeList=[],J=s.find(".serverMapTime"),F=s.find(".fromAgentName"),G=s.find(".toAgentName"),F.select2(),G.select2(),K=s.find("#urlPattern"),H=!1,r.mergeTypeList=[],r.mergeStatus={},r.showAntStyleHint=!1,X=function(a){a.nodeDataArray.forEach(function(a){a.isWas!==!1||!angular.isUndefined(a.isQueue)&&a.isQueue!==!1||"USER"===a.serviceType||angular.isUndefined(r.mergeStatus[a.serviceType])&&(r.mergeTypeList.push(a.serviceType),r.mergeStatus[a.serviceType]=!0)})},N=function(){r.nodeContextMenuStyle="",r.linkContextMenuStyle="",r.backgroundContextMenuStyle="",K.val(""),r.responseTime={from:0,to:3e4},r.includeFailed=null,$("#filterWizard").modal("hide"),"$apply"!=r.$$phase&&"$digest"!=r.$$phase&&"$apply"!=r.$root.$$phase&&"$digest"!=r.$root.$$phase&&r.$digest()},L=function(a,b,d,e,f,g,h,j){A.startLoading(),z.hideError(),z.hideWarning(),z.hideInfo(),y&&y.clear(),A.setLoading(10),w={applicationName:a,serviceTypeName:b,from:d-e,to:d,originTo:r.oNavbarVoService.getQueryEndTime(),callerRange:r.oNavbarVoService.getCallerRange(),calleeRange:r.oNavbarVoService.getCalleeRange(),period:e,filter:n.encodeURIComponent(f),hint:!!g&&n.encodeURIComponent(g)},f?c.getFilteredServerMapData(w,function(a,b,d){if(a)return A.stopLoading(),z.showError("There is some error."),!1;A.setLoading(50),b.from===d.lastFetchedTimestamp?r.$emit("serverMapDirective.allFetched",d):(B.lastFetchedTimestamp=d.lastFetchedTimestamp-1,r.$emit("serverMapDirective.fetched",B.lastFetchedTimestamp,d));var e=JSON.parse(f);B.applicationMapData=c.mergeFilteredMapData(B.applicationMapData,d.applicationMapData);var g=c.extractDataFromApplicationMapData(B.applicationMapData);if(g=c.addFilterProperty(e,g),X(g),i.doFiltersHaveUnknownNode(e))for(var k in r.mergeStatus)r.mergeStatus[k]=!1;O(B),R(b,g,h,j)}):c.getServerMapData(w,function(a,b,d){if(a||d.exception)return A.stopLoading(),a?z.showError("There is some error."):z.showError(d.exception),r.$emit("serverMapDirective.hasNoData"),!1;A.setLoading(50),O(d),B=d;var e=c.extractDataFromApplicationMapData(d.applicationMapData);X(e),R(b,e,h,j)})},O=function(a){0===a.applicationMapData.nodeDataArray.length?r.$emit("serverMapDirective.hasNoData"):r.$emit("serverMapDirective.hasData")},M=function(a,b,c,d){r.inspectApplicationName=c,r.inspectCategory=d,r.nodeContextMenuStyle={display:"block",top:a,left:b,"z-index":9999999},r.$digest()},P=function(a,b){r.linkContextMenuStyle={display:"block",top:a,left:b,"z-index":9999999},r.$digest()},Q=function(a,b){r.backgroundContextMenuStyle={display:"block",top:a,left:b,"z-index":9999999},r.$digest()},W=function(){var a=[];for(var b in r.mergeStatus)r.mergeStatus[b]===!0&&a.push(b);return a},R=function(d,e,f,h){var i=W();if(I=c.mergeMultiLinkGroup(c.mergeGroup(e,i),i),A.setLoading(80),0!==I.nodeDataArray.length){I.linkDataArray=S(I.linkDataArray,f,h),A.setLoading(90);var k=a.options;k.fOnNodeSubGroupClicked=function(a,b,d,e){var f=c.getLinkNodeDataByNodeKey(B.applicationMapData,d,e);f.fromNode=c.getNodeDataByKey(B.applicationMapData,f.from),f.toNode=c.getNodeDataByKey(B.applicationMapData,f.to),k.fOnLinkClicked(a,f)},k.fOnNodeClicked=function(a,d,e,f){var g;angular.isDefined(d.unknownNodeGroup)&&!e?d.unknownNodeGroup=c.getUnknownNodeDataByUnknownNodeGroup(B.applicationMapData,d.unknownNodeGroup):g=c.getNodeDataByKey(B.applicationMapData,e||d.key),g&&(d=g),E="node",D=d,r.$emit("serverMapDirective.nodeClicked",a,w,d,I,f),r.oNavbarVoService&&r.oNavbarVoService.isRealtime()&&b.$broadcast("realtimeChartController.initialize",d.isWas,d.applicationName,d.serviceType,r.oNavbarVoService.getApplication()+"/"+r.oNavbarVoService.getReadablePeriod()+"/"+r.oNavbarVoService.getQueryEndDateTime()+"/"+r.oNavbarVoService.getCallerRange()),N()},k.fOnNodeDoubleClicked=function(a,b,c){a.diagram.zoomToRect(b.actualBounds,1.2)},k.fOnNodeContextClicked=function(a,b){if(!r.oNavbarVoService.isRealtime()){N();var d=c.getNodeDataByKey(B.applicationMapData,b.key);d&&(b=d),D=b,u&&b.isWas===!0&&M(a.event.layerY,a.event.layerX,b.applicationName,b.category)}},k.fOnLinkClicked=function(a,b){if(!r.oNavbarVoService.isRealtime()){var d;angular.isDefined(b.unknownLinkGroup)?b.unknownLinkGroup=c.getUnknownLinkDataByUnknownLinkGroup(B.applicationMapData,b.unknownLinkGroup):d=c.getLinkDataByKey(B.applicationMapData,b.key),d&&(d.fromNode=b.fromNode,d.toNode=b.toNode,b=d),E="link",C=b,N(),r.$emit("serverMapDirective.linkClicked",a,w,b,I)}},k.fOnLinkContextClicked=function(a,b){var f=c.getLinkDataByKey(B.applicationMapData,b.key);f&&(f.fromNode=b.fromNode,f.toNode=b.toNode,b=f),N(),C=b,v&&!angular.isArray(b.targetInfo)&&(P(a.event.layerY,a.event.layerX),r.$emit("serverMapDirective.linkContextClicked",a,d,b,e))},k.fOnBackgroundClicked=function(a){r.$emit("serverMapDirective.backgroundClicked",a,d),N()},k.fOnBackgroundDoubleClicked=function(a){T()},k.fOnBackgroundContextClicked=function(a){r.$emit("serverMapDirective.backgroundContextClicked",a,d),N(),x&&Q(a.diagram.lastInput.event.layerY,a.diagram.lastInput.event.layerX)};var l;try{l=_.find(I.nodeDataArray,function(a){return!(a.applicationName!==d.applicationName||!angular.isUndefined(d.serviceType))||a.applicationName===d.applicationName&&a.serviceTypeCode===d.serviceTypeCode}),l&&(k.sBoldKey=l.key)}catch(n){z.showError("There is some error while selecting a node."),console.log(n)}A.setLoading(100),null===y?y=new ServerMap(k,m,q):y.option(k),y.load(I),A.stopLoading(),r.oNavbarVoService&&r.oNavbarVoService.isRealtime()&&(E="node",D=null),U(l)}else if(A.stopLoading(),r.oNavbarVoService.getFilter()){var o=r.oNavbarVoService.getFilterAsJson(),p=[];p.push("<p>There is no data with the filter below.</p>"),angular.forEach(o,function(a,b){p.push("<p><b>Filter"),o.length>1&&p.push(" #"+(b+1)),p.push(" : "+a.fa+"("+a.fst+") ~ "+a.ta+"("+a.tst+")</b><br>"),p.push("<ul>"),a.url&&p.push("<li>Url Pattern : "+j.decode(a.url)+"</li>"),a.rf&&a.rt&&p.push("<li>Response Time : "+g("number")(a.rf)+" ms ~ "+g("number")(a.rt)+" ms</li>"),p.push("<li>Transaction Result : "+(a.ie?"Failed Only":"Success + Failed")+"</li>"),p.push("</ul></p>")}),z.showInfo(p.join(""))}else z.showInfo("There is no data.")},S=function(a,b,c){var d=a;for(var e in d)d[e].from===d[e].to?d[e].routing="AvoidsNodes":d[e].routing=b,d[e].curve=c;return d},V=function(){N();var a=new f;"USER"===C.fromNode.serviceType?a.setImageType("USER").setTitle("USER"):a.setImageType(C.fromNode.serviceType).setTitle(C.fromNode.applicationName),a.setImageType2(C.toNode.serviceType).setTitle2(C.toNode.applicationName),r.fromAgent=C.fromAgent||[],r.toAgent=C.toAgent||[],r.sourceInfo=C.sourceInfo,r.targetInfo=C.targetInfo,r.fromApplicationName=C.fromNode.applicationName,r.toApplicationName=C.toNode.applicationName,r.$broadcast("sidebarTitleDirective.initialize.forServerMap",a,C),$("#filterWizard").modal("show"),H||(H=!0,$("#filterWizard").on("shown.bs.modal",function(){if(F.select2().val("").trigger("change"),G.select2().val("").trigger("change"),$("slider",this).addClass("auto"),setTimeout(function(){$("#filterWizard slider").removeClass("auto")},500),r.oNavbarVoService.getFilter()){var a=i.findFilterInNavbarVo(C.fromNode.applicationName,C.fromNode.serviceType,C.toNode.applicationName,C.toNode.serviceType,r.oNavbarVoService);if(a){K.val(a.oServerMapFilterVoService.getRequestUrlPattern()),r.responseTime.from=a.oServerMapFilterVoService.getResponseFrom();var b=a.oServerMapFilterVoService.getResponseTo();r.responseTime.to="max"===b?3e4:b,r.includeFailed=a.oServerMapFilterVoService.getIncludeException(),F.select2().val(a.oServerMapFilterVoService.getFromAgentName()).trigger("change"),G.select2().val(a.oServerMapFilterVoService.getToAgentName()).trigger("change")}else r.responseTime={from:0,to:3e4}}else r.responseTime={from:0,to:3e4};r.$$phase||r.$digest()}))},r.passingTransactionResponseToScatterChart=function(){r.$emit("serverMapDirective.passingTransactionResponseToScatterChart",D),N()},r.passingTransactionList=function(){q.send(q.CONST.CONTEXT,q.CONST.CLK_FILTER_TRANSACTION);var a=new h;a.setMainApplication(C.filterApplicationName).setMainServiceTypeName(C.filterApplicationServiceTypeName).setMainServiceTypeCode(C.filterApplicationServiceTypeCode).setFromApplication(C.fromNode.applicationName).setFromServiceType(C.fromNode.serviceType).setToApplication(C.toNode.applicationName).setToServiceType(C.toNode.serviceType);var b=new k;C.sourceInfo.isWas&&C.targetInfo.isWas&&b.setHint(C.toNode.applicationName,C.filterTargetRpcList),r.$broadcast("serverMapDirective.openFilteredMap",a,b),N()},r.openFilterWizard=function(){q.send(q.CONST.CONTEXT,q.CONST.CLK_FILTER_TRANSACTION_WIZARD),V()},T=function(){y&&y.zoomToFit()},U=function(a){l(function(){"node"===E&&D?y.highlightNodeByKey(D.key):"link"===E&&C?y.highlightLinkByFromTo(C.from,C.to):a&&y.highlightNodeByKey(a.key)})},r.responseTimeFormatting=function(a){return 3e4==a?"30,000+ ms":g("number")(a)+" ms"},r.passingTransactionMap=function(){var a=new h;a.setMainApplication(C.filterApplicationName).setMainServiceTypeCode(C.filterApplicationServiceTypeCode).setMainServiceTypeName(C.filterApplicationServiceTypeName).setFromApplication(C.fromNode.applicationName).setFromServiceType(C.fromNode.serviceType).setToApplication(C.toNode.applicationName).setToServiceType(C.toNode.serviceType).setResponseFrom(r.responseTime.from).setResponseTo(r.responseTime.to).setIncludeException(r.includeFailed).setRequestUrlPattern(j.encode(K.val())),r.fromAgentName&&a.setFromAgentName(r.fromAgentName),r.toAgentName&&a.setToAgentName(r.toAgentName);var b=new k;C.sourceInfo.isWas&&C.targetInfo.isWas&&b.setHint(C.toNode.applicationName,C.filterTargetRpcList),r.$broadcast("serverMapDirective.openFilteredMap",a,b),N()},r.toggleMergeGroup=function(a){q.send(q.CONST.CONTEXT,q.CONST.TG_MERGE_TYPE,a),r.mergeStatus[a]=!r.mergeStatus[a],R(w,c.extractDataFromApplicationMapData(B.applicationMapData),r.linkRouting,r.linkCurve),N()},r.toggleLinkLableTextType=function(a){"tps"===a?(q.send(q.CONST.CONTEXT,q.CONST.TG_TPS),r.totalRequestCount=!1,r.tps=!0):(q.send(q.CONST.CONTEXT,q.CONST.TG_CALL_COUNT),r.totalRequestCount=!0,r.tps=!1),r.totalRequestCount="tps"!==a,r.tps="tps"===a,R(w,I,r.linkRouting,r.linkCurve),N()},r.toggleLinkRouting=function(b){q.send(q.CONST.CONTEXT,q.CONST.TG_ROUTING,b),r.linkRouting=a.options.htLinkType.sRouting=b,R(w,I,r.linkRouting,r.linkCurve),N()},r.toggleLinkCurve=function(b){q.send(q.CONST.CONTEXT,q.CONST.TG_CURVE,b),r.linkCurve=a.options.htLinkType.sCurve=b,R(w,I,r.linkRouting,r.linkCurve),N()},r.refresh=function(){q.send(q.CONST.CONTEXT,q.CONST.CLK_REFRESH),y&&y.refresh(),N()},r.$on("serverMapDirective.initialize",function(a,b){r.oNavbarVoService&&w.applicationName!==b.getApplicationName()&&(E=!1),r.oNavbarVoService=b,r.oNavbarVoService.getQueryEndTime()===!1||r.oNavbarVoService.getQueryStartTime()===!1?r.bShowServerMapStatus=!1:r.bShowServerMapStatus=!0,v=x=!0,u=!1,c.abort(),
L(b.getApplicationName(),b.getServiceTypeName(),b.getQueryEndTime(),b.getQueryPeriod(),b.getFilter(),b.getHint(),r.linkRouting,r.linkCurve)}),r.$on("serverMapDirective.fetch",function(a,b,c){L(r.oNavbarVoService.getApplicationName(),r.oNavbarVoService.getServiceTypeName(),c,b,r.oNavbarVoService.getFilter(),r.oNavbarVoService.getHint(),r.linkRouting,r.linkCurve)}),r.$on("serverMapDirective.initializeWithMapData",function(a,b,d,e){N(),r.bShowServerMapStatus=!1,x=!0,u=b,v=!1,w={applicationName:d.applicationId},B=d,r.oNavbarVoService=e,R(w,c.extractDataFromApplicationMapData(B.applicationMapData),r.linkRouting,r.linkCurve)}),r.$on("serverMapDirective.zoomToFit",function(a){T()}),r.$on("serverMapDirective.openFilterWizard",function(a,b){C=b,V()}),r.searchNodeByEnter=function(a){13==a.keyCode&&r.searchNode()},r.searchNodeWithCategory=function(a){y&&(r.searchNodeIndex=a,y.searchNode(r.searchNodeList[a].applicationName,r.searchNodeList[a].serviceType))},r.searchNode=function(){y&&""!==r.searchNodeQuery&&(q.send(q.CONST.MAIN,q.CONST.CLK_SEARCH_NODE),r.searchNodeIndex=0,r.searchNodeList=y.searchNode(r.searchNodeQuery),jQuery(s).find(".search-result").show().find(".count").html("Result : "+r.searchNodeList.length))},r.clearSearchNode=function(){q.send(q.CONST.MAIN,q.CONST.CLK_CLEAR_SEARCH),y.clearQuery(),r.searchNodeIndex=0,r.searchNodeQuery="",r.searchNodeList=[],jQuery(s).find(".search-result").hide()},r.toggleShowAntStyleHint=function(){r.showAntStyleHint=!r.showAntStyleHint},r.moveToPast=function(){r.$emit("navbarDirective.moveToPast"),J.effect("highlight",{color:"#FFFF00"},1e3)},r.moveToFuture=function(){r.$emit("navbarDirective.moveToFuture"),J.effect("highlight",{color:"#FFFF00"},1e3)},r.toggleToolbar=function(){var a=jQuery(s).find(".servermap-toolbar"),b=jQuery(s).find(".servermap-toolbar-handle span");parseInt(a.css("top"))==-1?(a.find(".search-result").hide(),a.animate({top:-55},"fast",function(){b.addClass("glyphicon-chevron-down").removeClass("glyphicon-chevron-up")})):a.animate({top:-1},"fast",function(){r.searchNodeList.length>0&&a.find(".search-result").show(),b.addClass("glyphicon-chevron-up").removeClass("glyphicon-chevron-down")})},jQuery(".serverMapTooltip").tooltipster({content:function(){return o(p.servermap["default"])},position:"bottom-right",trigger:"click"})}}}])}(),function(){"use strict";pinpointApp.constant("realtimeChartDirectiveConfig",{params:{TIMEOUT_MAX_COUNT:"timeoutMaxCount",SHOW_EXTRA_INFO:"showExtraInfo",REQUEST_LABEL:"requestLabel",REQUEST_COLOR:"requestColor",CHART_COLOR:"chartColor",NAMESPACE:"namespace",XCOUNT:"xcount",HEIGHT:"height",WIDTH:"width"},responseCode:{ERROR_BLACK:111,TIMEOUT:211},consts:{maxDealyCount:5,verticalGridCount:5},message:{NO_ACTIVE_THREAD:"No Active Thread",NO_RESPONSE:"No Response"}}),pinpointApp.directive("realtimeChartDirective",["realtimeChartDirectiveConfig","CommonUtilService",function(a,b){return{restrict:"EA",replace:!0,template:'<svg width="" height=""></svg>',link:function(c,d,e){function f(){M=d3.select(d.get(0)).attr("width",z.width).attr("height",z.height).append("g").attr("class","base").attr("transform","translate("+(z.showExtraInfo?A.margin.left:0)+","+A.margin.top+")"),M.append("defs").append("clipPath").attr("id","clip-"+z.namespace).append("rect").attr("x",1).attr("y",0).attr("width",B).attr("height",C)}function g(){H.length=0;for(var a=Date.now(),b=0;b<z.requestLabel.length;b++)H.push(d3.range(z.xAxisCount).map(function(){return{y:0,d:a}}))}function h(){N=d3.scale.linear().domain(A.domain).range([0,B]),z.showExtraInfo?M.append("g").attr("class","y axis"):(Q=M.append("g").attr("class","v-grid"),j()),P=M.append("g").attr("class","h-grid"),i()}function i(){O=d3.scale.linear().domain([0,D]).range([C,0]),z.showExtraInfo&&M.selectAll("g.y.axis").call(d3.svg.axis().scale(O).ticks(3).orient("left").tickFormat(A.yAxisFormat)),k()}function j(){for(var b=[],c=0;c<a.consts.verticalGridCount;c++)b.push(K*c);R=Q.selectAll("line").data(b).enter().append("line").attr("class","grid").attr({x1:function(a){return a},x2:function(a){return a},y1:-10,y2:C})[0]}function k(){var a=[],b=M.select("g.y.axis").selectAll("g.tick");if(0!==b.length){jQuery.each(b[0],function(b,c){a.push(parseFloat(c.getAttribute("transform").replace(/translate\(0,(-?[0-9.]*)\)/,"$1")))});var c=P.selectAll("line").data(a);c.enter().append("line").attr("class","grid").transition().attr("x1",0).attr("x2",B).attr("y1",function(a,b){return a}).attr("y2",function(a,b){return a}),c.transition().attr("x1",0).attr("x2",B).attr("y1",function(a){return a}).attr("y2",function(a){return a}),c.exit().remove()}}function l(){T=d3.svg.area().interpolate(A.interpolation).x(function(a,b){return N(b)}).y0(function(a,b){return O(a.y0)}).y1(function(a,b){return O(a.y+a.y0)})}function m(){S=M.append("g").attr("class","pathArea").attr("clip-path","url(#clip-"+z.namespace+")").selectAll("path").data(H).enter().append("path").attr("d",T).attr("class","area ").attr("fill",function(a,b){return z.requestColor[b]})}function n(){W=M.append("g").attr("class","chart-tooltip").attr("transform","translate(-1000, 0)"),W.append("line").attr("x1",A.tooltipWidth).attr("y1",10).attr("x2",A.tooltipWidth).attr("y2",C).attr("class","guideLine"),X=W.append("g").attr("transform","translate(0, 10)"),X.append("rect").attr("width",40).attr("height",90).attr("fill","#000").attr("fill-opacity","0.7"),X.selectAll("text").data(z.requestLabel).enter().append("text").attr("x",function(a,b){return 30}).attr("y",function(a,b){return 20*(z.requestColor.length-b-1)+20+"px"}).attr("fill",function(a,b){return z.requestColor[b]}).attr("text-anchor","end").text(function(a,b){return z.requestLabel[b]}),Y=M.append("text").attr("class","date").attr("x","29%").attr("y","6px").text("")}function o(){z.showExtraInfo!==!1&&M.on("mouseout",function(){W.attr("transform","translate(-1000, 0)"),Y.text(""),F=-1,E=-1}).on("mousemove",function(a){E=parseInt(N.invert(d3.mouse(this)[0])),F=parseInt(d3.mouse(this)[0]),F=F>B?-1e3:F,W.attr("transform","translate("+(F-A.tooltipWidth)+",0)"),q(p(E))})}function p(a){var b=[];if(a===-1)return b;for(var c=0;c<H.length;c++)b.push({y:H[c][a]?H[c][a].y:0,d:H[c][a]?H[c][a].d:Date.now()});return b}function q(a){z.showExtraInfo!==!1&&F!==-1&&E!==-1&&(X.selectAll("text").text(function(b,c){return a[c].y}),Y.text(b.formatDate(a[0].d)))}function r(){z.showExtraInfo!==!1&&(M.append("g").attr("transform",function(a,b){return"translate("+(z.width-A.margin.left-A.margin.right+4+32)+",10)"}).attr("class","request-label").append("text").attr("text-anchor","end").attr("fill","#000").style("font-size","14px").style("font-weight","bold").attr("y","0%").text("Total"),M.append("g").attr("transform",function(a,b){return"translate("+(z.width-A.margin.left-A.margin.right+4+32)+",10)"}).attr("class","request-label").selectAll("text").data(z.requestLabel).enter().append("text").attr("text-anchor","end").attr("fill","#9B9B9B").attr("y",function(a,b){return 20*(4-b)+"%"}).text(function(a,b){return z.requestLabel[b]}),V=M.append("g").attr("transform",function(a,b){return"translate("+(z.width-A.margin.left-A.margin.right+4+70)+",10)"}).attr("class","request-count").append("text").attr("text-anchor","end").attr("fill","#000").attr("y","0%").text("0"),U=M.append("g").attr("transform",function(a,b){return"translate("+(z.width-A.margin.left-A.margin.right+4+70)+",10)"}).attr("class","request-count").selectAll("text").data(z.requestLabel).enter().append("text").attr("text-anchor","end").attr("y",function(a,b){return 20*(4-b)+"%"}).attr("fill",function(a,b){return z.requestColor[b]}).text("0"))}function s(){Z=M.append("text").attr("class","error").attr("y","40%").attr("x","50%"),$=Z.append("tspan").attr("x","50%").attr("dy","0%"),_=Z.append("tspan").attr("x","50%").attr("dy","14px")}function t(a,b){Z.style("fill",a?"#F00":"#000"),b.length>1?(Z.attr("y","20%"),$.text(b[0]),_.text(b[1])):(Z.attr("y","40%"),$.text(b[0]),_.text(""))}function u(a){if(z.showExtraInfo!==!1){var b=0;U.data(a).text(function(a,c){return"undefined"!=typeof a.y?(b+=a.y,a.y):""}),V.text(b)}}function v(){J=0}function w(){ba=ba.each(function(){if(J++,0===G.length)return void(J>a.consts.maxDealyCount&&z.showExtraInfo===!1&&t(!1,[a.message.NO_RESPONSE]));v();var b=G.shift();u(b),i(),z.showExtraInfo===!1&&x();var c=0;for(c=0;c<H.length;c++)H[c].push(b[c]);for(aa(H),l(),y(),c=0;c<H.length;c++)H[c].shift();q(p(E))}).transition().each("start",function(){w()})}function x(){for(var a=0,b=0;b<R.length;b++)a=Math.max(a,parseInt(d3.select(R[b]).attr("x1")));var c=N(0)*L++,d=a+K;Q.transition().attr("transform","translate("+c+")").each("end",function(){for(var a=0;a<R.length;a++){var b=d3.select(R[a]),e=parseInt(b.attr("x1"));e<Math.abs(c)&&(b.attr({x1:d,x2:d}),d+=K)}})}function y(){S.data(H).attr("d",T).attr("transform",null).transition().attr("transform","translate("+N(0)+")")}var z={timeoutMaxCount:parseInt(e[a.params.TIMEOUT_MAX_COUNT]),showExtraInfo:"true"===e[a.params.SHOW_EXTRA_INFO],requestLabel:c[e[a.params.REQUEST_LABEL]],requestColor:c[e[a.params.CHART_COLOR]],xAxisCount:parseInt(e[a.params.XCOUNT]),namespace:e[a.params.NAMESPACE],height:parseInt(e[a.params.HEIGHT]),width:parseInt(e[a.params.WIDTH])},A={domain:[1,z.xAxisCount-2],margin:{top:6,left:z.showExtraInfo?38:20,right:80,bottom:6},transaction:{duration:1e3,ease:"linear"},yAxisFormat:d3.format("d"),tooltipWidth:50,interpolation:"basis"},B=z.width-(z.showExtraInfo?A.margin.left+A.margin.right:0),C=z.height-A.margin.top-A.margin.bottom,D=0,E=-1,F=-1,G=[],H=[],I=0,J=0,K=parseInt(B/(a.consts.verticalGridCount-1)),L=1;g();var M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,aa=d3.layout.stack().y(function(a){return a.y}),ba=d3.select({}).transition().duration(A.transaction.duration).ease(A.transaction.ease);aa(H),f(),h(),l(),m(),n(),o(),r(),s(),w(),c.$on("realtimeChartDirective.onData."+z.namespace,function(a,b,c,d,e){D=d,I=0,t(!1,["",""]),e===!1&&G.push(b.map(function(a){return{y:parseInt(a),d:c}}))}),c.$on("realtimeChartDirective.onError."+z.namespace,function(b,c,d,e){if(D=e,c.code===a.responseCode.TIMEOUT){if(I<z.timeoutMaxCount){if(G.length>0){var f=G[G.length-1];G.push(f.map(function(a){return{d:d,y:a.y,y0:a.y0}}))}}else v(),t(!0,c.message.split("_"));I++}else v(),t(c.code!==a.responseCode.ERROR_BLACK,c.message.split("_"))}),c.$on("realtimeChartDirective.clear."+z.namespace,function(){G.length=0,g(),d.html(""),u([{},{},{},{}]),aa(H),f(),h(),l(),m(),n(),o(),r(),s()}),c.$on("$destroy",function(){})}}}])}(),function(){"use strict";pinpointApp.constant("scatterDirectiveConfig",{scatterDataUrl:"/getScatterData.pinpoint",template:"<div id='scatter' style='padding-top:10px;padding-bottom:20px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;'></div>",images:{config:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYxIDY0LjE0MDk0OSwgMjAxMC8xMi8wNy0xMDo1NzowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNS4xIFdpbmRvd3MiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QTI2NzMzRDI2QTlGMTFFM0E1RENBRjZGODkwRDBCMEIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QTI2NzMzRDM2QTlGMTFFM0E1RENBRjZGODkwRDBCMEIiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpBMjY3MzNEMDZBOUYxMUUzQTVEQ0FGNkY4OTBEMEIwQiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpBMjY3MzNEMTZBOUYxMUUzQTVEQ0FGNkY4OTBEMEIwQiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pn/ejkcAAAFwSURBVHjanFKxSsNQFE2CFEtaTNsMCbSQ4lA6GSghi2igo/o/GVz6AfmD/EFGJ7cKDiVLO0hFEByzpG1EA5LUxntC80jFKhi4LzfnnnPfzXmPz7KM+9ezT6iq6gnF+T4Nny88/110VK1WbwRB4OM4vgyC4PVXIQlW9JqRwGo2mzm2XC65zWYzplSnBo1CeFDu1Ov1XhaLhVWpVBimKAqXJInVarWmJGQ42xHjybIcQSSK4rNt29cgOI5jR1Gkk5gLw1DC2LkvWGBCu90eDwaDDOF53hXhhwjf908LHByYBo2ArqZpfnY6HbEYw3XdJ5riAzEajR4LHJxut6syhyhq5c6apt1hdER5EnCIKzFzqPM7fUwkSZrhf+r1+lmaphFqjUZuJIeaYRgT4q7ZqFvxmn7+GAQYBDcRyIGhBs6PN4dyjKLP5/OL4XA4RSAHhlpZs3OO1PF+W3ggwxQ6u7d+v3+7s9Nfd3VrQm3fXf0SYADyptv3yy4A0QAAAABJRU5ErkJggg==",download:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYxIDY0LjE0MDk0OSwgMjAxMC8xMi8wNy0xMDo1NzowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNS4xIFdpbmRvd3MiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RUU3MjQyMUQ2QTlGMTFFM0IxRTY4MjI3MUU5MUUyMzMiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RUU3MjQyMUU2QTlGMTFFM0IxRTY4MjI3MUU5MUUyMzMiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpFRTcyNDIxQjZBOUYxMUUzQjFFNjgyMjcxRTkxRTIzMyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpFRTcyNDIxQzZBOUYxMUUzQjFFNjgyMjcxRTkxRTIzMyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PlnySxAAAADPSURBVHjaxFLBDYMwDLQjMgEf4M8E4Y0YgzHaTTpGFuDfARAdoH3DiwmQSLmqRIZSpPLpSTH4krOjc9g5R0cQIDDzgozj2Ffrum6xOTcKtqolSUJCuNlR0UH8WTiZcpPGzEaB3xVWVXVO0/QhOeTgP1rKOU7/QdM0RZ7nd2OMwxc5eHkeixEm+71aKUVhGJLWmoZhoL7vaRxHX7xtW/ZzlHOTgDiKIirL8oTcWnuZ914dsyzbfXfoCuAmdV3z15ezBgRr8Nuc4ocRXhGeAgwAFHJVgfQ6KdUAAAAASUVORK5CYII=",fullscreen:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYxIDY0LjE0MDk0OSwgMjAxMC8xMi8wNy0xMDo1NzowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNS4xIFdpbmRvd3MiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QkMwOTc3QTg2QTlGMTFFMzk5MzhBOTM4OEFCMzg3MTciIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QkMwOTc3QTk2QTlGMTFFMzk5MzhBOTM4OEFCMzg3MTciPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpCQzA5NzdBNjZBOUYxMUUzOTkzOEE5Mzg4QUIzODcxNyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpCQzA5NzdBNzZBOUYxMUUzOTkzOEE5Mzg4QUIzODcxNyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PvZjiPIAAAE/SURBVHjanFKxaoRAEHXhbM4UopViGWzv0C5VUvsJqdP7A/6Dfb7DMmCVSuRCunClaKUYSKUQM2+zY1SsMjDuuDtv9u3ME9M0af+xAz6u687opmnENslxnFX1uq6FhhvDMKRluofvVeczuMr9vREmhMhRmRy/F3IukhOjM7Mh4B9VNkqQq67rR9u25VnbtsdxHPkZ6zcWRfFAN2qGYVzx3/e9X1XVC2LLsnzTNK8MQK5kCL4AwcqylPTiOH4m8C1igNI0fUIcBEGu3rwGRlFkK3qvRM9XtD+I9h3iLMvaXaDneRdF78T0cHPXdW+Iif6ZgavmALClB9q0nBRw3RyMAa0mWnJzGIbvJEneOeb9hRgEK0e2mjtG9kX+qeJH8hs163lkh2UlVWAruYIlp8ShzeNYqEQqaE9ym638R4ABADZiqF446UJLAAAAAElFTkSuQmCC",error:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAABmJLR0QA/wD/AP+gvaeTAAADvUlEQVRoge2ZQW8bRRTHf2+2tMTrkCYFkQ9QqBBKC03aOOkldqtKUcUFqeUbkAN3pFSIGxQOFRx6IN8AJeIYtVIc1xdqHAdCE3EgKeeqNAlV8dIm8u7j0FasHW+8u7E3Rcrv9mbe7P7/mtHsmx044IA9Ie14iI4fP1LdPjYKZEEHBE4g9KOkAUVwUO4rrIIuI9bt9CvrJbl5b2uv796TASc7POgJEyJ6BeiJOPyRotNGrSm78NMvcTXEMuDkMqfVeNdQLsZ9cQO3MDqZnqv8GnVgJAM6MtLlpLyvQD8BrKgva0EN0Rt2zZ6UYvFp2EGhDTzODp0wRmZABuLpC81d18jlnrnyWpjkUAac82fOqMoswht70xaaTU/1g9cKlTutElsa+CebGVbj5RXS7dEWDoGqqHc+VVhcaJEXzLNlY34EjrVVXXjWXSOjuy0nE9ShY2OvGmO+Z//EA7xued4POjLSFZQQaMCxnnwNvNcRWZGQAafL/SKwt1mjk8ucVvEWaP9WGRcXo0PNvhNNZ0CNd42XRzyAhUrTWdgxA052eFCNLnZeU2RUxBu084tL/sYdM+AJE8lpioR4mI93NPoDHT9+xNnue0D0wiwZhL/sXqdfZn7bftFUNwPVrb5zvKziAZTe6kYq42+qX0IiY0nqiYWRXF1Y1yneqUTFxEE56Q8P+QNReSvsc+x8uV2SAHAuDIfKE3jbHzfuQm+2S1AHqdPYaCDRijMm3f4gsBb6v9BooLovKqKgPPaHjQYeJCglHsKf/rBuF1JYFXgnzHPC7hrtRlR+98cNM6B3kxQTD132Rw0GTDFBJbFwhYI/rjOQPrxxB3iUqKJobHb3OXVf0DoDcvPelqrMJKspPCpM+ytRaPIdMMh3yUmKhIroVGPjDgPPf7TeSkRSNGZDn4kR61Og1mlFEajh8VmzjqYG0vnSCqI3OqspAqLfpm8vNN3iA2shu2ZPAktB/QmybDuHPg/qDDQgxeJT18hHwHpHZIVBeVhT90MplZ4EpexajfbMldeMepdkH4o8gaqIXjpa+PmP3fJaltPP/g5rDuVh++S1ZFPgoj1fqbRKDHUesOcrFdeSc0AStdJSTd2zqfmFUpjk0Aeanrnymu2mMijf0JkttgZy3XZTo62WjZ9Yl3zV7NlTWHyJMh73GT4UmEWsq+l8aSXq4L1ds14Yet9TMyHCFZTeiMM3VZgW0ak4t5MvaM9F9+V3D1c3UhmM5FBOPv/10c9/B/C/Ue4LsuoZXVFlvrvPKTcWZgccsA/8C1bvKjPyfF8QAAAAAElFTkSuQmCC"},options:{containerId:"",containerClass:"bigscatterchart",width:400,height:250,minX:0,maxX:1e3,minY:0,maxY:1e4,minZ:0,maxZ:5,bubbleSize:3,labelX:"",labelY:"(ms)",realtime:!1,chartAnimationTime:300,gridAxisStyle:{lineWidth:1,lineDash:[1,0],globalAlpha:1,strokeStyle:"#e3e3e3"},padding:{top:40,left:50,right:40,bottom:30},typeInfo:{0:["Failed","#d62728",20],1:["Success","#2ca02c",10]},propertyIndex:{x:0,y:1,meta:2,transactionId:3,type:4,groupCount:5},checkBoxImage:{checked:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYxIDY0LjE0MDk0OSwgMjAxMC8xMi8wNy0xMDo1NzowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNS4xIFdpbmRvd3MiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6ODk0MjRENUI2Qjk2MTFFM0E3NkNCRkIyQTkxMjZFQjMiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6ODk0MjRENUM2Qjk2MTFFM0E3NkNCRkIyQTkxMjZFQjMiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4OTQyNEQ1OTZCOTYxMUUzQTc2Q0JGQjJBOTEyNkVCMyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4OTQyNEQ1QTZCOTYxMUUzQTc2Q0JGQjJBOTEyNkVCMyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PkJ02akAAAEfSURBVHjalJI/aoRQEMbnrU8RRVYsBAXJASxEtLGRXEDIJXKTpPcOHiDl1gsp1QvEIiD2AbGLmpm3f7Is68YMjOOb9/0Y/Rg2zzPEcTzDP6IsS7Y5QXTAsibFIH4BQVVVi1Mcx9liyTFN13W/+JpPI0iSpL1hGEHf9+E0TSBAxtifkGVZgSzLgBkMwwCbNZNOEIVpmo3v+78gigLMt+O/3IR0XW/yPH/uuu4AEqQoComeSIznhyUoDMP3cRwPoKZpLyjaqqoKJOacfy5B6Mc39QRYFMUrOtbQO4lt24Z70BlMkqSkSxJdmrMEiYiiSGwOrh6v6/oxTdMP6lGlM/Wv3RYMPY55hrMs292DKNn1kqOb4HketG0L5N5CsB8BBgCZjoUNsxfiYwAAAABJRU5ErkJggg==",unchecked:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYxIDY0LjE0MDk0OSwgMjAxMC8xMi8wNy0xMDo1NzowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNS4xIFdpbmRvd3MiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OEQxQ0ZERUQ2Qjk2MTFFMzg5MjNGMjAzRjdCQ0FEMjkiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OEQxQ0ZERUU2Qjk2MTFFMzg5MjNGMjAzRjdCQ0FEMjkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4RDFDRkRFQjZCOTYxMUUzODkyM0YyMDNGN0JDQUQyOSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4RDFDRkRFQzZCOTYxMUUzODkyM0YyMDNGN0JDQUQyOSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pq1+Js8AAABTSURBVHjaYvz//z+DiYnJfwYSwJkzZxgZjY2NYZoYidQHVs9Eoia4WhY0JxDUBfQWA7KNRGlCVsfEQCYY1UhLjf9hEUtEAgAnOUZyEjlIH0CAAQDn/BlKI9rDJAAAAABJRU5ErkJggg=="}}}),pinpointApp.directive("scatterDirective",["scatterDirectiveConfig","$rootScope","$compile","$timeout","webStorage","$window","$http","UrlVoService","CommonAjaxService","TooltipService","AnalyticsService","PreferenceService",function(a,b,c,d,e,f,g,h,i,j,k,l){return{template:a.template,restrict:"EA",replace:!0,scope:{namespace:"@"},link:function(c,g,m){function n(g,i,n,o,p){var q=h.getQueryStartTime(),r=h.getQueryEndTime(),s=h.getFilter(),t=i.split("^")[0],v={};angular.copy(a.options,v),v.sPrefix="BigScatterChart2-"+parseInt(1e5*Math.random()),v.containerId=g,v.width=n?n:v.width,v.height=o?o:v.height,v.minX=q,v.maxX=r,v.errorImage=a.images.error,v.realtime=h.isRealtime()&&x;var y=new BigScatterChart2(v,u(p),[new BigScatterChart2.SettingPlugin(a.images.config).addCallback(function(a,b){e.add("scatter-y-min"+c.namespace,b.min),e.add("scatter-y-max"+c.namespace,b.max),a.changeRangeOfY(b),a.redraw()}),new BigScatterChart2.DownloadPlugin(a.images.download,"PNG").addCallback(function(a){k.send(k.CONST.MAIN,k.CONST.CLK_DOWNLOAD_SCATTER)}),new BigScatterChart2.WideOpenPlugin(a.images.fullscreen).addCallback(function(){var a=h.isRealtime()&&x?"realtime/"+h.getQueryEndDateTime():h.getPartialURL(!1,!0);f.open("#/scatterFullScreenMode/"+w.applicationName+"@"+w.serviceType+"/"+a+"/"+u().join(","),"width=900, height=700, resizable=yes")}),new BigScatterChart2.HelpPlugin(j)],{sendAnalytics:function(a,b){k.send(k.CONST.MAIN,k.CONST["Success"===a?"TG_SCATTER_SUCCESS":"TG_SCATTER_FAILED"],k.CONST[b?"ON":"OFF"])},loadFromStorage:function(a){return e.get(a+c.namespace)},onSelect:function(a,b){if(5===arguments.length)f.open("#/transactionList/"+h.getPartialURL(!0,!1),i+"|"+arguments[0]+"|"+arguments[1]+"|"+arguments[2]+"|"+arguments[3]+"|"+arguments[4]);else{var c=i+"|"+b.fromX+"|"+b.toX+"|"+b.fromY+"|"+b.toY+"|"+arguments[2]+"|"+arguments[3];f.open("#/transactionList/"+h.getPartialURL(!0,!1),c)}},onError:function(){}},l.getAgentAllStr());return d(function(){angular.isUndefined(p)?y.drawWithDataSource(new BigScatterChart2.DataLoadManager(t,s,{url:a.scatterDataUrl,realtime:h.isRealtime()&&x,realtimeInterval:2e3,realtimeDefaultTimeGap:3e3,realtimeResetTimeGap:2e4,fetchLimit:5e3,fetchingInterval:2e3,useIntervalForFetching:!1},function(a,c,d){h.setQueryEndDateTime(c),b.$broadcast("responseTimeChartDirective.loadRealtime",t,y.getCurrentAgent(),a.min,a.max)})):y.addBubbleAndMoveAndDraw(y.createDataBlock(p)),"forMain"!==m.namespace&&"forFilteredMap"!==m.namespace||(f.htoScatter[i]=y)},100),y}function o(a,b,c){g.children().hide(),s(),angular.isDefined(v[a])?(v[a].target.show(),h.isRealtime()&&x?i.getServerTime(function(b){v[a].scatter.resume(b-l.getRealtimeScatterXRange(),b),v[a].scatter.selectAgent(l.getAgentAllStr(),!0)}):(v[a].scatter.resume(),v[a].scatter.selectAgent(l.getAgentAllStr(),!0))):q(a,b,c)}function p(a,b,c,d){angular.isDefined(v[a])?v[a].scatter.addBubbleAndMoveAndDraw(v[a].scatter.createDataBlock(d)):(q(a,b,c,d),v[a].target.hide())}function q(b,c,d,e){var f=angular.element(a.template),h=n(f,b,c,d,e);v[b]={target:f,scatter:h},g.append(f)}function r(a){g.children().hide(),angular.isDefined(v[a])&&(v[a].target.show(),v[a].scatter.selectAgent(l.getAgentAllStr(),!0))}function s(){angular.forEach(v,function(a,b){a.scatter.pause()})}function t(){for(var a in v)v[a].scatter.abort();v={}}function u(a){var b,c={},d=[];if("undefined"!=typeof a)return $.each(a.scatter.metadata,function(a,b){"undefined"==typeof c[b[0]]&&(c[b[0]]=!0,d.push(b[0]))}),d;if(w.agentList)return w.agentList;if(w.serverList)for(b in w.serverList){var e=w.serverList[b].instanceList;for(var f in e)d.push(e[f].name)}return d}var v={},w=null,x="true"==m.enableRealtime;c.$on("scatterDirective.initialize."+c.namespace,function(a,b){t(),g.empty()}),c.$on("scatterDirective.initializeWithNode."+c.namespace,function(a,b,d,e){c.currentAgent=l.getAgentAllStr(),w=b,o(b.key,d,e)}),c.$on("scatterDirective.initializeWithData."+c.namespace,function(a,b,d){c.currentAgent=l.getAgentAllStr();var e=b.split("^");w={applicationName:e[0],serviceType:e[1],key:b},p(b,null,null,d)}),c.$on("scatterDirective.showByNode."+c.namespace,function(a,b){w=b,r(b.key)}),c.$on("responseTimeChartDirective.showErrorTransactionList."+c.namespace,function(b,c){f.htoScatter[w.key].selectType("Failed").fireDragEvent({animate:function(){},css:function(b){return"left"===b?a.options.padding.left+"px":"top"===b?a.options.padding.top+"px":"0px"},width:function(){return a.options.width-a.options.padding.left-a.options.padding.right},height:function(){return a.options.height-a.options.padding.top-a.options.padding.bottom}})}),c.$on("changedCurrentAgent."+c.namespace,function(a,b){v[w.key].scatter.selectAgent(b)})}}}])}(),function(){"use strict";pinpointApp.filter("startFrom",function(){return function(a,b){if(a&&a.length)return a.slice(b)}}),pinpointApp.constant("nodeInfoDetailsDirectiveConfig",{maxTimeToShowLoadAsDefaultForUnknown:43200}),pinpointApp.directive("nodeInfoDetailsDirective",["nodeInfoDetailsDirectiveConfig","$rootScope","$filter","$timeout","isVisibleService","SystemConfigurationService","$window","AnalyticsService","PreferenceService","TooltipService","CommonAjaxService",function(a,b,c,d,e,f,g,h,i,j,k){return{restrict:"EA",replace:!0,templateUrl:"features/nodeInfoDetails/nodeInfoDetails.html?v="+G_BUILD_TIME,scope:{},link:function(g,l){function m(a){var b=i.getResponseTypeFormat();return $.each(a,function(a,c){$.each(c,function(a,c){b[a]+=c})}),b}function n(a){var b=[];return $.each(a,function(a,c){for(var d=0;d<c.length;d++){var e=c[d];b.length<d+1&&(b[d]={key:e.key,values:[]});for(var f=0;f<e.values.length;f++)b[d].values.length<f+1&&(b[d].values[f]=[e.values[f][0],0]),b[d].values[f][1]+=e.values[f][1]}}),b}function o(a){if(a){var b=parseInt(a.length/g.pagingSize)+(a.length%g.pagingSize===0?0:1);g.pagingCount=[];for(var c=1;c<=b;c++)g.pagingCount.push(c)}}var p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H=!1;v=!1,g.htLastUnknownNode=!1,y=function(){r={},s={},u={},t=!1,g.currentAgent=i.getAgentAllStr(),g.showNodeInfoDetails=!1,g.node=!1,g.unknownNodeGroup=null,g.hosts=null,g.showNodeServers=!1,g.agents=null,g.showAgents=!1,g.showNodeResponseSummaryForUnknown=!1,g.showNodeResponseSummary=!1,g.showNodeLoad=!1,g.agentHistogram=!1,g.nodeOrderBy="totalCount",g.nodeOrderByNameClass="",g.nodeOrderByCountClass="glyphicon-sort-by-order-alt",g.nodeOrderByDesc=!0,"$apply"!=g.$$phase&&"$digest"!=g.$$phase&&"$apply"!=g.$root.$$phase&&"$digest"!=g.$root.$$phase&&g.$digest()},g.pagingSize=3,z=function(b){g.showNodeInfoDetails=!0,g.node=b,g.unknownNodeGroup=b.unknownNodeGroup,g.serverList=b.serverList,g.showNodeServers=!_.isEmpty(g.serverList),g.agentHistogram=b.agentHistogram,/_GROUP$/.test(b.serviceType)===!1?(g.showNodeResponseSummary=!0,g.showNodeLoad=!0,D("forNode",b.applicationName,b.histogram,"100%","150px"),F("forNode",b.applicationName,b.timeSeriesHistogram,"100%","220px",!0)):/_GROUP$/.test(b.serviceType)&&(g.showNodeResponseSummaryForUnknown=!(g.oNavbarVoService.getPeriod()<=a.maxTimeToShowLoadAsDefaultForUnknown),A(g.unknownNodeGroup),g.htLastUnknownNode=b,d(function(){l.find('[data-toggle="tooltip"]').tooltip("destroy").tooltip()})),"$apply"!=g.$$phase&&"$digest"!=g.$$phase&&"$apply"!=g.$root.$$phase&&"$digest"!=g.$root.$$phase&&g.$digest()},A=function(a,b){d(function(){angular.forEach(a,function(a){var d=a.applicationName,f=c("applicationNameToClassName")(d);if(b!==!0){if(angular.isDefined(r[d]))return;if(angular.isDefined(s[d]))return}var h=".nodeInfoDetails .summaryCharts_"+f,i=angular.element(h);if(0!==i.length){var j=e(i.get(0),1);if(!j)return;g.showNodeResponseSummaryForUnknown?(r[d]=!0,D(null,d,a.histogram,"100%","150px")):(s[d]=!0,F(null,d,a.timeSeriesHistogram,"100%","220px",!0))}})})},D=function(a,b,d,e,f){var h=c("applicationNameToClassName")(b);a=a||"forNode_"+h,g.$broadcast("responseTimeChartDirective.initAndRenderWithData."+a,d,e,f,!1,!0)},E=function(a,b,d,e,f){var h=c("applicationNameToClassName")(b);a=a||"forNode_"+h,g.$broadcast("responseTimeChartDirective.updateData."+a,d)},F=function(a,b,d,e,f,h){var i=c("applicationNameToClassName")(b);a=a||"forNode_"+i,g.$broadcast("loadChartDirective.initAndRenderWithData."+a,d,e,f,h)},G=function(a,b,d,e,f,h){var i=c("applicationNameToClassName")(b);a=a||"forNode_"+i,g.$broadcast("loadChartDirective.updateData."+a,d)},x=function(a){for(var b=null,c=0;c<q.unknownNodeGroup.length;c++)if(q.unknownNodeGroup[c].key===a){b=q.unknownNodeGroup[c];break}return b},B=function(){v=!1,l.hide()},C=function(){v=!0,l.show()},g.isGroupNode=function(){return!!g.node&&(g.node.serviceType.indexOf("_GROUP")!=-1&&g.isAuthorized)},g.isNotGroupNode=function(){return!!g.node&&(g.node.serviceType.indexOf("_GROUP")==-1&&g.isAuthorized)},g.isNotAuthorized=function(){return g.isAuthorized===!1},g.getAuthGuideUrl=function(){return f.get("securityGuideUrl")},g.showNodeDetailInformation=function(a){q=x(a),z(q),b.$broadcast("infoDetail.showDetailInformationClicked",t,q)},g.goBackToUnknownNode=function(){q=g.htLastUnknownNode,r={},s={},z(q,g.currentPage),b.$broadcast("infoDetail.showDetailInformationClicked",t,q)},g.renderNodeResponseSummary=function(a,b){angular.isUndefined(r[a])&&(r[a]=!0,D(null,a,x(b).histogram,"100%","150px"))},g.renderNodeLoad=function(a,b){angular.isUndefined(s[a])&&(s[a]=!0,F(null,a,x(b).timeSeriesHistogram,"100%","220px",!0))},g.renderNodeAgentCharts=function(a){h.send(h.CONST.MAIN,h.CONST.CLK_SHOW_GRAPH),angular.isDefined(u[a])||(u[a]=!0,D(null,a,q.agentHistogram[a],"100%","150px"),F(null,a,q.agentTimeSeriesHistogram[a],"100%","220px",!0))},g.nodeSearchChange=function(){g.currentPage=1,g.unknownNodeGroup=[];for(var a=0;a<q.unknownNodeGroup.length;a++){var b=q.unknownNodeGroup[a];g.nodeSearch?(b.applicationName.indexOf(g.nodeSearch)>-1||b.totalCount.toString().indexOf(g.nodeSearch)>-1)&&g.unknownNodeGroup.push(b):g.unknownNodeGroup.push(b)}o(g.unknownNodeGroup),A(g.unknownNodeGroup,!0)},g.nodeOrderByName=function(){"applicationName"===g.nodeOrderBy?(g.nodeOrderByDesc=!g.nodeOrderByDesc,"glyphicon-sort-by-alphabet-alt"===g.nodeOrderByNameClass?g.nodeOrderByNameClass="glyphicon-sort-by-alphabet":g.nodeOrderByNameClass="glyphicon-sort-by-alphabet-alt"):(g.nodeOrderByNameClass="glyphicon-sort-by-alphabet-alt",g.nodeOrderByCountClass="",g.nodeOrderByDesc=!0,g.nodeOrderBy="applicationName"),A(g.unknownNodeGroup,!0)},g.nodeOrderByCount=function(){"totalCount"===g.nodeOrderBy?(g.nodeOrderByDesc=!g.nodeOrderByDesc,"glyphicon-sort-by-order-alt"===g.nodeOrderByCountClass?g.nodeOrderByCountClass="glyphicon-sort-by-order":g.nodeOrderByCountClass="glyphicon-sort-by-order-alt"):(g.nodeOrderByCountClass="glyphicon-sort-by-order-alt",g.nodeOrderByNameClass="",g.nodeOrderByDesc=!0,g.nodeOrderBy="totalCount"),A(g.unknownNodeGroup,!0)},g.showUnknownNodeBy=function(a,b){return!a||(b.applicationName.indexOf(a)>-1||b.totalCount.toString().indexOf(a)>-1)},g.movePaging=function(a){g.currentPage!=a&&(g.currentPage=a,A(g.unknownNodeGroup,!0))},g.$on("nodeInfoDetailsDirective.initialize",function(a,b,c,d,e,f,h,i){C(),y(),t=c,w=d.key,q=d,g.isAuthorized=d.isAuthorized!==!1,g.htLastUnknownNode=!1,g.oNavbarVoService=f,g.nodeSearch=i||"",g.currentPage=1,p=e,o(d.unknownNodeGroup),z(d)}),g.$on("nodeInfoDetailsDirective.hide",function(a){B()}),g.$on("nodeInfoDetailsDirective.lazyRendering",function(a,b){A(g.unknownNodeGroup)}),g.$on("responseTimeChartDirective.itemClicked.forNode",function(a,b){}),g.$on("responseTimeChartDirective.loadRealtime",function(a,b,c,d,e){
angular.isUndefined(g.node)||g.node.applicationName!==b||H===!1&&(H=!0,k.getResponseTimeHistogramData({applicationName:g.node.applicationName,serviceTypeName:g.node.category,from:d,to:e},function(a){c===i.getAgentAllStr()?(E("forNode",g.node.applicationName,m(a.summary)),G("forNode",g.node.applicationName,n(a.timeSeries))):(E("forNode",g.node.applicationName,a.summary[c]),G("forNode",g.node.applicationName,a.timeSeries[c])),H=!1},function(){H=!1}))}),g.$on("changedCurrentAgent.forMain",function(a,b){var c=null,d=null;b===i.getAgentAllStr()?(c=g.node.histogram,d=g.node.timeSeriesHistogram):(c=g.node.agentHistogram[b],d=g.node.agentTimeSeriesHistogram[b]),D("forNode",g.node.applicationName,c,"100%","150px"),F("forNode",g.node.applicationName,d,"100%","220px",!0)}),j.init("responseSummaryChart"),j.init("loadChart")}}}])}(),function(){"use strict";pinpointApp.constant("linkInfoDetailsDirectiveConfig",{maxTimeToShowLoadAsDefaultForUnknown:43200}),pinpointApp.directive("linkInfoDetailsDirective",["linkInfoDetailsDirectiveConfig","$rootScope","$filter","ServerMapFilterVoService","filteredMapUtilService","$timeout","isVisibleService","ServerMapHintVoService","AnalyticsService","$window",function(a,b,c,d,e,f,g,h,i,j){return{restrict:"EA",replace:!0,templateUrl:"features/linkInfoDetails/linkInfoDetails.html?v="+G_BUILD_TIME,scope:!0,link:function(i,j,k){function l(a){if(a){var b=parseInt(a.length/i.pagingSize)+(a.length%i.pagingSize===0?0:1);i.pagingCount=[];for(var c=1;c<=b;c++)i.pagingCount.push(c)}}var m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D;i.linkSearch="",s=!1,t=!1,q=!1,i.htLastUnknownLink=!1,v=function(){m=!1,n=!1,o={},r={},p={},i.linkCategory=null,i.unknownLinkGroup=null,i.showLinkInfoDetails=!1,i.showLinkResponseSummary=!1,i.showLinkLoad=!1,i.showLinkServers=!1,i.linkSearch="",i.linkOrderBy="totalCount",i.linkOrderByNameClass="",i.linkOrderByCountClass="glyphicon-sort-by-order-alt",i.linkOrderByDesc=!0,i.sourceApplicationName="",i.sourceHistogram=!1,i.namespace=null,i.$$phase||i.$digest()},i.pagingSize=3,w=function(b){i.showLinkInfoDetails=!0,i.link=b,i.unknownLinkGroup=b.unknownLinkGroup,b.unknownLinkGroup?(i.unknownLinkGroup=b.unknownLinkGroup,i.htLastUnknownLink=b,i.showLinkResponseSummaryForUnknown=!(i.oNavbarVoService.getPeriod()<=a.maxTimeToShowLoadAsDefaultForUnknown),z(i.unknownLinkGroup),f(function(){j.find('[data-toggle="tooltip"]').tooltip("destroy").tooltip()})):(i.showLinkResponseSummary=!0,i.showLinkLoad=!0,y("forLink",b.targetInfo.applicationName,b.histogram,"100%","150px"),x("forLink",b.targetInfo.applicationName,b.timeSeriesHistogram,"100%","220px",!0),i.showLinkServers=!_.isEmpty(b.sourceHistogram),i.sourceApplicationName=b.sourceInfo.applicationName,i.sourceHistogram=b.sourceHistogram,i.fromNode=b.fromNode),i.$$phase||i.$digest()},z=function(a,b){f(function(){angular.forEach(a,function(a){var d=a.targetInfo.applicationName,e=c("applicationNameToClassName")(d);if(b!==!0){if(angular.isDefined(o[d]))return;if(angular.isDefined(p[d]))return}var f=".linkInfoDetails .summaryCharts_"+e,h=angular.element(f);if(0!==h.length){var j=g(h.get(0),1);if(!j)return;i.showLinkResponseSummaryForUnknown?(o[d]=!0,C(null,a,"100%","180px")):(p[d]=!0,x(null,d,a.timeSeriesHistogram,"100%","200px",!0))}})})},y=function(a,b,f,g,j){var k=c("applicationNameToClassName")(b);a=a||"forLink_"+k,"forLink"===a&&s||("forLink"===a&&(s=!0),i.$on("responseTimeChartDirective.itemClicked."+a,function(a,b){var c=b.responseTime,f=b.count,g=new d;g.setMainApplication(n.filterApplicationName).setMainServiceTypeCode(n.filterApplicationServiceTypeCode),"USER"===n.sourceInfo.serviceType?g.setFromApplication("USER").setFromServiceType("USER"):g.setFromApplication(n.sourceInfo.applicationName).setFromServiceType(n.sourceInfo.serviceType),g.setToApplication(n.targetInfo.applicationName).setToServiceType(n.targetInfo.serviceType),"error"===c.toLowerCase()?g.setIncludeException(!0):"slow"===c.toLowerCase()?g.setResponseFrom(1e3*e.getStartValueForFilterByLabel(c,f)).setIncludeException(!1).setResponseTo("max"):g.setResponseFrom(1e3*e.getStartValueForFilterByLabel(c,f)).setIncludeException(!1).setResponseTo(1e3*parseInt(c,10));var j=new h;n.sourceInfo.isWas&&n.targetInfo.isWas&&j.setHint(n.targetInfo.applicationName,n.filterTargetRpcList),i.$emit("linkInfoDetailsDirective.ResponseSummary.barClicked",g,j)})),i.$broadcast("responseTimeChartDirective.initAndRenderWithData."+a,f,g,j,!0,!0)},C=function(a,b,f,g){var j=c("applicationNameToClassName")(b.targetInfo.applicationName);a=a||"forLink_"+j,"forLink"===a&&s||"forLink"===a&&(s=!0),i.$broadcast("responseTimeChartDirective.initAndRenderWithData."+a,b.histogram,f,g,!0,!0),i.$on("responseTimeChartDirective.itemClicked."+a,function(a,c){var f=c.responseTime,g=c.count,j=new d;j.setMainApplication(b.filterApplicationName).setMainServiceTypeCode(b.filterApplicationServiceTypeCode),"USER"===b.sourceInfo.serviceType?j.setFromApplication("USER").setFromServiceType("USER"):j.setFromApplication(b.sourceInfo.applicationName).setFromServiceType(b.sourceInfo.serviceType),j.setToApplication(b.targetInfo.applicationName).setToServiceType(b.targetInfo.serviceType),"error"===f.toLowerCase()?j.setIncludeException(!0):"slow"===f.toLowerCase()?j.setResponseFrom(1e3*e.getStartValueForFilterByLabel(f,g)).setIncludeException(!1).setResponseTo("max"):j.setResponseFrom(1e3*e.getStartValueForFilterByLabel(f,g)).setIncludeException(!1).setResponseTo(1e3*parseInt(f,10));var k=new h;b.sourceInfo.isWas&&b.targetInfo.isWas&&k.setHint(b.targetInfo.applicationName,b.filterTargetRpcList),i.$emit("linkInfoDetailsDirective.ResponseSummary.barClicked",j,k)})},x=function(a,b,d,e,f,g){var h=c("applicationNameToClassName")(b);a=a||"forLink_"+h,"forLink"===a&&t||"forLink"===a&&(t=!0),i.$broadcast("loadChartDirective.initAndRenderWithData."+a,d,e,f,g)},D=function(a){for(var b=null,c=0;c<n.unknownLinkGroup.length;c++)if(n.unknownLinkGroup[c].key===a){b=n.unknownLinkGroup[c];break}return b},i.showLinkDetailInformation=function(a){n=D(a),w(n),b.$broadcast("infoDetail.showDetailInformationClicked",m,n)},i.goBackToUnknownLink=function(){n=i.htLastUnknownLink,o={},p={},w(n,i.currentPage),b.$broadcast("infoDetail.showDetailInformationClicked",m,n)},i.renderLinkResponseSummary=function(a,b){angular.isUndefined(o[a])&&(o[a]=!0,C(null,D(b),"100%","180px"))},i.renderLinkLoad=function(a,b){angular.isUndefined(p[a])&&(p[a]=!0,x(null,a,D(b).timeSeriesHistogram,"100%","200px",!0))},A=function(){q=!1,j.hide()},B=function(){q=!0,j.show()},i.linkOrderByName=function(){"targetInfo.applicationName"===i.linkOrderBy?(i.linkOrderByDesc=!i.linkOrderByDesc,"glyphicon-sort-by-alphabet-alt"===i.linkOrderByNameClass?i.linkOrderByNameClass="glyphicon-sort-by-alphabet":i.linkOrderByNameClass="glyphicon-sort-by-alphabet-alt"):(i.linkOrderByNameClass="glyphicon-sort-by-alphabet-alt",i.linkOrderByCountClass="",i.linkOrderByDesc=!0,i.linkOrderBy="targetInfo.applicationName"),z(n,!0)},i.linkOrderByCount=function(){"totalCount"===i.linkOrderBy?(i.linkOrderByDesc=!i.linkOrderByDesc,"glyphicon-sort-by-order-alt"===i.linkOrderByCountClass?i.linkOrderByCountClass="glyphicon-sort-by-order":i.linkOrderByCountClass="glyphicon-sort-by-order-alt"):(i.linkOrderByCountClass="glyphicon-sort-by-order-alt",i.linkOrderByNameClass="",i.linkOrderByDesc=!0,i.linkOrderBy="totalCount"),z(n,!0)},i.showUnknownLinkBy=function(a,b){return!a||(b.targetInfo.applicationName.indexOf(a)>-1||b.totalCount.toString().indexOf(a)>-1)},i.movePaging=function(a){i.currentPage!=a&&(i.currentPage=a,z(i.unknownLinkGroup,!0))},i.passingTransactionMapFromLinkInfoDetails=function(a){var b=D(a),c=new d;c.setMainApplication(b.filterApplicationName).setMainServiceTypeCode(b.filterApplicationServiceTypeCode).setFromApplication(b.sourceInfo.applicationName).setFromServiceType(b.sourceInfo.serviceType).setToApplication(b.targetInfo.applicationName).setToServiceType(b.targetInfo.serviceType);var e=new h;b.sourceInfo.isWas&&b.targetInfo.isWas&&e.setHint(b.toNode.applicationName,b.filterTargetRpcList),i.$emit("linkInfoDetailsDirective.openFilteredMap",c,e)},i.openFilterWizard=function(a){var b=D(a);i.$emit("linkInfoDetailsDirective.openFilterWizard",b)},i.renderLinkAgentCharts=function(a){angular.isDefined(r[a])||(r[a]=!0,y(null,a,n.sourceHistogram[a],"100%","150px"),x(null,a,n.sourceTimeSeriesHistogram[a],"100%","200px",!0))},i.linkSearchChange=function(){i.currentPage=1,i.unknownLinkGroup=[];for(var a=0;a<n.unknownLinkGroup.length;a++){var b=n.unknownLinkGroup[a];i.linkSearch?(b.targetInfo.applicationName.indexOf(i.linkSearch)>-1||b.totalCount.toString().indexOf(i.linkSearch)>-1)&&i.unknownLinkGroup.push(b):i.unknownLinkGroup.push(b)}l(i.unknownLinkGroup),z(i.unknownLinkGroup,!0)},i.$on("linkInfoDetailsDirective.hide",function(a){A()}),i.$on("linkInfoDetailsDirective.initialize",function(a,b,c,d,e,f,g,h){B(),v(),m=c,u=d.key,n=d,i.htLastUnknownLink=!1,i.oNavbarVoService=f,i.linkSearch=h||"",i.currentPage=1,l(d.unknownLinkGroup),w(d)}),i.$on("linkInfoDetailsDirective.lazyRendering",function(a,b){z(n)})}}}])}(),function(a){"use strict";pinpointApp.directive("serverListDirective",["$timeout","$window","AnalyticsService","TooltipService",function(b,c,d,e){return{restrict:"EA",replace:!0,templateUrl:"features/serverList/serverList.html?v="+G_BUILD_TIME,scope:{namespace:"@"},link:function(e,f){function g(){l.animate({right:421},500,function(){})}function h(a,b,c){e.selectedAgent=a,e.$broadcast("changedCurrentAgent.forServerList",a),k?(e.$broadcast("responseTimeChartDirective.updateData.forServerList",b),e.$broadcast("loadChartDirective.updateData.forServerList",c)):(e.$broadcast("responseTimeChartDirective.initAndRenderWithData.forServerList",b,"100%","150px",!1,!0),e.$broadcast("loadChartDirective.initAndRenderWithData.forServerList",c,"100%","220px",!1,!0),k=!0)}function i(a,c,d){e.bIsNode=a,e.node=c,e.oNavbarVoService=d,e.hasScatter=!1,a?(c.isWas&&(e.hasScatter=!0),e.serverList=c.serverList,e.bIsNode=!0,e.$broadcast("scatterDirective.initializeWithNode.forServerList",c),b(function(){var a=l.find("._node input[type=radio][checked]").val();h(a,e.node.agentHistogram[a],e.node.agentTimeSeriesHistogram[a])})):(e.linkList=e.node.sourceHistogram,e.bIsNode=!1,b(function(){var a=l.find("._link input[type=radio][checked]").val();h(a,e.node.sourceHistogram[a],e.node.sourceTimeSeriesHistogram[a])}))}var j=!1,k=!1,l=a(f);e.bIsNode=!0,e.hasScatter=!1,e.selectedAgent="",e.hideLayer=function(a){a=a||100,l.animate({right:-386},a,function(){j=!1})},e.hasError=function(a){return a&&a.Error&&a.Error>0?"red":""},e.openInspector=function(a,b){a.preventDefault(),d.send(d.CONST.MAIN,d.CONST.CLK_OPEN_INSPECTOR),c.open("#/inspector/"+(e.node.applicationName||e.node.filterApplicationName)+"@"+(e.node.serviceType||"")+"/"+e.oNavbarVoService.getReadablePeriod()+"/"+e.oNavbarVoService.getQueryEndDateTime()+"/"+b)},e.selectServer=function(a){e.bIsNode?h(a,e.node.agentHistogram[a],e.node.agentTimeSeriesHistogram[a]):h(a,e.node.sourceHistogram[a],e.node.sourceTimeSeriesHistogram[a])},e.$on("serverListDirective.initialize",function(a,b){e.node=null,e.oNavbarVoService=null,e.selectedAgent="",e.hasScatter=!1,e.$broadcast("scatterDirective.initialize.forServerList",b),e.hideLayer(0)}),e.$on("serverListDirective.show",function(a,b,c,d){return j===!0?void e.hideLayer():(j=!0,(angular.isUndefined(e.node)||null===e.node||e.node.key!==c.key)&&i(b,c,d),void g())}),e.$on("serverListDirective.setData",function(a,b,c,d){(angular.isUndefined(e.node)||null===e.node||e.node.key!==c.key)&&i(b,c,d)})}}}])}(jQuery),function(){"use strict";pinpointApp.constant("agentListDirectiveConfig",{ID:"AGENT_LIST_DRTV_",AGENT_STATE_INFO:{sign:{100:"ok-sign",200:"minus-sign",201:"minus-sign",300:"remove-sign","-1":"question-sign"},color:{100:"#40E340",200:"#F00",201:"#F00",300:"#AAA","-1":"#AAA"}}}),pinpointApp.directive("agentListDirective",["agentListDirectiveConfig","CommonUtilService","UrlVoService","AgentAjaxService","PreferenceService","TooltipService","AnalyticsService",function(a,b,c,d,e,f,g){return{restrict:"EA",replace:!0,templateUrl:"features/agentList/agentList.html?v="+G_BUILD_TIME,link:function(e){function h(){f.init("agentList"),e.agentGroup=[],e.currentAgent={},i(!1)}function i(b){d.getAgentList({application:c.getApplicationName(),from:c.getQueryStartTime(),to:c.getQueryEndTime()},function(d){d.errorCode||d.status||(e.agentGroup=d,b?e.$emit("up.changed.agent",a.ID,{agentId:""},!0):k(j(c.getAgentId()),!0))})}function j(a){for(var b in e.agentGroup)for(var c in e.agentGroup[b])if(e.agentGroup[b][c].agentId===a)return e.agentGroup[b][c];return!1}function k(b,c){g.send(g.CONST.INSPECTOR,g.CONST.CLK_CHANGE_AGENT_INSPECTOR),e.currentAgent=b,e.$emit("up.changed.agent",a.ID,b,c)}a.ID+=b.getRandomNum(),h(),e.selectAgent=function(a){e.currentAgent!==a&&k(a,!1)},e.getState=function(b){return a.AGENT_STATE_INFO.sign[b+""]},e.getStateColor=function(b){return a.AGENT_STATE_INFO.color[b+""]},e.$on("down.changed.application",function(b,c){a.ID!==c&&i(!0)}),e.$on("down.changed.period",function(b,c){a.ID!==c&&i(!1)})}}}])}(),function(a){pinpointApp.constant("agentInfoDirectiveConfig",{ID:"AGENT_INFO_DRTV_",agentStatUrl:"/getAgentStat.pinpoint"}),pinpointApp.directive("agentInfoDirective",["agentInfoDirectiveConfig","$timeout","SystemConfigurationService","CommonUtilService","UrlVoService","AlertsService","ProgressBarService","AgentDaoService","AgentAjaxService","TooltipService","AnalyticsService","helpContentService",function(b,c,d,e,f,g,h,i,j,k,l,m){return{restrict:"EA",replace:!0,templateUrl:"features/agentInfo/agentInfoMain.html?v"+G_BUILD_TIME,link:function(c,n,o){function p(b){a("#target-picker").val(moment(b).format("YYYY-MM-DD HH:mm:ss"))}function q(b,d){null!==M?M.resetTimeSeriesAndSelectionZone(b,d?d:w(b)):M=new TimeSlider("timeSlider",{width:a("#timeSlider").get(0).getBoundingClientRect().width,height:90,handleSrc:"images/handle.png",timeSeries:d?d:w(b),handleTimeSeries:b,selectTime:b[1],eventData:[]}).addEvent("clickEvent",function(a){v(a[2])}).addEvent("selectTime",function(a){c.selectTime=a,u(a),s(),p(a)}).addEvent("changeSelectionZone",function(a){t(c.agent.agentId,a,r(a[0],a[1]),function(){})}).addEvent("changeSliderTimeSeries",function(a){})}function r(a,b){return(b-a)/1e3/60}function s(){M.setDefaultStateLineColor(TimeSlider.EventColor[100==c.agent.status.state.code?TimeSlider.GREEN:TimeSlider.RED])}function t(a,b,d,e){function f(a){return h++,P.setLoading(20+16*h),h>=5&&(P.stopLoading(),g&&O.showError("There is some error."),e()),!a.errorCode&&!a.status||(g=!0,!1)}var g=!1,h=0,k={agentId:a,from:b[0],to:b[1],sampleRate:i.getSampleRate(d)};P.startLoading(),P.setLoading(20),j.getJVMChartData(k,function(a){f(a)&&(angular.isDefined(a.type)&&a.type&&(c.agent.jvmGcType=a.type),z(a))}),j.getCpuLoadChartData(k,function(a){f(a)&&A(a)}),j.getTPSChartData(k,function(a){f(a)&&B(a)}),j.getActiveTraceChartData(k,function(a){f(a)&&C(a)}),j.getDataSourceChartData(k,function(a){f(a)&&(Q=a,E())})}function u(a){P.startLoading(),P.setLoading(40),j.getAgentInfo({agentId:c.agent.agentId,timestamp:a},function(a){var b=c.agent.jvmGcType;P.setLoading(80),c.agent=a,c.agent.jvmGcType=b,c.currentServiceInfo=y(a),P.setLoading(100),P.stopLoading()})}function v(a){j.getEvent({agentId:c.agent.agentId,eventTimestamp:a.eventTimestamp,eventTypeCode:a.eventTypeCode},function(a){a.errorCode||a.status?O.showError("There is some error."):(c.eventInfo=a,c.showEventInfo=!0)})}function w(a){var b=a[0],c=a[1],d=TimeSlider.MAX_TIME_RANGE,e=c-b;if(e>d)return[c-d,c];var f=3*e;return f>d?[c-d,c]:[c-f,c]}function x(){N===!1&&(k.init("heap"),k.init("permGen"),k.init("cpuUsage"),k.init("tps"),k.init("activeThread"),k.init("dataSource"),N=!0)}function y(a){if(a.serverMetaData&&a.serverMetaData.serviceInfos)for(var b=a.serverMetaData.serviceInfos,c=0;c<b.length;++c)if(b[c].serviceLibs.length>0)return b[c]}function z(a){var b={id:"heap",title:"Heap Usage",line:[{id:"JVM_MEMORY_HEAP_USED",key:"Used",isFgc:!1},{id:"JVM_MEMORY_HEAP_MAX",key:"Max",isFgc:!1},{id:"fgc",key:"FGC",isFgc:!0}]},d={id:"nonheap",title:"PermGen Usage",line:[{id:"JVM_MEMORY_NON_HEAP_USED",key:"Used",isFgc:!1},{id:"JVM_MEMORY_NON_HEAP_MAX",key:"Max",isFgc:!1},{id:"fgc",key:"FGC",isFgc:!0}]};c.memoryGroup=[b,d],c.$broadcast("jvmMemoryChartDirective.initAndRenderWithData.forHeap",i.parseMemoryChartDataForAmcharts(b,a),"100%","270px"),c.$broadcast("jvmMemoryChartDirective.initAndRenderWithData.forNonHeap",i.parseMemoryChartDataForAmcharts(d,a),"100%","270px")}function A(a){var b={id:"cpuLoad",title:"JVM/System Cpu Usage",isAvailable:!1};c.cpuLoadChart=b,c.$broadcast("cpuLoadChartDirective.initAndRenderWithData.forCpuLoad",i.parseCpuLoadChartDataForAmcharts(b,a),"100%","270px")}function B(a){var b={id:"tps",title:"Transactions Per Second",isAvailable:!1};c.tpsChart=b,c.$broadcast("tpsChartDirective.initAndRenderWithData.forTps",i.parseTpsChartDataForAmcharts(b,a),"100%","270px")}function C(a){var b={id:"activeTrace",title:"Active Thread",isAvailable:!1};c.activeTraceChart=b,c.$broadcast("activeTraceChartDirective.initAndRenderWithData.forActiveTrace",i.parseActiveTraceChartDataForAmcharts(b,a),"100%","270px")}function D(a,b,c,d,e,f,g){var h=0===arguments.length;n.find(".ds-active-avg").html(h?"-":a),n.find(".ds-active-max").html(h?"-":b),n.find(".ds-total-max").html(h?"-":c),n.find(".ds-id").html(h?"-":d),n.find(".ds-type").html(h?"-":e),n.find(".ds-database-name").html(h?"-":f),n.find(".ds-jdbc-url").html(h?"-":g)}function E(){c.dataSourceChartCheckedKeys={};var a={id:"dataSource",title:"Data Source",isAvailable:!1};c.dataSourceChartKeys=Q.map(function(a,b){var d=R+a.id;return c.dataSourceChartCheckedKeys[d]=b<30,{display:a.databaseName?a.databaseName:a.id,value:d}}),c.dataSourceChartDescription=a,c.$broadcast("dsChartDirective.initAndRenderWithData.forDataSource",i.parseDataSourceChartDataForAmcharts(a,Q,R),c.dataSourceChartCheckedKeys,"100%","270px")}function F(a,b){for(var c=parseInt(a.split("_")[1]),d=0;d<Q.length;d++){var e=Q[d];e.id==c&&D(e.charts.ACTIVE_CONNECTION_SIZE.points[b].avgYVal,e.charts.ACTIVE_CONNECTION_SIZE.points[b].maxYVal,e.charts.MAX_CONNECTION_SIZE.points[b].maxYVal,e.id,e.serviceType,e.databaseName,e.jdbcUrl)}}function G(a,b){j.getEventList({agentId:a,from:b[0],to:b[1]},function(a){a.errorCode||a.status?O.showError("There is some error."):M.addEventData(a)})}function H(a,b){c.cpuLoadChart.isAvailable&&c.$broadcast("cpuLoadChartDirective.showCursorAt.forCpuLoad",b.index)}function I(a,b){c.tpsChart.isAvailable&&c.$broadcast("tpsChartDirective.showCursorAt.forTps",b.index)}function J(a,b){c.activeTraceChart.isAvailable&&c.$broadcast("activeTraceChartDirective.showCursorAt.forActiveTrace",b.index)}function K(a,b){c.dataSourceChartDescription.isAvailable&&c.$broadcast("dsChartDirective.showCursorAt.forDataSource",b.index)}function L(a,b){p(c.selectTime),q(a,b),s(),G(c.agent.agentId,b||w(a))}b.ID+=e.getRandomNum(),c.agent={},c.hasAgentData=!1,c.showEventInfo=!1,c.showDetail=!1,c.selectTime=-1,c.selectedDSIndex=0,c.enableDataSourceChart=d.get("showInspectorDataSource")===!0;var M=null,N=!1,O=new g,P=new h,Q=[],R="source_";c.dataSourceChartKeys=[],c.dataSourceChartCheckedKeys=[],c.checkChecked=function(a){return c.dataSourceChartCheckedKeys[a]},c.changeDataSource=function(a){var b=a.target.tagName.toUpperCase();"INPUT"===b&&c.$broadcast("dsChartDirective.toggleGraph.forDataSource",a.target.value,a.target.checked)},c.selectAllDataSource=function(){for(var a in c.dataSourceChartCheckedKeys)c.dataSourceChartCheckedKeys[a]=!0;c.dataSourceChartKeys=c.dataSourceChartKeys.map(function(a){return{display:a.display,value:a.value}}),c.$broadcast("dsChartDirective.toggleGraphAll.forDataSource")},c.hasDataSource=function(){return 0!==Q.length&&Q[0].id!==-1},c.emptyDataSource=function(){return 0!==Q.length&&Q[0].id===-1},c.toggleSourceSelectLayer=function(){n.find("#data-source-chart .type-select-layer").toggle()},c.toggleHelp=function(){a("._wrongApp").popover({title:"<span class='label label-info'>"+f.getApplicationName()+"</span> <span class='glyphicon glyphicon-resize-horizontal'></span> <span class='label label-info'>"+c.agent.applicationName+"</span>",content:m.inspector.wrongApp.replace(/\{\{application1\}\}/g,f.getApplicationName()).replace(/\{\{application2\}\}/g,c.agent.applicationName).replace(/\{\{agentId\}\}/g,c.agent.agentId),html:!0}).popover("toggle")},c.isSameApplication=function(){return c.agent.applicationName===f.getApplicationName()},c.formatDate=function(a){return moment(a).format("YYYY.MM.DD HH:mm:ss")},c.hideEventInfo=function(){c.showEventInfo=!1},c.movePrev=function(){M.movePrev(),G(c.agent.agentId,M.getSliderTimeSeries())},c.moveNext=function(){M.moveNext(),G(c.agent.agentId,M.getSliderTimeSeries())},c.moveHead=function(){M.moveHead(),G(c.agent.agentId,M.getSliderTimeSeries())},c.zoomInTimeSlider=function(){M.zoomIn()},c.zoomOutTimeSlider=function(){M.zoomOut(),G(c.agent.agentId,M.getSliderTimeSeries())},c.toggleShowDetail=function(b){l.send(l.CONST.INSPECTOR,l.CONST.CLK_SHOW_SERVER_TYPE_DETAIL),c.showDetail=!c.showDetail,c.showDetail===!0?a(".detailIndicator").animate({left:a(b.currentTarget).position().left}):a(".detailIndicator").css("left","0px")},c.hasDuplicate=function(a,b){for(var d=c.currentServiceInfo.serviceLibs.length,e=!1,f=0;f<d;f++)if(c.currentServiceInfo.serviceLibs[f]==a&&f!=b){e=!0;break}return e?"color:#F00":""},c.selectServiceInfo=function(a){a.serviceLibs.length>0&&(c.currentServiceInfo=a)},c.formatDate=function(a){return e.formatDate(a,"YYYY-MM-DD HH:mm:ss Z")},c.$on("down.changed.agent",function(a,d,g,h){if(b.ID!==d){if(e.isEmpty(g.agentId))return void(c.hasAgentData=!1);Q=[],c.dataSourceChartKeys=[],c.dataSourceChartCheckedKeys=[],D(),n.find(".type-select-layer").hide(),n.find(".ds-detail").hide(),c.showEventInfo=!1,c.hasAgentData=!0,c.agent=g,c.chartGroup=null,c.currentServiceInfo=y(g);var i,j,k=[];null===M||h?(k[0]=f.getQueryStartTime(),k[1]=f.getQueryEndTime(),j=f.getPeriod()):(k=M.getSelectionTimeSeries(),i=M.getSliderTimeSeries(),j=r(k[0],k[1])),c.selectTime===-1||h?c.selectTime=f.getQueryEndTime():c.selectTime!==f.getQueryEndTime()&&u(c.selectTime),t(g.agentId,k,j,function(){L(k,i)}),x()}}),c.$on("jvmMemoryChartDirective.cursorChanged.forHeap",function(a,b){c.$broadcast("jvmMemoryChart.showCursorAt.forNonHeap",b.index),H(a,b),I(a,b),J(a,b),K(a,b)}),c.$on("jvmMemoryChartDirective.cursorChanged.forNonHeap",function(a,b){c.$broadcast("jvmMemoryChartDirective.showCursorAt.forHeap",b.index),H(a,b),I(a,b),J(a,b),K(a,b)}),c.$on("cpuLoadChartDirective.cursorChanged.forCpuLoad",function(a,b){c.$broadcast("jvmMemoryChartDirective.showCursorAt.forHeap",b.index),c.$broadcast("jvmMemoryChartDirective.showCursorAt.forNonHeap",b.index),I(a,b),J(a,b),K(a,b)}),c.$on("tpsChartDirective.cursorChanged.forTps",function(a,b){c.$broadcast("jvmMemoryChartDirective.showCursorAt.forHeap",b.index),c.$broadcast("jvmMemoryChartDirective.showCursorAt.forNonHeap",b.index),H(a,b),J(a,b),K(a,b)}),c.$on("activeTraceChartDirective.cursorChanged.forActiveTrace",function(a,b){c.$broadcast("jvmMemoryChartDirective.showCursorAt.forHeap",b.index),c.$broadcast("jvmMemoryChartDirective.showCursorAt.forNonHeap",b.index),H(a,b),I(a,b),K(a,b)}),c.$on("dsChartDirective.cursorChanged.forDataSource",function(a,b,d){var e={index:d};F(b,d),c.$broadcast("jvmMemoryChartDirective.showCursorAt.forHeap",d),c.$broadcast("jvmMemoryChartDirective.showCursorAt.forNonHeap",d),H(a,e),I(a,e),J(a,e)})}}}])}(jQuery),function(){"use strict";pinpointApp.constant("timeSliderDirectiveConfig",{scaleCount:10}),pinpointApp.directive("timeSliderDirective",["timeSliderDirectiveConfig","$timeout","AnalyticsService",function(a,b,c){return{restrict:"EA",replace:!0,templateUrl:"features/timeSlider/timeSlider.html?v="+G_BUILD_TIME,link:function(d,e,f){function g(a){d.oTimeSliderVoService=a,d.oTimeSliderVoService.getReady()!==!1&&(b(function(){o.jslider({from:d.oTimeSliderVoService.getFrom(),to:d.oTimeSliderVoService.getTo(),scale:j(i()),skin:"round_plastic",calculate:function(a){return k(a)},beforeMouseDown:function(a,b){return!1},beforeMouseMove:function(a,b){return!1}}),e.find(".jslider-pointer-from").addClass("jslider-transition"),e.find(".jslider-bg .v").addClass("jslider-transition")},100),h())}function h(){d.oTimeSliderVoService.getCount()&&d.oTimeSliderVoService.getTotal()&&d.oTimeSliderVoService.getCount()>=d.oTimeSliderVoService.getTotal()&&(d.disableMore=!0)}function i(){var b=d.oTimeSliderVoService.getFrom(),c=d.oTimeSliderVoService.getTo(),e=c-b,f=e/(a.scaleCount-1),g=[];return _.times(a.scaleCount,function(a){g.push(b+f*a)}),g}function j(a){var b=[];return $.each(a,function(a,c){b.push(k(c))}),b}function k(a){return moment(a).format("HH:mm")}function l(a,b){o.jslider("value",a,b)}var m="true"===f.autoLoading,n=!1,o=e.find(".timeslider_input");d.oTimeSliderVoService=null,d.disableMore=!1,d.done=!1,d.more=function(){c.send(c.CONST.CALLSTACK,c.CONST.CLK_MORE),m?(n=!n,d.$emit("timeSliderDirective.changeLoadingStatus",n)):d.$emit("timeSliderDirective.moreClicked",d.oTimeSliderVoService)},d.showSlider=function(){return!!d.oTimeSliderVoService&&(d.oTimeSliderVoService.getInnerFrom()&&d.oTimeSliderVoService.getInnerTo())},d.showCount=function(){return!!d.oTimeSliderVoService&&(d.oTimeSliderVoService.getCount()&&d.oTimeSliderVoService.getTotal())},d.getButtonClass=function(){return d.disableMore?d.done?"":"wait":"active tada"},d.getButtonText=function(){return m?d.done?"Done":n?"Resume":"Pause":d.done?"Done":"More"},d.$on("timeSliderDirective.initialize",function(a,b){g(b),h()}),d.$on("timeSliderDirective.setInnerFromTo",function(a,b){d.oTimeSliderVoService=b,l(b.getInnerFrom(),b.getInnerTo()),h()}),d.getButtonStatus=function(){return m?d.done:d.disableMore},d.$on("timeSliderDirective.enableMore",function(a){d.disableMore=!1}),d.$on("timeSliderDirective.disableMore",function(a){d.disableMore=!0}),d.$on("timeSliderDirective.changeMoreToDone",function(a){d.done=!0}),d.$on("timeSliderDirective.changeDoneToMore",function(a){d.done=!1})}}}])}(),function(){"use strict";pinpointApp.directive("transactionTableDirective",["$window","helpContentTemplate","helpContentService","AnalyticsService","CommonUtilService",function(a,b,c,d,e){return{restrict:"EA",replace:!0,templateUrl:"features/transactionTable/transactionTable.html?v="+G_BUILD_TIME,link:function(f,g,h){var i,j,k,l=!1;f.transactionList=[],f.currentTransaction=null,f.transactionReverse=!1,i=function(){f.transactionList=[]},j=function(a){f.transactionList.length>0?(f.transactionOrderBy="",f.transactionReverse=!1,g.find("table tbody tr:last-child")[0].scrollIntoView(!0)):(f.transactionOrderBy="elapsed",f.transactionReverse=!0),f.transactionList=f.transactionList.concat(a),k(),g.find('[data-toggle="tooltip"]').tooltip("destroy").tooltip()},k=function(){var a=1;angular.forEach(f.transactionList,function(b,c){b.index=a++})},f.traceByApplication=function(a){l!==!0&&(d.send(d.CONST.CALLSTACK,d.CONST.CLK_TRANSACTION),f.currentTransaction=a,f.$emit("transactionTableDirective.applicationSelected",a))},f.openTransactionView=function(b){a.open("#/transactionView/"+b.agentId+"/"+b.traceId+"/"+b.collectorAcceptTime+"/"+b.spanId)},f.transactionOrder=function(a){f.transactionOrderBy===a?f.transactionReverse=!f.transactionReverse:f.transactionReverse=!1,d.send(d.CONST.CALLSTACK,d.CONST.ST_+a.charAt(0).toUpperCase()+a.substring(1),f.transactionReverse?d.CONST.DESCENDING:d.CONST.ASCENDING),f.transactionOrderBy=a},f.formatDate=function(a){return e.formatDate(a,"MM/DD HH:mm:ss SSS")},f.$on("transactionTableDirective.appendTransactionList",function(a,b){j(b)}),f.$on("transactionTableDirective.completedDetailPageLoad",function(){l=!1}),f.$on("transactionTableDirective.clear",function(a){i()}),f.initTooltipster=function(){jQuery(".neloTooltip").tooltipster({content:function(){return b(c.transactionTable.log)},position:"bottom",trigger:"click",interactive:!0})}}}}])}(),function(a){"use strict";pinpointApp.directive("timelineDirective",["AnalyticsService",function(b){return{restrict:"EA",replace:!0,templateUrl:"features/timeline/timeline.html?v="+G_BUILD_TIME,link:function(c,d,e){var f,g,h,i,j,k=["#66CCFF","#FFCCFF","#66CC00","#FFCC33","#669999","#FF9999","#6666FF","#FF6633","#66FFCC","#006666","#FFFF00","#66CCCC","#FFCCCC","#6699FF","#FF99FF","#669900","#FF9933","#66FFFF","#996600","#66FF00"],l=[],m=new InfiniteCircularScroll({scroller:a(d),wrapper:a(d).find("div"),elementHeight:21,template:['<div class="timeline-bar">','<div class="clickable-bar">','<div class="timeline-bar-frame">',"<span>",'<span class="before" style="position:absolute;text-align:right;white-space:nowrap;left:-70px;display:none;"><span class="glyphicon glyphicon-resize-horizontal" aria-hidden="true"></span> <span class="startTime"></span>ms</span>','<span class="nameType"></span>','<span class="after" style="white-space:nowrap;display:none;">( <span class="glyphicon glyphicon-resize-horizontal" aria-hidden="true"></span> <span class="startTime"></span>ms )</span>',"</span>","</div>","</div>","</div>"].join("")});m.renderFunc(function(a,b,d){var e=o(d);a[b==this._selectedRow?"addClass":"removeClass"]("timeline-bar-selected").find("div.clickable-bar").css({width:p(d)+"px",backgroundColor:n(d[c.key.applicationName]),marginLeft:e+"px"}).find("span.nameType").html(d[c.key.applicationName]+"/"+d[c.key.apiType]+"("+(d[c.key.end]-d[c.key.begin])+"ms)"),e>=68?a.find("span.before").show().end().find("span.after").hide().end().find("span.before .startTime").html(q(d)):a.find("span.before").hide().end().find("span.after").show().end().find("span.after .startTime").html(q(d))}),g=function(){var a=[];return angular.forEach(c.timeline.callStack,function(b){b[c.key.isMethod]&&!b[c.key.excludeFromTimeline]&&""!==b[c.key.service]&&a.push(b)}),a},f=function(b){c.timeline=b,c.key=b.callStackIndex,c.barRatio=1e3/(b.callStack[0][c.key.end]-b.callStack[0][c.key.begin]),c.newCallStacks=g(),m.source(c.newCallStacks).viewAreaHeight(a(d).parentsUntil("div.wrapper").height()-70).selectedRow(-1,angular.noop).reset(),c.maxHeight=m.contentsAreaHeight(),i=0,c.$digest()};var n=function(a){var b=l.indexOf(a);return b==-1&&(l.push(a),b=l.length-1),k[b>=k.length?0:b]},o=function(a){return(a[c.key.begin]-c.timeline.callStackStart)*c.barRatio+.9},p=function(a){return(a[c.key.end]-a[c.key.begin])*c.barRatio+.9},q=function(a){return a[c.key.begin]-c.timeline.callStackStart};a(d).on("click",".clickable-bar",function(){b.send(b.CONST.CALLSTACK,b.CONST.CLK_CALL),c.$emit("transactionDetail.selectDistributedCallFlowRow",c.newCallStacks[parseInt(a(this).parent().attr("data-index"))][6])}),a(d).on("mouseenter",".timeline-bar-frame",function(b){a(this).parent().css({"box-shadow":"6px 6px 2px -2px rgba(0,0,0,0.75)","font-weight":"bold"})}),a(d).on("mouseleave",".timeline-bar-frame",function(b){a(this).parent().css({"box-shadow":"none","font-weight":"normal"})}),c.$on("timelineDirective.initialize",function(a,b){f(b)}),c.$on("timelineDirective.resize",function(b){m.resize(a(d).parentsUntil("div.wrapper").height()-70)}),c.$on("timelineDirective.searchCall",function(a,b,d){var e=h(i,-1,b);e==-1?0===i?c.$emit("transactionDetail.searchActionResult","No call took longer than "+b+"ms."):(e=h(0,i,b),e==-1?c.$emit("transactionDetail.searchActionResult","No call took longer than "+b+"ms."):j(e,"Loop")):j(e,"")}),h=function(a,b,d){return m.searchRow(a,b,function(a){return a[c.key.end]-a[c.key.begin]>=d})},j=function(a,b){m.selectedRow(a,function(a){this.$wrapper.find("div[data-index="+this._selectedRow+"]").removeClass("timeline-bar-selected"),this.$wrapper.find("div[data-index="+a+"]").addClass("timeline-bar-selected")}).moveByRow(a),i=a+1,c.$emit("transactionDetail.searchActionResult",b)}}}}])}(jQuery),function(){"use strict";pinpointApp.constant("agentChartGroupConfig",{POINTS_TIMESTAMP:0,POINTS_MIN:1,POINTS_MAX:2,POINTS_AVG:3}),pinpointApp.directive("agentChartGroupDirective",["agentChartGroupConfig","$timeout","AgentDaoService","AnalyticsService",function(a,b,c,d){
return{restrict:"EA",replace:!0,templateUrl:"features/agentChartGroup/agentChartGroup.html?v="+G_BUILD_TIME,scope:{namespace:"@"},link:function(a,b,e){var f,g,h,i,j,k,l,m;a.showChartGroup=!1,h=function(e){f={Heap:!1,PermGen:!1,CpuLoad:!1},g=null,a.showChartGroup=!0,a.$digest(),c.getAgentStat(e,function(a,b){return a?void console.log("error",a):(f.Heap===!1&&i(b),void(g=b))}),b.tabs({activate:function(b,c){var e=c.newTab.text();return"Heap"==e?(d.send(d.CONST.MIXEDVIEW,d.CONST.CLK_HEAP),void(f.Heap===!1?i(g):a.$broadcast("jvmMemoryChartDirective.resize.forHeap_"+a.namespace))):"PermGen"==e?(d.send(d.CONST.MIXEDVIEW,d.CONST.CLK_PERM_GEN),void(f.PermGen===!1?j(g):a.$broadcast("jvmMemoryChartDirective.resize.forNonHeap_"+a.namespace))):"CpuLoad"==e?(d.send(d.CONST.MIXEDVIEW,d.CONST.CLK_CPU_LOAD),void(f.CpuLoad===!1?k(g):a.$broadcast("cpuLoadChartDirective.resize.forCpuLoad_"+a.namespace))):void 0}}),b.tabs("paging")},i=function(b){f.Heap=!0;var d={id:"heap",title:"Heap",span:"span12",line:[{id:"JVM_MEMORY_HEAP_USED",key:"Used",values:[],isFgc:!1},{id:"JVM_MEMORY_HEAP_MAX",key:"Max",values:[],isFgc:!1},{id:"fgc",key:"FGC",values:[],isFgc:!0}]};a.$broadcast("jvmMemoryChartDirective.initAndRenderWithData.forHeap_"+a.namespace,c.parseMemoryChartDataForAmcharts(d,b),"100%","100%")},j=function(b){f.PermGen=!0;var d={id:"nonheap",title:"PermGen",span:"span12",line:[{id:"JVM_MEMORY_NON_HEAP_USED",key:"Used",values:[],isFgc:!1},{id:"JVM_MEMORY_NON_HEAP_MAX",key:"Max",values:[],isFgc:!1},{id:"fgc",key:"FGC",values:[],isFgc:!0}]};a.$broadcast("jvmMemoryChartDirective.initAndRenderWithData.forNonHeap_"+a.namespace,c.parseMemoryChartDataForAmcharts(d,b),"100%","100%")},k=function(b){f.CpuLoad=!0;var d={id:"cpuLoad",title:"JVM/System Cpu Usage",span:"span12",isAvailable:!1};a.$broadcast("cpuLoadChartDirective.initAndRenderWithData.forCpuLoad_"+a.namespace,c.parseCpuLoadChartDataForAmcharts(d,b),"100%","100%")},l=function(b){f.Heap&&a.$broadcast("jvmMemoryChartDirective.showCursorAt.forHeap_"+a.namespace,b),f.PermGen&&a.$broadcast("jvmMemoryChartDirective.showCursorAt.forNonHeap_"+a.namespace,b),f.CpuLoad&&a.$broadcast("cpuLoadChartDirective.showCursorAt.forCpuLoad_"+a.namespace,b)},m=function(){f.Heap&&a.$broadcast("jvmMemoryChartDirective.resize.forHeap_"+a.namespace),f.PermGen&&a.$broadcast("jvmMemoryChartDirective.resize.forNonHeap_"+a.namespace),f.CpuLoad&&a.$broadcast("cpuLoadChartDirective.resize.forCpuLoad_"+a.namespace)},a.$on("agentChartGroupDirective.initialize."+a.namespace,function(a,b){h(b)}),a.$on("agentChartGroupDirective.showCursorAt."+a.namespace,function(a,b){l(b)}),a.$on("agentChartGroupDirective.resize."+a.namespace,function(a){m()})}}}])}(),function(){"use strict";pinpointApp.directive("sidebarTitleDirective",["$timeout","$rootScope","PreferenceService","AnalyticsService",function(a,b,c,d){return{restrict:"E",replace:!0,templateUrl:"features/sidebar/title/sidebarTitle.html?v="+G_BUILD_TIME,scope:{namespace:"@"},link:function(e,f,g){function h(a){if(e.currentAgent=c.getAgentAllStr(),"undefined"==typeof a||a.isAuthorized===!1)return void(e.agentList=[]);var b=[];if(a.serverList)for(var d in a.serverList){var f=a.serverList[d].instanceList;for(var g in f)b.push(g)}e.agentList=b}function i(b,c,d){l=c,m=d,e.isWas=!!angular.isDefined(c)&&(!!angular.isDefined(c.isWas)&&c.isWas),e.stImage=b.getImage(),e.stImageShow=!!b.getImage(),e.stTitle=b.getTitle(),e.stImage2=b.getImage2(),e.stImage2Show=!!b.getImage2(),e.stTitle2=b.getTitle2(),a(function(){f.find('[data-toggle="tooltip"]').tooltip("destroy").tooltip()}),j()}function j(){e.serverCount=0,e.errorServerCount=0;var a,b;if(angular.isUndefined(l.isAuthorized)||l.isAuthorized===!1)e.showServerListHtml=!1;else if(l.sourceHistogram){n=!1,e.showServerListHtml=!(!l.sourceHistogram||_.isEmpty(l.sourceHistogram)!==!1);for(a in l.sourceHistogram)e.serverCount++,l.sourceHistogram[a].Error>0&&e.errorServerCount++}else{n=!0,e.showServerListHtml=!(!l.serverList||_.isEmpty(l.serverList)!==!1);for(a in l.serverList){var c=l.serverList[a].instanceList;for(b in c)e.serverCount++,l.agentHistogram[c[b].name]&&l.agentHistogram[c[b].name].Error>0&&e.errorServerCount++}}}function k(){e.currentAgent=c.getAgentAllStr(),e.showServerListHtml=!1,e.stImage=!1,e.stImageShow=!1,e.stTitle=!1,e.stImage2=!1,e.stTitle2=!1,e.stImage2Show=!1,e.isWas=!1,e.agentList=[]}var l=null,m=null,n=!0;e.agentList=[],e.showServerListHtml=!1,e.serverCount=0,e.errorServerCount=0,a(function(){k()}),e.changeAgent=function(){d.send(d.CONST.INSPECTOR,d.CONST.CLK_CHANGE_AGENT_MAIN),b.$broadcast("changedCurrentAgent.forMain",e.currentAgent)},e.showServerList=function(){d.send(d.CONST.MAIN,d.CONST.CLK_SHOW_SERVER_LIST),b.$broadcast("serverListDirective.show",n,l,m)},e.$on("sidebarTitleDirective.initialize."+e.namespace,function(a,c,d,e){i(c,d,e),h(d),b.$broadcast("serverListDirective.setData",n,l,m)}),e.$on("sidebarTitleDirective.empty."+e.namespace,function(a){k()}),e.$on("infoDetail.showDetailInformationClicked",function(a,b,c){l=c,j()})}}}])}(),function(){"use strict";pinpointApp.directive("filterInformationDirective",["$filter","$base64",function(a,b){return{restrict:"EA",replace:!0,templateUrl:"features/sidebar/filter/filterInformation.html?v="+G_BUILD_TIME,scope:{namespace:"@"},link:function(c,d,e){var f,g;f=function(d){if(g(),d.getRequestUrlPattern()&&(c.urlPattern=b.decode(d.getRequestUrlPattern())),c.includeException=d.getIncludeException()?"Failed Only":"Success + Failed",angular.isNumber(d.getResponseFrom())&&d.getResponseTo()){var e=[];e.push(a("number")(d.getResponseFrom())),e.push("ms"),e.push("~"),"max"===d.getResponseTo()?e.push("30,000+"):e.push(a("number")(d.getResponseTo())),e.push("ms"),c.responseTime=e.join(" ")}var f=d.getFromAgentName(),h=d.getToAgentName();f||h?c.agentFilterInfo=(f||"all")+" -> "+(h||"all"):c.agentFilterInfo=!1},g=function(){c.urlPattern="none",c.responseTime="none",c.includeException="none"},c.$on("filterInformationDirective.initialize."+c.namespace,function(a,b){f(b)})}}}])}(),function(){"use strict";pinpointApp.directive("distributedCallFlowDirective",["$timeout","CommonAjaxService","CommonUtilService","SystemConfigurationService",function(a,b,c,d){return{restrict:"E",replace:!0,templateUrl:"features/distributedCallFlow/distributedCallFlow.html?v="+G_BUILD_TIME,scope:{namespace:"@"},link:function(e,f,g){var h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x;window.callStacks=[];var y=function(a){return a.replace(/</g,"&lt;").replace(/>/g,"$gt;")},z=function(a,b){return a?y(b):"<i style='color:#AAA;'>"+y(b)+"</i> <a href='"+d.get("securityGuideUrl")+"' target='_blank' style='color:#AAA;'><span class='glyphicon glyphicon-share'></span></a>"};q=function(a){var b=0,c=0,d="#";for(b=0,c=0;b<a.length;c=a.charCodeAt(b++)+((c<<5)-c));for(b=0,d="#";b<3;d+=("00"+(c>>8*b++&255).toString(16)).slice(-2));return d},m=function(a,b,c,d,e){var f=[],g=i.getItemById(e.id);j=g.agent?g.agent:j;var h=q(j),k=i.getIdxById(e.id),l="dcf-popover";if(g.hasException?l+=" has-exception":g.isMethod||(l+=" not-method"),f.push('<div class="'+l+'" data-container=".grid-canvas" data-toggle="popover" data-trigger="manual" data-placement="right" data-content="'+y(c)+'">'),f.push("<div style='position:absolute;top:0;left:0;bottom:0;width:5px;background-color:"+h+"'></div>"),f.push("<span style='display:inline-block;height:1px;width:"+15*e.indent+"px'></span>"),window.callStacks[k+1]&&window.callStacks[k+1].indent>window.callStacks[k].indent?e._collapsed?f.push(" <span class='toggle expand'></span>&nbsp;"):f.push(" <span class='toggle collapse'></span>&nbsp;"):f.push(" <span class='toggle'></span>&nbsp;"),g.hasException)f.push('<span class="glyphicon glyphicon-fire"></span>&nbsp;');else if(g.isMethod){var m=parseInt(g.methodType);switch(m){case 100:f.push('<i class="xi-shipping"></i>&nbsp;');break;case 200:f.push('<span class="glyphicon glyphicon-transfer"></span>&nbsp;');break;case 900:f.push('<i class="xi-info-triangle" style="color:#FF6600"></i>&nbsp;')}}else"SQL"===g.method?f.push('<button type="button" class="btn btn-default btn-xs btn-success sql" style="padding:0px 2px 0px 2px"><span class="glyphicon glyphicon-eye-open sql"></span></button>&nbsp;'):f.push('<span class="glyphicon glyphicon-info-sign"></span>&nbsp;');return f.push(z(e.isAuthorized,c)),f.push("</div>"),f.join("")},n=function(a){var b=!0;if(angular.isDefined(a.parent)&&null!==a.parent)for(var c=window.callStacks[a.parent];c;)c._collapsed&&(b=!1),c=window.callStacks[c.parent];return b},s=function(a,b,c,d,e){var f=[];return f.push('<div class="dcf-popover" data-container=".grid-canvas" data-toggle="popover" data-trigger="manual" data-placement="right" data-content="'+encodeURIComponent(c)+'">'),f.push(z(e.isAuthorized,c)),f.push("</div>"),f.join("")},t=function(a,b,c,d,e){if(c&&0!==c.length){var f=[];f.push('<a class="btn btn-default btn-xs"'),f.push('href="'),f.push(c),f.push('" target="_blank">');var g=i.getItemById(e.id),h=g.logButtonName;return f.push(h),f.push("</a>"),f.join("")}},p=function(a,b,d,e,f){return angular.isUndefined(d)||null===d?"":c.formatDate(d,"HH:mm:ss SSS")},r=function(a,b,c,d,e){if(angular.isUndefined(c)||null===c||""===c||0===c)return"";var f;return f="#5bc0de","<span class='percent-complete-bar' style='background:"+f+";width:"+c+"%'><span class='percent-complete-bar' style='background-color:#4343C8;width:"+e.execPer+"%;height:4px;float:left;margin-top:1px;'></span></span>"},o=function(a,b){var c=[],d=100/(b[0][a.end]-b[0][a.begin]);return angular.forEach(b,function(b,e){var f="undefined"==typeof b[a.isAuthorized]||b[a.isAuthorized];b[a.isFocused]&&(k=e),c.push({id:"id_"+e,isAuthorized:f,parent:b[a.parentId]?b[a.parentId]-1:null,indent:b[a.tab],method:b[a.title],argument:b[a.arguments],execTime:b[a.begin]>0?b[a.begin]:null,gapMs:b[a.gap],timeMs:b[a.elapsedTime],timePer:b[a.elapsedTime]?(b[a.end]-b[a.begin])*d+.9:null,"class":b[a.simpleClassName],methodType:b[a.methodType],apiType:b[a.apiType],agent:b[a.agent],applicationName:b[a.applicationName],hasException:b[a.hasException],isMethod:b[a.isMethod],logLink:b[a.logPageUrl],logButtonName:b[a.logButtonName],isFocused:b[a.isFocused],execMilli:b[a.executionMilliseconds],execPer:b[a.elapsedTime]&&b[a.executionMilliseconds]?parseInt(b[a.executionMilliseconds].replace(/,/gi,""))/parseInt(b[a.elapsedTime].replace(/,/gi,""))*100:0})}),c},l=function(c){window.callStacks=o(c.callStackIndex,c.callStack);var d={enableCellNavigation:!0,enableColumnReorder:!0,enableTextSelectionOnCells:!0,topPanelHeight:30,rowHeight:25};i=new Slick.Data.DataView({inlineFilters:!0}),i.beginUpdate(),i.setItems(window.callStacks),i.setFilter(n),i.getItemMetadata=function(a){var b=i.getItemByIdx(a),c={cssClasses:""};return b.hasException===!0&&(c.cssClasses+=" error-point"),b.isFocused===!0&&(c.cssClasses+=" entry-point"),null!==b.execTime&&(c.cssClasses+=" id_"+(a+1)),c},i.endUpdate();var g=[{id:"method",name:"Method",field:"method",width:400,formatter:m},{id:"argument",name:"Argument",field:"argument",width:300,formatter:s},{id:"exec-time",name:"Start Time",field:"execTime",width:90,formatter:p},{id:"gap-ms",name:"Gap(ms)",field:"gapMs",width:70,cssClass:"right-align"},{id:"time-ms",name:"Exec(ms)",field:"timeMs",width:70,cssClass:"right-align"},{id:"time-per",name:"Exec(%)",field:"timePer",width:100,formatter:r},{id:"exec-milli",name:"Self(ms)",field:"execMilli",width:75,cssClass:"right-align"},{id:"class",name:"Class",field:"class",width:120},{id:"api-type",name:"API",field:"apiType",width:90},{id:"agent",name:"Agent",field:"agent",width:130},{id:"application-name",name:"Application",field:"applicationName",width:150}];h=new Slick.Grid(f.get(0),i,g,d),h.setSelectionModel(new Slick.RowSelectionModel);var j=!0,l=!1;h.onClick.subscribe(function(c,d){var e;if($(c.target).hasClass("toggle")&&(e=i.getItem(d.row),e&&(e._collapsed?e._collapsed=!1:e._collapsed=!0,i.updateItem(e.id,e)),c.stopImmediatePropagation()),$(c.target).hasClass("sql")){e=i.getItem(d.row);var g=i.getItem(d.row+1),h="sql="+encodeURIComponent(e.argument);e.isAuthorized?angular.isDefined(g)&&"SQL-BindValue"===g.method?(h+="&bind="+encodeURIComponent(g.argument),b.getSQLBind("/sqlBind.pinpoint",h,function(a){$("#customLogPopup").find("h4").html("SQL").end().find("div.modal-body").html('<h4>Binded SQL <button class="btn btn-default btn-xs sql">Copy</button></h4><div style="position:absolute;left:10000px">'+a+'</div><pre class="prettyprint lang-sql" style="margin-top:0px">'+a.replace(/\t\t/g,"")+'</pre><hr><h4>Original SQL <button class="btn btn-default btn-xs sql">Copy</button></h4><div style="position:absolute;left:10000px">'+e.argument+'</div><pre class="prettyprint lang-sql" style="margin-top:0px">'+e.argument.replace(/\t\t/g,"")+'</pre><h4>SQL Bind Value <button class="btn btn-default btn-xs sql">Copy</button></h4><div style="position:absolute;left:10000px">'+g.argument+'</div><pre class="prettyprint lang-sql" style="margin-top:0px">'+g.argument+"</pre>").end().modal("show"),prettyPrint()})):($("#customLogPopup").find("h4").html("SQL").end().find("div.modal-body").html('<h4>Original SQL <button class="btn btn-default btn-xs sql">Copy</button></h4><div style="position:absolute;left:10000px">'+e.argument+'</div><pre class="prettyprint lang-sql" style="margin-top:0px">'+e.argument.replace(/\t\t/g,"")+"</pre>").end().modal("show"),prettyPrint()):$("#customLogPopup").find("h4").html("SQL").end().find("div.modal-body").html('<h4>Original SQL</h4><div style="margin-top:0px;padding:6px 10px;border-radius:4px;background-color:#C56A6A;color:#D7FBBA;">'+e.argument.replace(/\t\t/g,"")+"</div>").end().modal("show")}l||(l=a(function(){j&&f.find(".dcf-popover").each(function(){var a=$(this);a.data("popover")&&a.popover("hide")}),j=!0,l=!1},300))}),h.onDblClick.subscribe(function(a,b){j=!1,$(a.target).popover({content:function(){return decodeURIComponent(this.getAttribute("data-content"))}}).popover("toggle")}),h.onCellChange.subscribe(function(a,b){i.updateItem(b.item.id,b.item)}),h.onActiveCellChanged.subscribe(function(a,b){e.$emit("distributedCallFlowDirective.rowSelected."+e.namespace,b.grid.getDataItem(b.row))}),u=function(a){var b=i.getItem(a+1);return!(!b||a!==b.parent)},h.onKeyDown.subscribe(function(a,b){var c=i.getItem(b.row);if(37==a.which)if(u(b.row))c._collapsed=!0,i.updateItem(c.id,c);else{var d=i.getItem(b.row-1);d&&h.setActiveCell(b.row-1,0)}else if(39==a.which){if(c._collapsed)c._collapsed=!1;else{var e=i.getItem(b.row+1);e&&h.setActiveCell(b.row+1,0)}i.updateItem(c.id,c)}}),i.onRowCountChanged.subscribe(function(a,b){h.updateRowCount(),h.render()}),i.onRowsChanged.subscribe(function(a,b){h.invalidateRows(b.rows),h.render()}),a(function(){h.scrollRowToTop(k)})},$("#customLogPopup").on("click","button",function(){var a=document.createRange();a.selectNode($(this).parent().next().get(0)),window.getSelection().addRange(a);try{document.execCommand("copy")}catch(b){console.log("unable to copy :",b)}window.getSelection().removeAllRanges()}),e.$on("distributedCallFlowDirective.initialize."+e.namespace,function(a,b){l(b)}),e.$on("distributedCallFlowDirective.resize."+e.namespace,function(a){h&&h.resizeCanvas()}),e.$on("distributedCallFlowDirective.selectRow."+e.namespace,function(a,b){var c=b-1;h.setSelectedRows([c]),h.setActiveCell(c,0),h.scrollRowToTop(c)}),e.$on("distributedCallFlowDirective.searchCall."+e.namespace,function(a,b,c){var d=v(b,c);d==-1?c>0?(x(v(b,0)),e.$emit("transactionDetail.searchActionResult","Loop")):e.$emit("transactionDetail.searchActionResult","No call took longer than "+b+"ms."):(x(d),e.$emit("transactionDetail.searchActionResult",""))}),e.$on("distributedCallFlowDirective.searchArgument."+e.namespace,function(a,b,c){var d=w(b,c);d==-1?c>0?(x(w(b,0)),e.$emit("transactionDetail.searchActionResult","Loop")):e.$emit("transactionDetail.searchActionResult","There is no result.."):(x(d),e.$emit("transactionDetail.searchActionResult",""))}),v=function(a,b){for(var c=0,d=-1,e=0;e<window.callStacks.length;e++)if(parseInt(window.callStacks[e].execMilli.replace(/,/gi,""))>=a){if(c==b){d=e;break}c++}return d},w=function(a,b){for(var c=0,d=-1,e=0;e<window.callStacks.length;e++)if(window.callStacks[e].argument.indexOf(a)!==-1){if(c==b){d=e;break}c++}return d},x=function(a){h.setSelectedRows([a]),h.setActiveCell(a,0),h.scrollRowIntoView(a,!0)}}}}])}(),function(){"use strict";pinpointApp.constant("responseTimeChartDirectiveConfig",{myColors:["#2ca02c","#3c81fa","#f8c731","#f69124","#f53034"]}),pinpointApp.directive("responseTimeChartDirective",["responseTimeChartDirectiveConfig","$timeout","AnalyticsService","PreferenceService","CommonUtilService",function(a,b,c,d,e){d.getResponseTypeColor();return{template:"<div style='user-select:none;'></div>",replace:!0,restrict:"EA",scope:{namespace:"@"},link:function(a,b,d){function f(){k="responseTimeId-"+a.namespace,b.attr("id",k)}function g(a,c){b.css("width",a||"100%"),b.css("height",c||"150px")}function h(d,f,g){b.empty().append("<canvas>"),l=new Chart(b.find("canvas"),{type:"bar",data:{labels:d.keys,datasets:[{data:d.values,backgroundColor:["rgba(44, 160, 44, 0.2)","rgba(60, 129, 250, 0.3)","rgba(248, 199, 49, 0.4)","rgba(246, 145, 36, 0.6)","rgba(245, 48, 52, 0.6)"],borderColor:["rgba(120, 119, 121, 0.8)","rgba(120, 119, 121, 0.8)","rgba(120, 119, 121, 0.8)","rgba(120, 119, 121, 0.8)","rgba(120, 119, 121, 0.8)"],borderWidth:.5}]},options:{onClick:function(b,d){if(d.length>0){var e=d[0]._view.label;"Error"==e&&(c.send(c.CONST.MAIN,c.CONST.CLK_RESPONSE_GRAPH),a.$emit("responseTimeChartDirective.showErrorTransactionList",e)),f&&a.$emit("responseTimeChartDirective.itemClicked."+a.namespace,{responseTime:e,count:d[0]._chart.config.data.datasets[0].data[d[0]._index]})}b.preventDefault()},maintainAspectRatio:!1,legend:{display:!1},title:{text:"",display:!0,fontSize:8,padding:6},scales:{yAxes:[{gridLines:{color:"rgba(0, 0, 0, 0.1)",zeroLineColor:"rgba(0, 0, 0, 1)",zeroLineWidth:.5},ticks:{beginAtZero:!0,maxTicksLimit:3,callback:function(a){return a>=1e3?"    "+a/1e3+"k":"    "+a}}}],xAxes:[{gridLines:{color:"rgba(255, 255, 255, 0)",zeroLineColor:"rgba(0, 0, 0, 1)",zeroLineWidth:.5}}]},animation:{duration:0,onComplete:function(){var a=this.chart.ctx;a.font=Chart.helpers.fontString(Chart.defaults.global.defaultFontSize,"normal",Chart.defaults.global.defaultFontFamily),a.fillStyle=this.chart.config.options.defaultFontColor,a.textAlign="center",a.textBaseline="bottom",this.data.datasets.forEach(function(b){for(var c=0;c<b.data.length;c++){var d=b._meta[Object.keys(b._meta)[0]].data[c]._model;a.fillText(e.addComma(b.data[c]),d.x,d.y-5)}})}},hover:{animationDuration:0},tooltips:{enabled:!1}}})}function i(a){l.data.datasets[0].data=a.values,l.update()}function j(a){if("undefined"==typeof a||null===a)return{keys:["1s","3s","5s","Slow","Error"],values:[0,0,0,0,0]};var b={keys:[],values:[]};for(var c in a)b.keys.push(c),b.values.push(a[c]);return b}var k,l;a.$on("responseTimeChartDirective.initAndRenderWithData."+a.namespace,function(a,b,c,d,e,i){f(),g(c,d),h(j(b),e,i)}),a.$on("responseTimeChartDirective.updateData."+a.namespace,function(a,b){i(j(b))})}}}])}(),function(){"use strict";pinpointApp.constant("loadChartDirectiveConfig",{}),pinpointApp.directive("loadChartDirective",["loadChartDirectiveConfig","$timeout","AnalyticsService","PreferenceService","CommonUtilService",function(a,b,c,d,e){d.getResponseTypeColor();return{template:"<div style='text-align:center;user-select:none;'></div>",replace:!0,restrict:"EA",scope:{namespace:"@"},link:function(a,b,d){function f(){m="loadId-"+a.namespace,b.attr("id",m)}function g(a,c){b.css("width",a||"100%"),b.css("height",c||"220px")}function h(a,d){b.empty().append("<canvas>"),n=new Chart(b.find("canvas"),{type:"bar",data:{labels:a.labels,borderWidth:0,datasets:[{label:a.keyValues[0].key,data:a.keyValues[0].values,backgroundColor:"rgba(44, 160, 44, 0.2)",borderColor:"rgba(120, 119, 121, 0.8)",borderWidth:0},{label:a.keyValues[1].key,data:a.keyValues[1].values,backgroundColor:"rgba(60, 129, 250, 0.2)",borderColor:"rgba(120, 119, 121, 0.8)",borderWidth:0},{label:a.keyValues[2].key,data:a.keyValues[2].values,backgroundColor:"rgba(248, 199, 49, 0.2)",borderColor:"rgba(120, 119, 121, 0.8)",borderWidth:0},{label:a.keyValues[3].key,data:a.keyValues[3].values,backgroundColor:"rgba(246, 145, 36, 0.2)",borderColor:"rgba(120, 119, 121, 0.8)",borderWidth:0},{label:a.keyValues[4].key,data:a.keyValues[4].values,backgroundColor:"rgba(245, 48, 52, 0.2)",borderColor:"rgba(120, 119, 121, 0.8)",borderWidth:0}]},options:{onClick:function(){c.send(c.CONST.MAIN,c.CONST.CLK_LOAD_GRAPH)},maintainAspectRatio:!1,tooltips:{mode:"label",bodySpacing:6},scales:{yAxes:[{gridLines:{zeroLineColor:"rgba(0, 0, 0, 1)",zeroLineWidth:.5},ticks:{beginAtZero:!0,maxTicksLimit:5,callback:function(a){return a>=1e3?"   "+a/1e3+"k":a%1===0?i(""+a)+a:void 0}},stacked:!0}],xAxes:[{gridLines:{zeroLineColor:"rgba(0, 0, 0, 1)",zeroLineWidth:.5},ticks:{autoSkip:!0},categoryPercentage:1,barPercentage:1,stacked:!0,display:!0}]},animation:{duration:0},legend:{display:!0,labels:{boxWidth:20,padding:10}}}})}function i(a){var b="       ";return a.length>b.length?a:b.substr(0,b.length-a.length)}function j(){b.find("canvas").hide(),0===b.find("h4").length?b.append("<h4 style='padding-top:25%;text-align:center;'>No Data</h4>"):b.find("h4").show()}function k(a){angular.isUndefined(n)?0!==a.length&&h(a,!0):0===a.length?j():(b.find("h4").hide().end().find("canvas").show(),n.data.labels=a.labels,n.data.datasets[0].data=a.keyValues[0].values,n.data.datasets[1].data=a.keyValues[1].values,n.data.datasets[2].data=a.keyValues[2].values,n.data.datasets[3].data=a.keyValues[3].values,n.data.datasets[4].data=a.keyValues[4].values,n.update())}function l(a){if(angular.isUndefined(a))return[];for(var b={labels:[],keyValues:[]},c=!1,d=0;d<a.length;d++){for(var f=[],g=0;g<a[d].values.length;g++)c=!0,f.push(a[d].values[g][1]),0===d&&b.labels.push(e.formatDate(a[d].values[g][0],"MM-DD HH:mm"));b.keyValues.push({key:a[d].key,values:f})}return c?b:[]}var m,n;a.$on("loadChartDirective.initAndRenderWithData."+a.namespace,function(a,b,c,d,e){f(),g(c,d);var i=l(b);0===i.length?j():h(i,e)}),a.$on("loadChartDirective.updateData."+a.namespace,function(a,b){k(l(b))})}}}])}(),function(){"use strict";angular.module("pinpointApp").directive("jvmMemoryChartDirective",[function(){return{template:"<div></div>",replace:!0,restrict:"E",scope:{namespace:"@"},link:function(a,b,c){function d(){l="multipleValueAxesId-"+a.namespace,b.attr("id",l)}function e(){return""!==l}function f(a,c){a&&b.css("width",a),c&&b.css("height",c)}function g(a){k.dataProvider=a,k.validateData()}function h(b){var c={type:"serial",theme:"light",autoMargins:!1,marginTop:10,marginLeft:70,marginRight:70,marginBottom:40,legend:{useGraphSettings:!0,autoMargins:!1,align:"right",position:"top",valueWidth:70},usePrefixes:!0,dataProvider:b,valueAxes:[{id:"v1",gridAlpha:0,axisAlpha:1,position:"right",title:"Full GC (ms)",minimum:0},{id:"v2",gridAlpha:0,axisAlpha:1,position:"left",title:"Memory (bytes)",minimum:0}],graphs:[{valueAxis:"v2",balloonText:"[[value]]B",legendValueText:"[[value]]B",lineColor:"rgb(174, 199, 232)",title:"Max",valueField:"Max",fillAlphas:0,connect:!1},{valueAxis:"v2",balloonText:"[[value]]B",legendValueText:"[[value]]B",lineColor:"rgb(31, 119, 180)",fillColor:"rgb(31, 119, 180)",title:"Used",valueField:"Used",fillAlphas:.4,connect:!1},{valueAxis:"v1",balloonFunction:function(a,b){var c=a.serialDataItem.dataContext,d=c.FGCTime+"ms",e=c.FGCCount;return e>1&&(d+=" ("+e+")"),d},legendValueText:"[[value]]ms",lineColor:"#FF6600",title:"FGC",valueField:"FGCTime",type:"column",fillAlphas:.3,connect:!1}],categoryField:"time",categoryAxis:{axisColor:"#DADADA",startOnAxis:!0,gridPosition:"start",labelFunction:function(a){return a.replace(/\s/,"<br>").replace(/-/g,".").substring(2)}}};k=AmCharts.makeChart(l,c);var d=new AmCharts.ChartCursor({categoryBalloonAlpha:.7,fullWidth:!0,cursorAlpha:.1});d.addListener("changed",function(b){a.$emit("jvmMemoryChartDirective.cursorChanged."+a.namespace,b)}),k.addChartCursor(d)}function i(a){if(a&&angular.isNumber(a)&&k.dataProvider[a]&&k.dataProvider[a].time)try{k.chartCursor.showCursorAt(k.dataProvider[a].time)}catch(b){}else k.chartCursor.hideCursor()}function j(){k&&(k.validateNow(),k.validateSize())}var k,l="";a.$on("jvmMemoryChartDirective.initAndRenderWithData."+a.namespace,function(a,b,c,i){e()?g(b):(d(),f(c,i),h(b))}),a.$on("jvmMemoryChartDirective.showCursorAt."+a.namespace,function(a,b){i(b)}),a.$on("jvmMemoryChartDirective.resize."+a.namespace,function(a){j()})}}}])}(),function(){"use strict";pinpointApp.directive("dsChartDirective",[function(){return{template:"<div></div>",replace:!0,restrict:"E",scope:{namespace:"@"},link:function(a,b,c){function d(){n="multipleValueAxesId-"+a.namespace,b.attr("id",n)}function e(a,c){a&&b.css("width",a),c&&b.css("height",c)}function f(a,b,c){var d={type:"serial",theme:"light",autoMargins:!1,marginTop:10,marginLeft:70,marginRight:70,marginBottom:40,usePrefixes:!0,dataProvider:a,switchable:!0,valueAxes:[{id:"v1",gridAlpha:0,axisAlpha:1,position:"left",title:"Connection",maximum:Math.max(b,10),minimum:0}],graphs:[],chartCursor:{cursorColor:"#C10000",oneBalloonOnly:!0,listeners:[{event:"changed",method:function(a){a.mostCloseGraph&&a.index?g(a.mostCloseGraph.valueField,a.index):g("")}}]},categoryField:"time",categoryAxis:{axisColor:"#DADADA",startOnAxis:!0,gridPosition:"start",labelFunction:function(a){return a.replace(/\s/,"<br>").replace(/-/g,".").substring(2)}}},e=0;for(var f in a[0])if("time"!==f){var i=f.split("_");d.graphs.push({valueAxis:"v1",balloonFunction:function(){return""},lineColor:h(e++),title:i[1],valueField:f,fillAlphas:0,connect:!1,hidden:!c[f]})}m=AmCharts.makeChart(n,d)}function g(b,c){a.$emit("dsChartDirective.cursorChanged."+a.namespace,b,c)}function h(a){return a<o.length?o[a]:"#"+i()+i()+i()}function i(){var a=Math.floor(255*Math.random()).toString(16);return 1==a.length?"0"+a:a}function j(a){if(a&&angular.isNumber(a)&&m.dataProvider[a]&&m.dataProvider[a].time)try{m.chartCursor.showCursorAt(m.dataProvider[a].time)}catch(b){}else m.chartCursor.hideCursor()}function k(){m&&(m.validateNow(),m.validateSize())}function l(a){for(var b=0;b<m.graphs.length;b++)if(m.graphs[b].valueField===a)return m.graphs[b].id;return""}var m,n="",o=["#850901","#969755","#421416","#c8814b","#aa8735","#cd7af4","#f6546a","#1c1a1f","#127999","#b7ebd9","#f6546a","#bea87f","#d1b4b0","#e0d4ba","#0795d9","#43aa83","#09d05b","#c26e67","#ed7575","#96686a"];a.$on("dsChartDirective.initAndRenderWithData."+a.namespace,function(a,c,g,h,i){b.empty(),d(),e(h,i),f(c.data,c.max,g)}),a.$on("dsChartDirective.toggleGraph."+a.namespace,function(a,b,c){var d=l(b);""!==d&&m[c?"showGraph":"hideGraph"](m.getGraphById(d))}),a.$on("dsChartDirective.toggleGraphAll."+a.namespace,function(){for(var a=0;a<m.graphs.length;a++)m.showGraph(m.graphs[a])}),a.$on("dsChartDirective.showCursorAt."+a.namespace,function(a,b){j(b)}),a.$on("dsChartDirective.resize."+a.namespace,function(a){k()})}}}])}(),function(){"use strict";angular.module("pinpointApp").directive("cpuLoadChartDirective",[function(){return{template:"<div></div>",replace:!0,restrict:"E",scope:{namespace:"@"},link:function(a,b,c){function d(){l="multipleValueAxesId-"+a.namespace,b.attr("id",l)}function e(){return""!==l}function f(a,c){a&&b.css("width",a),c&&b.css("height",c)}function g(a){k.dataProvider=a,k.validateData()}function h(b){var c={type:"serial",theme:"light",autoMargins:!1,marginTop:10,marginLeft:70,marginRight:70,marginBottom:40,legend:{useGraphSettings:!0,autoMargins:!0,align:"right",position:"top",valueWidth:70},usePrefixes:!0,dataProvider:b,valueAxes:[{id:"v1",gridAlpha:0,axisAlpha:1,position:"left",title:"Cpu Usage (%)",maximum:100,minimum:0}],graphs:[{valueAxis:"v1",balloonText:"[[value]]%",legendValueText:"[[value]]%",lineColor:"rgb(31, 119, 180)",fillColor:"rgb(31, 119, 180)",title:"JVM",valueField:"jvmCpuLoad",fillAlphas:.4,connect:!1},{valueAxis:"v1",balloonText:"[[value]]%",legendValueText:"[[value]]%",lineColor:"rgb(174, 199, 232)",fillColor:"rgb(174, 199, 232)",title:"System",valueField:"systemCpuLoad",fillAlphas:.4,connect:!1},{valueAxis:"v1",showBalloon:!1,lineColor:"#FF6600",title:"Max",valueField:"maxCpuLoad",fillAlphas:0,visibleInLegend:!1}],categoryField:"time",categoryAxis:{axisColor:"#DADADA",startOnAxis:!0,gridPosition:"start",labelFunction:function(a){return a.replace(/\s/,"<br>").replace(/-/g,".").substring(2)}}};k=AmCharts.makeChart(l,c);var d=new AmCharts.ChartCursor({categoryBalloonAlpha:.7,fullWidth:!0,cursorAlpha:.1});d.addListener("changed",function(b){a.$emit("cpuLoadChartDirective.cursorChanged."+a.namespace,b)}),k.addChartCursor(d)}function i(a){if(a&&angular.isNumber(a)&&k.dataProvider[a]&&k.dataProvider[a].time)try{k.chartCursor.showCursorAt(k.dataProvider[a].time)}catch(b){}else k.chartCursor.hideCursor()}function j(){k&&(k.validateNow(),k.validateSize())}var k,l="";a.$on("cpuLoadChartDirective.initAndRenderWithData."+a.namespace,function(a,b,c,i){e()?g(b):(d(),f(c,i),h(b))}),a.$on("cpuLoadChartDirective.showCursorAt."+a.namespace,function(a,b){i(b)}),a.$on("cpuLoadChartDirective.resize."+a.namespace,function(a){j()})}}}])}(),function(){"use strict";angular.module("pinpointApp").directive("tpsChartDirective",[function(){return{template:"<div></div>",replace:!0,restrict:"E",scope:{namespace:"@"},link:function(a,b,c){function d(){l="multipleValueAxesId-"+a.namespace,b.attr("id",l)}function e(){return""!==l}function f(a,c){a&&b.css("width",a),c&&b.css("height",c)}function g(a){k.dataProvider=a,k.validateData()}function h(b){var c={type:"serial",theme:"light",autoMargins:!1,marginTop:10,marginLeft:70,marginRight:70,marginBottom:40,legend:{useGraphSettings:!0,autoMargins:!0,align:"right",position:"top",valueWidth:70},usePrefixes:!0,dataProvider:b,valueAxes:[{stackType:"regular",gridAlpha:0,axisAlpha:1,position:"left",title:"TPS",minimum:0}],graphs:[{balloonText:"Sampled Continuation : [[value]]",legendValueText:"[[value]]",lineColor:"rgb(214, 141, 8)",fillColor:"rgb(214, 141, 8)",title:"S.C",valueField:"sampledContinuationTps",fillAlphas:.4,connect:!1},{balloonText:"Sampled New : [[value]]",legendValueText:"[[value]]",lineColor:"rgb(252, 178, 65)",fillColor:"rgb(252, 178, 65)",title:"S.N",valueField:"sampledNewTps",fillAlphas:.4,connect:!1},{balloonText:"Unsampled Continuation : [[value]]",legendValueText:"[[value]]",lineColor:"rgb(90, 103, 166)",fillColor:"rgb(90, 103, 166)",title:"U.C",valueField:"unsampledContinuationTps",fillAlphas:.4,connect:!1},{balloonText:"Unsampled New : [[value]]",legendValueText:"[[value]]",lineColor:"rgb(160, 153, 255)",fillColor:"rgb(160, 153, 255)",title:"U.N",valueField:"unsampledNewTps",fillAlphas:.4,connect:!1},{balloonText:"Total : [[value]]",legendValueText:"[[value]]",lineColor:"rgba(31, 119, 180, 0)",fillColor:"rgba(31, 119, 180, 0)",title:"Total",valueField:"totalTps",fillAlphas:.4,connect:!1}],categoryField:"time",categoryAxis:{axisColor:"#DADADA",startOnAxis:!0,gridPosition:"start",labelFunction:function(a){return a.replace(/\s/,"<br>").replace(/-/g,".").substring(2)}}};k=AmCharts.makeChart(l,c);var d=new AmCharts.ChartCursor({categoryBalloonAlpha:.7,fullWidth:!0,cursorAlpha:.1});d.addListener("changed",function(b){a.$emit("tpsChartDirective.cursorChanged."+a.namespace,b)}),k.addChartCursor(d)}function i(a){if(a&&angular.isNumber(a)&&k.dataProvider[a]&&k.dataProvider[a].time)try{k.chartCursor.showCursorAt(k.dataProvider[a].time)}catch(b){}else k.chartCursor.hideCursor()}function j(){k&&(k.validateNow(),k.validateSize())}var k,l="";a.$on("tpsChartDirective.initAndRenderWithData."+a.namespace,function(a,b,c,i){e()?g(b):(d(),f(c,i),h(b))}),a.$on("tpsChartDirective.showCursorAt."+a.namespace,function(a,b){i(b)}),a.$on("tpsChartDirective.resize."+a.namespace,function(a){j()})}}}])}(),function(){"use strict";angular.module("pinpointApp").directive("activeTraceChartDirective",[function(){return{template:"<div></div>",
replace:!0,restrict:"E",scope:{namespace:"@"},link:function(a,b,c){function d(){l="multipleValueAxesId-"+a.namespace,b.attr("id",l)}function e(){return""!==l}function f(a,c){a&&b.css("width",a),c&&b.css("height",c)}function g(a){k.dataProvider=a,k.validateData()}function h(b){var c={type:"serial",theme:"light",autoMargins:!1,marginTop:10,marginLeft:70,marginRight:70,marginBottom:40,legend:{useGraphSettings:!0,autoMargins:!0,align:"right",position:"top",valueWidth:70},usePrefixes:!0,dataProvider:b,valueAxes:[{stackType:"regular",gridAlpha:0,axisAlpha:1,position:"left",title:"Active Thread",minimum:0}],graphs:[{balloonText:"[[description]] : [[value]]",legendValueText:"([[description]]) [[value]]",lineColor:"rgb(44, 160, 44)",fillColor:"rgb(44, 160, 44)",title:"Fast",descriptionField:"fastTitle",valueField:"fast",fillAlphas:.4,connect:!1},{balloonText:"[[description]] : [[value]]",legendValueText:"([[description]]) [[value]]",lineColor:"rgb(60, 129, 250)",fillColor:"rgb(60, 129, 250)",title:"Normal",descriptionField:"normalTitle",valueField:"normal",fillAlphas:.4,connect:!1},{balloonText:"[[description]] : [[value]]",legendValueText:"([[description]]) [[value]]",lineColor:"rgb(248, 199, 49)",fillColor:"rgb(248, 199, 49)",title:"Slow",descriptionField:"slowTitle",valueField:"slow",fillAlphas:.4,connect:!1},{balloonText:"[[description]] : [[value]]",legendValueText:"([[description]]) [[value]]",lineColor:"rgb(246, 145, 36)",fillColor:"rgb(246, 145, 36)",title:"Very Slow",descriptionField:"verySlowTitle",valueField:"verySlow",fillAlphas:.4,connect:!1}],categoryField:"time",categoryAxis:{axisColor:"#DADADA",startOnAxis:!0,gridPosition:"start",labelFunction:function(a){return a.replace(/\s/,"<br>").replace(/-/g,".").substring(2)}}};k=AmCharts.makeChart(l,c);var d=new AmCharts.ChartCursor({categoryBalloonAlpha:.7,fullWidth:!0,cursorAlpha:.1});d.addListener("changed",function(b){a.$emit("activeTraceChartDirective.cursorChanged."+a.namespace,b)}),k.addChartCursor(d)}function i(a){if(a&&angular.isNumber(a)&&k.dataProvider[a]&&k.dataProvider[a].time)try{k.chartCursor.showCursorAt(k.dataProvider[a].time)}catch(b){}else k.chartCursor.hideCursor()}function j(){k&&(k.validateNow(),k.validateSize())}var k,l="";a.$on("activeTraceChartDirective.initAndRenderWithData."+a.namespace,function(a,b,c,i){e()?g(b):(d(),f(c,i),h(b))}),a.$on("activeTraceChartDirective.showCursorAt."+a.namespace,function(a,b){i(b)}),a.$on("activeTraceChartDirective.resize."+a.namespace,function(a){j()})}}}])}(),function(){"use strict";pinpointApp.directive("loadingDirective",["$timeout","$templateCache","$compile",function(a,b,c){return{restrict:"A",scope:{showLoading:"=loadingDirective",loadingMessage:"@"},link:function(a,d,e){a.loadingMessage||(a.loadingMessage="Please Wait...");var f=b.get(e.loadingDirective);"static"===d.css("position")&&d.css("position","relative"),d.append(c(f)(a))}}}])}(),function(a){"use strict";pinpointApp.constant("ConfigurationDirectiveConfig",{menu:[{view:"General",value:"general"},{view:"User Group",value:"userGroup"},{view:"Application",value:"application"},{view:"Help",value:"help"}]}),pinpointApp.directive("configurationDirective",["ConfigurationDirectiveConfig","$rootScope","$timeout","AnalyticsService",function(b,c,d,e){return{restrict:"EA",replace:!0,templateUrl:"features/configuration/configuration.html?v="+G_BUILD_TIME,scope:{namespace:"@"},link:function(d,f,g){function h(){i(),j.on("show.bs.modal",function(b){a(this).removeAttr("tabindex")}),j.on("hidden.bs.modal",function(a){l&&(c.$broadcast("navbarDirective.changedFavorite"),c.$broadcast("down.changed.favorite")),d.$broadcast("configuration.general.initClose")})}function i(){k=d.menuInfo[0].value}var j=a(f),k="",l=!1;d.menuInfo=b.menu,h(),d.isSelected=function(a){return k===a},d.selectMenu=function(a){k=a,d.$broadcast("configuration.selectMenu",k)},d.$on("configuration.open",function(){e.sendMain(e.CONST.CLK_CONFIGURATION),l=!1,j.modal("show")}),d.$on("up.changed.favorite",function(a){l=!0,a.stopPropagation()})}}}])}(jQuery),function(a){"use strict";pinpointApp.directive("generalDirective",["PreferenceService","UserConfigurationService","AnalyticsService","helpContentService",function(b,c,d,e){return{restrict:"EA",replace:!0,templateUrl:"features/configuration/general/general.html?v="+G_BUILD_TIME,scope:{namespace:"@"},link:function(f,g,h){function i(){n.empty();for(var a=0;a<f.savedFavoriteList.length;a++){var b=f.savedFavoriteList[a];j(b.applicationName,b.serviceType,b.code)}}function j(a,b,c){n.append('<li data-name="'+a+'" data-type="'+b+'" data-code="'+c+'"><img src="/images/icons/'+b+'.png" height="25px"/>'+a+'<button class="btn btn-danger btn-xs" style="float:right"><span class="glyphicon glyphicon-remove" aria-hidden="true"></span></button></li>')}function k(){f.depthList=b.getDepthList(),f.caller=c.getCaller(),f.callee=c.getCallee(),f.periodTime=b.getPeriodTime(),f.period=c.getPeriod(),c.getFavoriteList(function(a){f.savedFavoriteList=a,i()},!0),f.timezone=moment.tz.names(),f.userTimezone=c.getTimezone(),f.newUserTimezone=c.getTimezone(),m.find("div.general-warning").html(e.configuration.general.warning),m.find("div.favorite-empty").html(e.configuration.general.empty),p.on("hide.bs.dropdown",function(a){q===!1&&(a.preventDefault(),q=!1)}),p.on("click",function(){q=!1})}function l(a,b){d.sendMain(d.CONST.CLK_GENERAL_SET_FAVORITE),c.addFavorite(a,b,function(){c.getFavoriteList(function(c){f.savedFavoriteList=c,f.$emit("up.changed.favorite"),j(a.split("@")[0],a.split("@")[1],b)},!0)})}var m=g,n=m.find("ul.favorite-list"),o=h.name,p=m.find(".inout-bound"),q=!1;m[h.initState](),f.savedFavoriteList=[],k(),f.changeCaller=function(a){f.caller=a,d.sendMain(d.CONST.CLK_GENERAL_SET_DEPTH,f.caller),c.setCaller(f.caller)},f.changeCallee=function(a){f.callee=a,d.sendMain(d.CONST.CLK_GENERAL_SET_DEPTH,f.callee),c.setCallee(f.callee)},f.changePeriod=function(){d.sendMain(d.CONST.CLK_GENERAL_SET_PERIOD,f.period),c.setPeriod(f.period)},f.removeFavorite=function(b){var e=b.target.tagName.toLowerCase();if("button"===e||"span"===e){var g=a(b.target).parents("li");d.sendMain(d.CONST.CLK_GENERAL_SET_FAVORITE),c.removeFavorite(g.attr("data-name"),g.attr("data-type"),function(){c.getFavoriteList(function(a){f.savedFavoriteList=a,f.$emit("up.changed.favorite"),g.remove()},!0)})}},f.applyNReload=function(){d.sendMain(d.CONST.CLK_GENERAL_SET_TIMEZONE,f.newUserTimezone),c.setTimezone(f.newUserTimezone),window.location.reload(!0)},f.closeInOut=function(){q=!0,p.trigger("click.bs.dropdown")},f.$on("configuration.general.initClose",function(){f.closeInOut()}),f.$on("configuration.selectMenu",function(a,b){o===b?m.show():m.hide()}),f.$on("up.changed.application",function(a,b,c,d){l(c,d,b),a.stopPropagation()})}}}])}(jQuery),function(a){"use strict";pinpointApp.directive("userGroupContainerDirective",["SystemConfigurationService",function(a){return{restrict:"EA",replace:!0,templateUrl:"features/configuration/userGroup/userGroupContainer.html?v="+G_BUILD_TIME,link:function(b,c,d){var e=c,f=d.name;e[d.initState](),b.$on("configuration.selectMenu",function(c,d){f===d?(b.$broadcast("configuration.userGroup.show"),b.$broadcast("pinpointUser.load",a.get("userDepartment")),e.show()):e.hide()}),b.$on("userGroup.selectedUserGroup",function(a,c){b.$broadcast("groupMember.load",c),a.stopPropagation()}),b.$on("userGroup.selectedNone",function(a){b.$broadcast("groupMember.selectNone"),b.$broadcast("pinpointUser.selectNone"),a.stopPropagation()}),b.$on("groupMember.loaded",function(a,c){b.$broadcast("pinpointUser.checkSelectedMember",c),a.stopPropagation()}),b.$on("groupMember.removedMember",function(a,c,d){b.$broadcast("pinpointUser.changeSelectedMember",c,d),a.stopPropagation()}),b.$on("groupMember.sendCallbackAddedUser",function(a,c,d){b.$broadcast("pinpointUser.addUserCallback",c,d),a.stopPropagation()}),b.$on("pinpointUser.sendUserRemoved",function(a,c){b.$broadcast("groupMember.removeUser",c),a.stopPropagation()}),b.$on("pinpointUser.sendUserUpdated",function(a,c){b.$broadcast("groupMember.updateUser",c),a.stopPropagation()}),b.$on("pinpointUser.sendUserAdd",function(a,c){b.$broadcast("groupMember.addMember",c),a.stopPropagation()})}}}])}(jQuery),function(a){"use strict";pinpointApp.directive("userGroupDirective",["$timeout","helpContentService","AlarmUtilService","AnalyticsService","SystemConfigurationService",function(e,f,g,h,i){return{restrict:"EA",replace:!0,templateUrl:"features/configuration/userGroup/userGroup.html?v="+G_BUILD_TIME,scope:!0,link:function(e,f){function j(a){g.show(x),g.sendCRUD("getUserGroupList",a,function(a){t=e.userGroupList=a,g.setTotal(v,t.length),e.$emit("userGroup.selectedNone"),s=!0,g.hide(x)},o)}function k(a){a.find(b.DIV_NORMAL).hasClass("hide-me")||(n(),l(g.extractID(a)),e.$emit("userGroup.selectedUserGroup",a.find(".contents").html()))}function l(b){a("#"+e.prefix+q).removeClass("selected"),a("#"+e.prefix+b).addClass("selected"),q=b}function m(a){return g.extractID(r)===g.extractID(a)}function n(){c.cancelAction(g,y),d.cancelAction(g,r)}function o(a){w.find(".message").html(a.errorMessage),g.hide(x),g.show(w)}function p(){c.applyAction(g,y,x,i.get("userId"),function(a,b){t.push({id:b,number:a.number}),e.userGroupList=t,g.setTotal(v,t.length)},o)}e.prefix="userGroup_";var q="",r=null,s=!1,t=e.userGroupList=[],u=f,v=u.find(".total"),w=u.find(".some-alert"),x=u.find(".some-loading"),y=u.find(".new-group"),z=u.find(".some-list-search input");u.find(".some-list-content ul").on("click",function(b){var c=a(b.toElement||b.target),d=c.get(0).tagName.toLowerCase();"span"===d&&c.hasClass("contents")?k(c.parents("li")):"li"===d&&k(c)}),e.onSearch=function(){g.show(x),n();var c=a.trim(z.val());if(""===c)j();else{if(c.length<b.MIN_GROUPNAME_LENGTH)return z.val(""),void g.hide(x);h.send(h.CONST.MAIN,h.CONST.CLK_ALARM_FILTER_USER_GROUP),j({userGroupId:c})}},e.onAddUserGroup=function(){c.isOn()||(n(),c.onAction(g,y))},e.onCancelAddUserGroup=function(){c.cancelAction(g,y)},e.onApplyAddUserGroup=function(){p()},e.onRemoveUserGroup=function(a){var b=g.getNode(a,"li");null!==r&&m(b)===!1&&n(b),r=b,d.onAction(g,r)},e.onCancelRemoveUserGroup=function(){d.cancelAction(g,r)},e.onApplyRemoveUserGroup=function(){d.applyAction(g,r,x,i.get("userId"),function(a){for(var b=0;b<t.length;b++)if(t[b].id==a){t.splice(b,1);break}e.$apply(function(){e.userGroupList=t}),g.setTotal(v,t.length)},o)},e.onSearchKeydown=function(a){13==a.keyCode?e.onSearch():27==a.keyCode&&(z.val(""),a.stopPropagation())},e.onAddUserGroupKeydown=function(a){13==a.keyCode?p():27==a.keyCode&&(c.cancelAction(g,y),a.stopPropagation())},e.onCloseAlert=function(){g.hide(w)},e.$on("configuration.userGroup.show",function(){s===!1&&j()})}}}]);var b={MIN_GROUP_NAME_LENGTH:3,NEW_GROUP:"New Group",EXIST_A_SAME:"Exist a same group name",ENTER_AT_LEAST:"Enter at least 3 letters to search",CANNOT_BE_USED_GUEST:"The name 'guest' can not be used.",DIV_EDIT:"div._edit",DIV_NORMAL:"div._normal",DIV_REMOVE:"div._remove"},c={_bIng:!1,isOn:function(){return this._bIng},onAction:function(a,b){this._bIng=!0,a.show(b),b.find("input").val("").focus()},cancelAction:function(a,c){this._bIng===!0&&(this._bIng=!1,a.hide(c),c.removeClass("blink-blink").find("input").attr("placeholder",b.NEW_GROUP).val(""))},applyAction:function(a,d,e,f,g,h){a.show(e);var i=d.find("input").val();return"guest"===i.trim()?(a.hide(e),void d.addClass("blink-blink").find("input").attr("placeholder",b.CANNOT_BE_USED_GUEST).val("").focus()):i.length<b.MIN_GROUP_NAME_LENGTH?(a.hide(e),void d.addClass("blink-blink").find("input").attr("placeholder",b.ENTER_AT_LEAST).val("").focus()):void a.sendCRUD("createUserGroup",{id:i,userId:f},function(b){g(b,i),c.cancelAction(a,d),a.hide(e)},function(a){h(a)})}},d={_bIng:!1,onAction:function(a,c){this._bIng=!0,c.addClass("remove"),a.hide(c.find(b.DIV_NORMAL)),a.show(c.find(b.DIV_REMOVE))},cancelAction:function(a,c){this._bIng===!0&&(c.removeClass("remove"),a.hide(c.find(b.DIV_REMOVE)),a.show(c.find(b.DIV_NORMAL)),this._bIng=!1)},applyAction:function(a,b,c,d,e,f){a.show(c);var g=this,h=b.find(".contents").html();a.sendCRUD("removeUserGroup",{id:h,userId:d},function(){g.cancelAction(a,b),e(h),a.hide(c)},function(a){f(a)})}}}(jQuery),function(a){"use strict";pinpointApp.directive("groupMemberDirective",["$timeout","helpContentTemplate","helpContentService","AlarmUtilService","AnalyticsService",function(e,f,g,h,i){return{restrict:"EA",replace:!0,templateUrl:"features/configuration/userGroup/groupMember.html?v="+G_BUILD_TIME,scope:!0,link:function(e,f){function g(){d.cancelAction(h,w)}function j(a){u.find(".message").html(a.errorMessage),h.hide(t),h.show(u)}function k(){x=[],e.groupMemberList=[],h.setTotal(s,x.length)}function l(b){return a("#"+e.prefix+b).length>0}function m(a){h.show(t),h.sendCRUD("getGroupMemberListInGroup",{userGroupId:v},function(a){x=a,e.groupMemberList=x,h.setTotal(s,x.length),h.hide(t),e.$emit("groupMember.loaded",x)},j)}function n(a){return h.extractID(w)===h.extractID(a)}function o(a){for(var b=0;b<x.length;b++)if(x[b].memberId==a){x.splice(b,1);break}e.$apply(function(){e.groupMemberList=x}),e.$emit("groupMember.removedMember",x,a),h.setTotal(s,x.length)}function p(a){for(var b=0;b<x.length;b++)if(x[b].memberId==a.userId){x[b].name=a.name,x[b].department=a.department;break}e.groupMemberList=x}e.prefix="groupMember_",e.groupMemberList=[];var q=a(f),r=q.find(".some-guide"),s=q.find(".total"),t=q.find(".some-loading"),u=q.find(".some-alert"),v="",w=null,x=[];e.onRemoveGroupMember=function(a){null!==w&&n(h.getNode(a,"li"))===!1&&g(),w=h.getNode(a,"li"),d.onAction(h,w)},e.onApplyRemoveGroupMember=function(){d.applyAction(h,v,w,t,function(a){o(a)},j)},e.onCancelRemoveGroupMember=function(){d.cancelAction(h,w)},e.onSortGroupMember=function(){if(""!==v){g();for(var a=[],b=x.length-1,c=0,d=b;d>=0;c++,d--)a[c]=x[d];x=a,e.groupMemberList=x}},e.onCloseAlert=function(){h.closeAlert(u,t)},e.canSort=function(){return""===v?"0.5":"1.0"},e.$on("groupMember.load",function(a,b,c){v=b,g(),k(),h.hide(r),m(c)}),e.$on("groupMember.selectNone",function(){v="",k(),h.show(r)}),e.$on("groupMember.addMember",function(a,d){return""===v?void e.$emit("groupMember.sendCallbackAddedUser",!1):(g(),void c.applyAction(h,d,v,t,l,function(a){i.send(i.CONST.MAIN,i.CONST.CLK_ALARM_ADD_USER),x.push({name:a.name,memberId:a.userId,department:a.department,userGroupId:v}),e.groupMemberList=x,e.$emit("groupMember.sendCallbackAddedUser",!0,a.userId),h.setTotal(s,x.length),h.hide(t)},function(){j({message:b.EXIST_A_SAME}),e.$emit("groupMember.sendCallbackAddedUser",!1,d.userId)}))}),e.$on("groupMember.updateUser",function(a,b){l(b.userId)&&(g(),p(b))}),e.$on("groupMember.removeUser",function(a,b){l(b)&&(g(),o(b))})}}}]);var b={EXIST_A_SAME:"Exist a same user in the lists.",DIV_NORMAL:"div._normal",DIV_EDIT:"div._edit",DIV_REMOVE:"div._remove"},c={applyAction:function(a,b,c,d,e,f,g){a.show(d),e(b.userId)===!0?g():a.sendCRUD("addMemberInGroup",{userGroupId:c,memberId:b.userId},function(c){f(b),a.hide(d)},function(a){g(a)})}},d={_bIng:!1,onAction:function(a,c){this._bIng=!0,c.addClass("remove"),a.hide(c.find(b.DIV_NORMAL)),a.show(c.find(b.DIV_REMOVE))},cancelAction:function(a,c){this._bIng===!0&&(c.removeClass("remove"),a.hide(c.find(b.DIV_REMOVE)),a.show(c.find(b.DIV_NORMAL)),this._bIng=!1)},applyAction:function(a,b,c,d,e,f){a.show(d);var g=this,h=a.extractID(c);a.sendCRUD("removeMemberInGroup",{userGroupId:b,memberId:h},function(b){e(h),g.cancelAction(a,c),a.hide(d)},function(a){f(a)})}}}(jQuery),function(a){"use strict";function b(a){var b=/^(([^<>()[\]\.,;:\s@\"]+(\.[^<>()[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i;return b.test(a)}function c(a){var b=/^\d+$/;return b.test(a)}function d(b){a.each(b,function(a,b){b.addClass("blink-blink")})}function e(b){a.each(b,function(a,b){b.removeClass("blink-blink")})}pinpointApp.directive("pinpointUserDirective",["helpContentTemplate","helpContentService","AlarmUtilService","AnalyticsService","SystemConfigurationService",function(b,c,d,e,j){return{restrict:"EA",replace:!0,templateUrl:"features/configuration/userGroup/pinpointUser.html?v="+G_BUILD_TIME,scope:!0,link:function(b,c){function k(){g.cancelAction(E,r),h.cancelAction(d,D),i.cancelAction(d,E,D,r)}function l(a){B.find(".message").html(a.errorMessage),d.hide(A),d.show(B)}function m(c){d.show(A),d.sendCRUD("getPinpointUserList",c||{},function(c){a.each(c,function(a,b){b.has=!1}),G=b.pinpointUserList=c,d.setTotal(z,n()),d.hide(A)},l)}function n(){return H.length+"/"+G.length}function o(a){for(var b=0;b<G.length;b++)if(G[b].userId==a)return G[b]}function p(){for(var b=y.find("ul"),c=E.length-1,e=c;e>=0;e--)b.prepend(E[e]);E[0].find("input").removeAttr("disabled"),d.hide(E[c].find(f.DIV_EDIT)),d.show(E[c].find(f.DIV_ADD)),a.each(E,function(a,b){d.show(b)}),E[0].find("input").focus()}function q(b){for(var c=E.length-1,e=c;e>=0;e--)D.after(E[e]);E[0].find("input").val(b.userId),E[1].find("input").val(b.name),E[2].find("input").val(b.department),E[3].find("input").val(b.phoneNumber),E[4].find("input").val(b.email),E[0].find("input").attr("disabled","disabled"),d.hide(E[c].find(f.DIV_ADD)),d.show(E[c].find(f.DIV_EDIT)),a.each(E,function(a,b){d.show(b)}),E[0].find("input").focus()}function r(){a.each(E,function(a,b){d.hide(b),b.find("input").val("")})}function s(){var b=a.trim(E[0].find("input").val()),c=a.trim(E[1].find("input").val()),d=a.trim(E[2].find("input").val()),e=a.trim(E[3].find("input").val()),f=a.trim(E[4].find("input").val()),g={userId:b,name:c,department:d,phoneNumber:e,email:f};return g}function t(a){return d.extractID(D)===d.extractID(a)}function u(a){for(var b=0;b<G.length;b++)if(G[b].userId===a)return G[b];return null}function v(){g.applyAction(d,s(),E,A,function(a){e.send(e.CONST.MAIN,e.CONST.CLK_ALARM_CREATE_PINPOINT_USER),G.push(a),b.pinpointUserList=G,r(),d.setTotal(z,n())},l)}function w(b){H=b,a.each(G,function(a,b){b.has=!1;for(var c=0;c<H.length;c++)if(b.userId==H[c].memberId){b.has=!0;break}})}b.prefix="pinpointUser_";var x=a(c),y=x.find(".wrapper"),z=x.find(".total"),A=x.find(".some-loading"),B=x.find(".some-alert"),C=x.find(".some-list-search input"),D=null,E=x.find(".new-group").toArray().map(function(b){return a(b)}),F=!1,G=[],H=[];b.pinpointUserList=[],b.getCreateAllow=function(){return j.get("editUserInfo")},b.onAddPinpointUser=function(){g.isOn()||(k(),g.onAction(function(){p()}))},b.onCancelAddPinpointUser=function(){g.cancelAction(E,function(){r()})},b.onApplyAddPinpointUser=function(){v()},b.onRemovePinpointUser=function(a){var b=d.getNode(a,"li");null!==D&&t(b)===!1&&k(b),D=b,h.onAction(d,D)},b.onCancelRemovePinpointUser=function(){h.cancelAction(d,D)},b.onApplyRemovePinpointUser=function(){h.applyAction(d,D,A,function(a){for(var c=0;c<G.length;c++)if(G[c].userId==a){G.splice(c,1);break}b.$apply(function(){b.pinpointUserList=G}),d.setTotal(z,n()),b.$emit("pinpointUser.sendUserRemoved",a)},l)},b.onUpdatePinpointUser=function(a){k(),D=d.getNode(a,"li"),i.onAction(d,D,function(a){q(u(a))})},b.onCancelUpdatePinpointUser=function(){i.cancelAction(d,E,D,r)},b.onApplyUpdatePinpointUser=function(){i.applyAction(d,s(),E,D,A,function(a){for(var c=0;c<G.length;c++)if(G[c].userId==a.userId){G[c].name=a.name,G[c].department=a.department,G[c].phoneNumber=a.phone,G[c].email=a.email;break}b.pinpointUserList=G,r(),b.$emit("pinpointUser.sendUserUpdated",a)},l)},b.onEditPinpointUserKeydown=function(a){13==a.keyCode?g.isOn()?b.onApplyAddPinpointUser():b.onApplyUpdatePinpointUser():27==a.keyCode&&(g.isOn()?b.onCancelAddPinpointUser():b.onCancelUpdatePinpointUser(),a.stopPropagation())},b.onSearchKeydown=function(a){13==a.keyCode?b.onSearch():27==a.keyCode&&a.stopPropagation()},b.onSearch=function(){k();var b=a.trim(C.val());return b.length<f.MIN_SEARCH_LENGTH?void C.focus():(d.show(A),e.send(e.CONST.MAIN,e.CONST.CLK_ALARM_FILTER_PINPOINT_USER),void m({searchKey:b}))},b.checkUser=function(a){d.show(A);var c=d.getNode(a,"li"),e=d.extractID(c);c.find("input").get(0).checked?b.$emit("pinpointUser.sendUserAdd",o(e)):b.$emit("pinpointUser.sendUserRemoved",e)},b.$on("pinpointUser.changeSelectedMember",function(a,c){w(c),b.$apply(function(){b.pinpointUserList=G}),d.setTotal(z,n())}),b.$on("pinpointUser.checkSelectedMember",function(a,c){y.removeClass("_disable-check"),w(c),b.pinpointUserList=G,d.setTotal(z,n())}),b.$on("pinpointUser.selectNone",function(){y.addClass("_disable-check"),a.each(G,function(a,b){b.has=!1}),H=[],b.pinpointUserList=G,d.setTotal(z,n())}),b.$on("pinpointUser.addUserCallback",function(a,c,e){if(c===!1)for(var f=0;f<b.pinpointUserList.length;f++)b.pinpointUserList[f].userId===e&&(b.pinpointUserList[f].has=!1);d.setTotal(z,n()),d.hide(A)}),b.onCloseAlert=function(){d.closeAlert(B,A)},b.$on("pinpointUser.load",function(a,b){k(),F===!1&&m(angular.isUndefined(b)?{}:{searchKey:b})})}}}]);var f={MIN_SEARCH_LENGTH:2,INPUT_USER_ID_AND_NAME:"Input user id and name",INPUT_PHONE_OR_EMAIL:"Input phone number or email",YOU_CAN_ONLY_INPUT_NUMBERS:"You can only input numbers",INVALID_EMAIL_FORMAT:"Invalid email format.",DIV_NORMAL:"div._normal",DIV_REMOVE:"div._remove",DIV_ADD:"div._add",DIV_EDIT:"div._edit"},g={_bIng:!1,isOn:function(){return this._bIng},onAction:function(a){this._bIng=!0,a()},cancelAction:function(a,b){this._bIng===!0&&(e(a),b(),this._bIng=!1)},applyAction:function(a,e,g,h,i,j){var k=this;return a.show(h),""===e.userId||""===e.name?(d(g),void j({errorMessage:f.INPUT_USER_ID_AND_NAME})):""===e.phoneNumber&&""===e.email?(d(g),void j({errorMessage:f.INPUT_PHONE_OR_EMAIL})):""!==e.phoneNumber&&c(e.phoneNumber)===!1?(d(g),void j({errorMessage:f.YOU_CAN_ONLY_INPUT_NUMBERS})):""!==e.email&&b(e.email)===!1?(d(g),void j({errorMessage:f.INVALID_EMAIL_FORMAT})):void a.sendCRUD("createPinpointUser",e,function(b){e.number=b.number,i(e),k.cancelAction(g,function(){}),a.hide(h)},function(a){j(a)})}},h={_bIng:!1,isOn:function(){return this._bIng},onAction:function(a,b){this._bIng=!0,b.addClass("remove"),a.hide(b.find(f.DIV_NORMAL)),a.show(b.find(f.DIV_REMOVE))},cancelAction:function(a,b){this._bIng===!0&&(b.removeClass("remove"),a.hide(b.find(f.DIV_REMOVE)),a.show(b.find(f.DIV_NORMAL)),this._bIng=!1)},applyAction:function(a,b,c,d,e){var f=this,g=a.extractID(b);a.sendCRUD("removePinpointUser",{userId:g},function(e){d(g),f.cancelAction(a,b),a.hide(c)},function(a){e(a)})}},i={_bIng:!1,isOn:function(){return this._bIng},onAction:function(a,b,c){this._bIng=!0,a.hide(b),c(a.extractID(b))},cancelAction:function(a,b,c,d){this._bIng===!0&&(d(),e(b),a.show(c),this._bIng=!1)},applyAction:function(a,e,g,h,i,j,k){var l=this;return a.show(i),""===e.name?(d(g),void k({errorMessage:f.INPUT_USER_ID_AND_NAME})):""===e.phoneNumber&&""===e.email?(d(g),void k({errorMessage:f.INPUT_PHONE_OR_EMAIL})):""!==e.phoneNumber&&c(e.phoneNumber)===!1?(d(g),void k({errorMessage:f.YOU_CAN_ONLY_INPUT_NUMBERS})):""!==e.email&&b(e.email)===!1?(d(g),void k({errorMessage:f.INVALID_EMAIL_FORMAT})):void a.sendCRUD("updatePinpointUser",e,function(b){l.cancelAction(a,g,h,function(){}),j(e),a.hide(i)},function(a){k(a)})}}}(jQuery),function(a){"use strict";pinpointApp.directive("applicationConfigDirective",[function(){return{restrict:"EA",replace:!0,templateUrl:"features/configuration/application/applicationConfig.html?v="+G_BUILD_TIME,link:function(a,b,c){var d=b,e=c.name,f=0;d[c.initState](),a.$on("configuration.selectMenu",function(b,c){e===c?(d.show(),a.$broadcast("applicationGroup.load")):(d.hide(),f=0)}),a.$on("applicationGroup.selectApp",function(b,c){a.$broadcast("applicationGroup.sub.load",c,f++),b.stopPropagation()})}}}])}(jQuery),function(a){"use strict";pinpointApp.directive("applicationGroupDirective",["CommonAjaxService",function(b){return{restrict:"EA",replace:!0,templateUrl:"features/configuration/application/applicationGroup.html?v="+G_BUILD_TIME,scope:!0,link:function(c,d,e){function f(){i.find("ul").on("click",function(b){var c=a(b.toElement||b.target),d=c.get(0).tagName.toLowerCase();"span"===d||"img"===d?g(c.parents("li")):"li"===d&&g(c)})}function g(a){null!==k&&k.removeClass("selected"),a.addClass("selected"),k=a,c.$emit("applicationGroup.selectApp",a.attr("id"))}function h(){b.getApplicationList(function(a){angular.isArray(a)===!1||0===a.length||(c.applicationList=a)},function(){})}var i=a(d),j=!1,k=null;c.applicationList=[],f(),c.getAppId=function(a){return a.applicationName+"@"+a.serviceType},c.$on("applicationGroup.load",function(){j===!1&&(h(),j=!0)})}}}])}(jQuery),function(a){"use strict";pinpointApp.directive("alarmRuleDirective",["AlarmUtilService","AnalyticsService",function(f,g){return{restrict:"EA",replace:!0,templateUrl:"features/configuration/application/alarmRule.html?v="+G_BUILD_TIME,scope:!0,link:function(h,i){function j(){c.cancelAction(y,r),d.cancelAction(f,A,r),e.cancelAction(f,A,y,r)}function k(a){return f.extractID(A)===f.extractID(a)}function l(a){z.find(".message").html(a.errorMessage),f.hide(x),f.show(z)}function m(){f.show(x),f.sendCRUD("getRuleList",{applicationId:B.split("@")[0]},function(a){C=!0,D=a,h.ruleList=a,f.hide(x)},l)}function n(){f.sendCRUD("getUserGroupList","",function(a){h.userGroupList=a},l)}function o(){h.ruleSets.length>1||f.sendCRUD("getRuleSet",{},function(a){h.ruleSets=a},l)}function p(){w.find("tbody").prepend(y[1]).prepend(y[0]),f.hide(y[0].find(b.DIV_EDIT)),f.show(y[0].find(b.DIV_ADD)),a.each(y,function(a,b){f.show(b)})}function q(c){f.hide(y[0].find(b.DIV_ADD)),f.show(y[0].find(b.DIV_EDIT)),y[0].find("select[name=rule]").val(c.checkerName),y[0].find("select[name=userGroup]").val(c.userGroupId),y[0].find("input[name=threshold]").val(c.threshold),y[0].find("select[name=type]").val(function(){return c.smsSend&&c.emailSend?"all":c.smsSend?"sms":c.emailSend?"email":""}()),y[1].find("input").val(c.notes),a.each(y,function(a,b){f.show(b)})}function r(){a.each(y,function(a,b){f.hide(b)}),y[0].find("select[name=rule]").val(""),y[0].find("select[name=userGroup]").val(""),y[0].find("input[name=threshold]").val("1"),y[0].find("select[name=type]").val("all"),y[1].find("input").val("")}function s(a){var b=y[0].find("select[name=type]").val(),c={applicationId:B.split("@")[0],serviceType:B.split("@")[1],userGroupId:y[0].find("select[name=userGroup]").val(),checkerName:y[0].find("select[name=rule]").val(),threshold:y[0].find("input[name=threshold]").val(),smsSend:"all"===b||"sms"===b,emailSend:"all"===b||"email"===b,notes:y[1].find("input").val()};return angular.isUndefined(a)===!1&&(c.ruleId=a),c}function t(a){for(var b=0;b<D.length;b++)if(D[b].ruleId==a)return D[b];return null}var u=a(i),v=u.find(".some-guide"),w=u.find(".wrapper"),x=u.find(".some-loading"),y=[u.find("tr._edit1"),u.find("tr._edit2")],z=u.find(".some-alert"),A=null,B="",C=!1,D=[];h.prefix="alarmRule_",h.ruleList=[],h.ruleSets=[],h.userGroupList=[],h.onAddAlarm=function(){""===B||c.isOn()||(j(),c.onAction(function(){p()}))},h.onApplyAddAlarm=function(){c.applyAction(f,s(),y,x,function(a,b){return f.hasDuplicateItem(D,function(c){return c.userGroupId===a&&c.checkerName===b})},function(a){g.sendMain(g.CONST.CLK_ALARM_CREATE_RULE),D.push(a),h.ruleList=D,r()},l)},h.onCancelAddAlarm=function(){c.cancelAction(y,r)},h.onRemoveAlarm=function(a){var b=f.getNode(a,"tr");null!==A&&k(b)===!1&&j(b),A=b,d.onAction(f,A)},h.onCancelRemoveAlarm=function(){d.cancelAction(f,A)},h.onApplyRemoveAlarm=function(){d.applyAction(f,A,x,function(a){for(var b=0;b<D.length;b++)if(D[b].ruleId==a){D.splice(b,1);break}h.$apply(function(){h.ruleList=D})},l)},h.onUpdateAlarm=function(a){j(),A=f.getNode(a,"tr"),e.onAction(f,A,function(a){A.after(y[1]).after(y[0]),q(t(a))})},h.onCancelUpdateAlarm=function(){e.cancelAction(f,A,y,r)},h.onApplyUpdateAlarm=function(){e.applyAction(f,s(f.extractID(A)),y,A,x,function(a,b,c){return f.hasDuplicateItem(D,function(d){return d.userGroupId===b&&d.checkerName===c&&d.ruleId!=a})},function(a){r();for(var b=0;b<D.length;b++)D[b].ruleId==a.ruleId&&(D[b].checkerName=a.checkerName,D[b].userGroupId=a.userGroupId,D[b].threshold=a.threshold,D[b].smsSend=a.smsSend,D[b].emailSend=a.emailSend,D[b].notes=a.notes);h.ruleList=D},l)},h.onCaptureUpdateClick=function(b){if("SPAN"===b.target.tagName.toUpperCase()){var c=a(b.target);c.hasClass("update-confirm")?h.onApplyUpdateAlarm():c.hasClass("update-cancel")?h.onCancelUpdateAlarm():c.hasClass("add-confirm")?h.onApplyAddAlarm():c.hasClass("add-cancel")&&h.onCancelAddAlarm()}},h.$on("applicationGroup.sub.load",function(a,b,c){B=b,j(),f.hide(v),m(!0),0===c&&n(),o()}),h.onCloseAlert=function(){f.hide(z)},h.getType=function(a){return a.smsSend&&a.emailSend?"Email, SMS":a.smsSend===!1&&a.emailSend===!1?"":a.smsSend?"SMS":a.emailSend?"Email":void 0}}}}]);var b={SELECT_USER_GROUP_OR_RULE:"Select user group or rule.",EXIST_A_SAME:"Exist a same rule set in the list",DIV_NORMAL:"div._normal",DIV_REMOVE:"div._remove",DIV_ADD:"div._add",DIV_EDIT:"div._edit"},c={_bIng:!1,isOn:function(){return this._bIng},onAction:function(a){this._bIng=!0,a()},cancelAction:function(b,c){this._bIng===!0&&(a.each(b,function(a,b){b.removeClass("blink-blink")}),c(),this._bIng=!1)},applyAction:function(c,d,e,f,g,h,i){var j=this;return c.show(f),""===d.userGroupId||""===d.checkerName?(a.each(e,function(a,b){b.addClass("blink-blink")}),void i({errorMessage:b.SELECT_USER_GROUP_OR_RULE})):g(d.userGroupId,d.checkerName)?(a.each(e,function(a,b){b.addClass("blink-blink")}),void i({errorMessage:b.EXIST_A_SAME})):void c.sendCRUD("createRule",d,function(a){d.ruleId=a.ruleId,h(d),j.cancelAction(e,function(){}),c.hide(f)},function(a){i(a)})}},d={_bIng:!1,onAction:function(a,c){this._bIng=!0,c.addClass("remove"),a.hide(c.find(b.DIV_NORMAL)),a.show(c.find(b.DIV_REMOVE))},cancelAction:function(a,c){this._bIng===!0&&(c.removeClass("remove"),a.hide(c.find(b.DIV_REMOVE)),a.show(c.find(b.DIV_NORMAL)),this._bIng=!1)},applyAction:function(a,b,c,d,e){var f=this;a.show(c);var g=a.extractID(b);a.sendCRUD("removeRule",{ruleId:g},function(e){f.cancelAction(a,b),d(g),a.hide(c)},function(a){e(a)})}},e={_bIng:!1,onAction:function(a,b,c){this._bIng=!0,a.hide(b),c(a.extractID(b))},cancelAction:function(b,c,d,e){this._bIng===!0&&(e(),a.each(d,function(a,b){b.removeClass("blink-blink")}),b.show(c),this._bIng=!1)},applyAction:function(c,d,e,f,g,h,i,j){var k=this;return c.show(g),h(d.ruleId,d.applicationId,d.checkerName)?(a.each(e,function(a,b){b.addClass("blink-blink")}),void j({errorMessage:b.EXIST_A_SAME})):void c.sendCRUD("updateRule",d,function(a){k.cancelAction(c,f,e,function(){}),i(d),c.hide(g)},function(a){j(a)})}}}(jQuery),function(a){"use strict";pinpointApp.directive("helpDirective",[function(){return{restrict:"EA",replace:!0,templateUrl:"features/configuration/help/help.html?v="+G_BUILD_TIME,scope:{namespace:"@"},link:function(a,b,c){var d=b,e=c.name;d[c.initState](),a.enHelpList=[{title:"Quick start guide",link:"https://github.com/naver/pinpoint/blob/master/quickstart/README.md"},{title:"Technical Overview of Pinpoint",link:"https://github.com/naver/pinpoint/wiki/Technical-Overview-Of-Pinpoint"},{title:"Using Pinpont with Docker",link:"http://yous.be/2015/05/05/using-pinpoint-with-docker/"},{title:"Notes on Jetty Plugin for Pinpoint ",link:"https://github.com/cijung/Docs/blob/master/JettyPluginNotes.md"},{title:"About Alarm",link:"https://github.com/naver/pinpoint/blob/master/doc/alarm.md#alarm"}],a.koHelpList=[{title:"Pinpoint 개발자가 작성한 Pinpoint 기술문서",link:"http://helloworld.naver.com/helloworld/1194202"},{title:"소개 및 설치 가이드",link:"http://dev2.prompt.co.kr/33"},{title:"Pinpoint 사용 경험",link:"http://www.barney.pe.kr/blog/category/development/page/2/"},{title:"설치 가이드 동영상 강좌 1",link:"https://www.youtube.com/watch?v=hrvKaEaDEGs"},{title:"설치 가이드 동영상 강좌 2",link:"https://www.youtube.com/watch?v=fliKPGHGXK4"},{title:"AWS Ubuntu 14.04 설치 가이드 ",link:"http://lky1001.tistory.com/132"},{title:"Alarm 가이드",link:"https://github.com/naver/pinpoint/blob/master/doc/alarm.md#alarm-1"}],a.$on("configuration.selectMenu",function(a,b){e===b?d.show():d.hide();
})}}}])}(jQuery),function(a){"use strict";pinpointApp.constant("ThreadDumpInfoLayerDirectiveConfig",{ACTIVE_THREAD_LIGHT_DUMP_URL:"agent/activeThreadLightDump.pinpoint",ACTIVE_THREAD_DUMP_URL:"agent/activeThreadDump.pinpoint",PADDING_WIDTH:5,PADDING_HEIGHT:15}),pinpointApp.directive("threadDumpInfoLayerDirective",["ThreadDumpInfoLayerDirectiveConfig","$routeParams","$timeout","$http","$window","CommonUtilService","CommonAjaxService",function(b,c,d,e,f,g,h){return{restrict:"EA",replace:!0,templateUrl:"features/threadDumpInfoLayer/threadDumpInfoLayer.html?v="+G_BUILD_TIME,scope:{namespace:"@"},link:function(c,d){function h(a,b){b===!0&&a.ing===!0&&a.obj&&a.obj.abort&&a.obj.abort(),a.obj=null,a.ing=!1}function i(){t.obj=e({url:b.ACTIVE_THREAD_LIGHT_DUMP_URL+"?applicationName="+w+"&agentId="+v,method:"GET"}).then(function(a){a.data.code&&a.data.code===-1?q.find("> span").hide().end().find(".when-has-message").show().find("span").html(a.data.message):(c.threadList=a.data.message.threadDumpData,0===c.threadList.length&&q.find(".when-has-message").hide().end().find("> span").show()),s.val(""),o.hide(),n.show(),h(t)},function(){o.hide()}),t.ing=!0}function j(){var a=m(),c=parseInt(b.PADDING_WIDTH*a.docWidth/100),d=parseInt(b.PADDING_HEIGHT*a.docHeight/100),e=a.docWidth-2*c,f=a.docHeight-2*d,g=parseInt((f-a.titleHeight)/2);n.css({top:d,left:c,width:e,height:f}),p.css({height:g-a.tableHeadHeight-a.margin}),q.css({height:g}),r.css({height:g})}function k(){n.find(".panel-heading").css("cursor","default").find("button").hide(),l()}function l(){var b=m(),d=parseInt((b.docHeight-b.titleHeight-b.navHeight)/2);n.css({top:b.navHeight+"px",left:"0px",width:"100%",height:"100%"}),p.css({height:d-b.tableHeadHeight-b.margin}),q.css({height:d}),r.css({height:d}),a(window).on("resize",function(){var a=m(),b=a.docHeight-a.titleHeight-a.navHeight-d-a.tableHeadHeight-a.margin;0===c.threadList.length?q.css({height:b+96}):p.css({height:b})})}function m(){return{docWidth:f.document.body.clientWidth,docHeight:f.document.body.clientHeight,navHeight:40,titleHeight:78,tableHeadHeight:67,margin:30}}var n=a(d),o=n.find("i"),p=n.find(".thread-list"),q=n.find(".panel-body"),r=n.find(".detail-message"),s=n.find("textarea"),t={obj:null,ing:!1},u={obj:null,ing:!1},v="",w="";c.threadList=[],c.sortType="-execTime",j(),c.$on("thread-dump-info-window.open",function(a,b,c){k(),w=b,v=c,i()}),c.$on("thread-dump-info-layer.open",function(a,b,c){h(t,!0),n.is(":visible")&&o.show(),w=b,v=c,i()}),c.$on("thread-dump-info-layer.close",function(){c.hideThreadDump()}),c.changeSortType=function(a){c.sortType=(c.sortType.indexOf(a)<=0?"-":"")+a},c.hideThreadDump=function(){h(t,!0),h(u,!0),n.hide(),o.hide(),s.val("")},c.loadDetailMessage=function(c){var d=a(a(c.target).parents("tr")[0]);d.parent().find(".selected").removeClass("selected").end().end().addClass("selected"),o.show(),h(u,!0),u.obj=e({url:b.ACTIVE_THREAD_DUMP_URL+"?applicationName="+w+"&agentId="+v+"&threadName="+d.find("td:nth-child(3)").html()+"&localTraceId="+d.attr("data-traceId"),method:"GET"}).then(function(a){var b="";b=a.data.message.threadDumpData.length>0?a.data.message.threadDumpData[0].detailMessage:"There is no message( may be completed )",s.val(b),h(u),o.hide()},function(){o.hide()}),u.ing=!0},c.formatDate=function(a){return g.formatDate(a,"MM/DD HH:mm:ss SSS")}}}}])}(jQuery),function(a){"use strict";pinpointApp.constant("RealtimeChartCtrlConfig",{sendPrefix:"applicationName=",keys:{CODE:"code",TYPE:"type",RESULT:"result",STATUS:"status",COMMAND:"command",MESSAGE:"message",TIME_STAMP:"timeStamp",PARAMETERS:"parameters",APPLICATION_NAME:"applicationName",ACTIVE_THREAD_COUNTS:"activeThreadCounts"},values:{PING:"PING",PONG:"PONG",REQUEST:"REQUEST",RESPONSE:"RESPONSE",ACTIVE_THREAD_COUNT:"activeThreadCount"},template:{agentChart:'<div class="agent-chart"><div></div><span class="glyphicon glyphicon-new-window"></span></div>',chartDirective:Handlebars.compile('<realtime-chart-directive timeout-max-count="{{timeoutMaxCount}}" chart-color="{{chartColor}}" xcount="{{xAxisCount}}" show-extra-info="{{showExtraInfo}}" request-label="requestLabelNames" namespace="{{namespace}}" width="{{width}}" height="{{height}}"></realtime-chart-directive>')},css:{borderWidth:2,height:180,navBarHeight:42,titleHeight:30},sumChart:{width:260,height:120},otherChart:{width:120,height:60},"const":{MIN_Y:10}}),pinpointApp.controller("RealtimeChartCtrl",["RealtimeChartCtrlConfig","$scope","$element","$location","$rootScope","$compile","$timeout","$window","$http","SystemConfigurationService","LocalStorageManagerService","UrlVoService","RealtimeWebsocketService","AnalyticsService","TooltipService",function(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){function q(){V=d.find("div.agent-sum-chart"),W=d.find("div.agent-sum-chart div:first-child span:first-child"),X=d.find("div.agent-sum-chart div:first-child span:last-child"),Y=d.find("div.agent-chart-list"),Z=d.find(".connection-message"),$=d.find(".glyphicon-pushpin"),Z.hide(),W.html(""),X.html("0")}function r(){if(t("sum")===!1){var a=c.$new();V.append(g(b.template.chartDirective({width:b.sumChart.width,height:b.sumChart.height,namespace:"sum",chartColor:"sumChartColor",xAxisCount:aa,showExtraInfo:"true",timeoutMaxCount:_}))(a)),ga.push(a),ha.sum=-1}}function s(){angular.isDefined(ha.sum)?(ha={},ha.sum=-1):ha={}}function t(a){return angular.isDefined(ha[a])}function u(d){var e=c.$new(),f=a(b.template.agentChart).append(g(b.template.chartDirective({width:b.otherChart.width,height:b.otherChart.height,namespace:fa.length,chartColor:"agentChartColor",xAxisCount:aa,showExtraInfo:"false",timeoutMaxCount:_}))(e));ga.push(c.$new()),Y.append(f),A(d,fa.length),fa.push(f)}function v(){n.open({onopen:function(a){I()},onmessage:function(a){w(a)},onclose:function(a){c.$apply(function(){M()})},ondelay:function(){n.close()},retry:function(){c.retryConnection()}})}function w(a){switch(Z.hide(),a[b.keys.TYPE]){case b.values.PING:n.send(na);break;case b.values.RESPONSE:var c=a[b.keys.RESULT];if(c[b.keys.APPLICATION_NAME]!==da)return;var d=c[b.keys.ACTIVE_THREAD_COUNTS],e=F(d);G(e),x(d,e,c[b.keys.TIME_STAMP])}}function x(a,d,e){var f=Math.max(H(),b["const"].MIN_Y),g=0,h=!0;for(var i in a)z(i,g),a[i][b.keys.CODE]===ba?(h=!1,c.$broadcast("realtimeChartDirective.onData."+ha[i],a[i][b.keys.STATUS],e,f,h)):c.$broadcast("realtimeChartDirective.onError."+ha[i],a[i],e,f),C(g),g++;D(g),c.$broadcast("realtimeChartDirective.onData.sum",d,e,f,h),X.html(g)}function y(a){return oa[b.keys.PARAMETERS][b.keys.APPLICATION_NAME]=a,JSON.stringify(oa)}function z(a,b){t(a)===!1&&(B(b)?A(a,b):u(a)),E(b,a)}function A(a,b){ha[a]=b}function B(a){return fa.length>a}function C(a){fa[a].show()}function D(a){for(var b=a;b<fa.length;b++)fa[b].hide()}function E(a,b){fa[a].find("div").attr("data-name",b).html(b)}function F(a){var c=[0,0,0,0];for(var d in a)a[d][b.keys.CODE]===ba&&jQuery.each(a[d][b.keys.STATUS],function(a,b){c[a]+=b});return c}function G(a){ia.push(a.reduce(function(a,b){return a+b})),ia.length>aa&&ia.shift()}function H(){return d3.max(ia,function(a){return a})}function I(){n.send(y(da))}function J(){n.isOpened()===!1?v():I(),ma=!0}function K(){ma=!1,n.stopReceive(y(""))}function L(){f.$broadcast("realtimeChartDirective.clear.sum"),a.each(fa,function(a,b){f.$broadcast("realtimeChartDirective.clear."+a),b.hide()}),a.each(ga,function(a,b){b.$destroy()}),ga.length=0,h(function(){V.find("svg").remove(),a.each(fa,function(a,b){b.remove()}),fa.length=0}),ha={}}function M(){Z.css("background-color","rgba(200, 200, 200, 0.9)"),Z.find("h4").css("color","red").html("Closed connection.<br/><br/>Select node again."),Z.find("button").show(),Z.show()}function N(){Z.css("background-color","rgba(138, 171, 136, 0.5)"),Z.find("h4").css("color","blue").html("Waiting Connection..."),Z.find("button").hide(),Z.show()}function O(){T(),d.css("top","initial").animate({left:0,bottom:-parseInt(l.getRealtimeLayerHeight()||b.css.height)},500,function(){})}function P(){var a=l.getRealtimeLayerHeight()||b.css.height;d.css("height",a),d.animate({bottom:0,left:0},500,function(){Y.css("height",a-b.css.titleHeight)})}function Q(){d.css("top","initial").innerWidth(d.parent().width()-b.css.borderWidth+"px")}function R(){$.css("color",ka?"red":"")}function S(){var a=e.absUrl(),b=a.indexOf(e.path());return a.substring(0,b)}function T(){f.$broadcast("thread-dump-info-layer.close")}function U(){K(),L(),Z.hide(),da="",ea="",W.html(da),X.html("0")}d=a(d);var V,W,X,Y,Z,$,_=10,aa=10,ba=0,ca="",da="",ea="",fa=[],ga=[],ha={},ia=[0],ja=!0,ka=!0,la=!1,ma=!0,na=function(){var a={};return a[b.keys.TYPE]=b.values.PONG,JSON.stringify(a)}(),oa=function(){var a={};return a[b.keys.TYPE]=b.values.REQUEST,a[b.keys.COMMAND]=b.values.ACTIVE_THREAD_COUNT,a[b.keys.PARAMETERS]={},a}(),pa=null;p.init("realtime"),c.sumChartColor=["rgba(44, 160, 44, 1)","rgba(60, 129, 250, 1)","rgba(248, 199, 49, 1)","rgba(246, 145, 36, 1)"],c.agentChartColor=["rgba(44, 160, 44, .8)","rgba(60, 129, 250, .8)","rgba(248, 199, 49, .8)","rgba(246, 145, 36, .8)"],c.requestLabelNames=["1s","3s","5s","Slow"],c.bInitialized=!1,a(document).on("visibilitychange",function(){if(m.isRealtime()!==!1)switch(document.visibilityState){case"hidden":pa=h(function(){n.close(),pa=null},6e4);break;case"visible":null!==pa?h.cancel(pa):c.retryConnection(),pa=null}}),q(),c.$on("realtimeChartController.close",function(){O();var a=ma;U(),ma=a,R()}),c.$on("realtimeChartController.initialize",function(a,b,d,e,f){if(T(),(ka!==!0||ca!==f)&&m.isRealtime()!==!1&&(la=!angular.isUndefined(b)&&b,d=angular.isUndefined(d)?"":d,e=angular.isUndefined(e)?"":e,ca=f,ja===!0&&(q(),ja=!1),k.get("showActiveThread")!==!1&&ma!==!1)){if(la===!1)return void O();s(),r(),Q(),c.bInitialized=!0,da=d,ea=e,W.html(da),P(),N(),J(),R()}}),c.retryConnection=function(){N(),J()},c.pin=function(){ka=!ka,o.send(o.CONST.MAIN,ka?o.CONST.CLK_REALTIME_CHART_PIN_ON:o.CONST.CLK_REALTIME_CHART_PIN_OFF),R()},c.showAgentInfo=function(b){if(k.get("showActiveThreadDump")===!0){var c=a(b.target);if(c.hasClass("agent-chart-list"))return;var d=c.parents(".agent-chart").find("div").attr("data-name"),e=l.getThreadDumpLayerOpenType();null===e||"window"===e?i.open(S()+"/threadDump/"+da+"@"+ea+"/"+d+"?"+Date.now().valueOf(),"Thread Dump Info","width=1280px,height=800px,menubar=no,toolbar=no,location=no,resizable=yes,scrollbars=no,status=no"):f.$broadcast("thread-dump-info-layer.open",da,d),o.send(o.CONST.MAIN,o.CONST.CLK_OPEN_THREAD_DUMP_LAYER)}},a(i).on("resize",function(){Q();var a=i.innerHeight-b.css.navBarHeight;d.resizable("option","maxHeight",a),parseInt(d.css("height"))>a&&a>b.css.height&&(d.css("height",a),Y.css("height",a-b.css.titleHeight),l.setRealtimeLayerHeight(a))}),d.resizable({minHeight:b.css.height,maxHeight:i.innerHeight-b.css.navBarHeight,handles:"n",resize:function(a,c){Y.css("height",c.size.height-b.css.titleHeight),l.setRealtimeLayerHeight(c.size.height)}})}])}(jQuery),function(){"use strict";pinpointApp.controller("MainCtrl",["filterConfig","$scope","$timeout","$routeParams","locationService","UrlVoService","NavbarVoService","$window","SidebarTitleVoService","filteredMapUtilService","$rootElement","SystemConfigurationService","AnalyticsService","PreferenceService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){m.send(m.CONST.MAIN_PAGE),m.sendMain(m.CONST.VERSION,l.get("version"));var o,p,q,r,s,t;b.hasScatter=!1,h.htoScatter={},p=!0,q=!1,b.sidebarLoading=!0,c(function(){o=new g,d.application&&o.setApplication(d.application),d.readablePeriod&&o.setReadablePeriod(d.readablePeriod),d.queryEndDateTime&&o.setQueryEndDateTime(d.queryEndDateTime),o.setCalleeRange(n.getCalleeByApp(d.application)),o.setCallerRange(n.getCallerByApp(d.application)),f.initUrlVo("main",d),o.isRealtime()?b.$broadcast("navbarDirective.initialize.realtime.andReload",o):angular.isDefined(d.application)&&angular.isUndefined(d.readablePeriod)?b.$broadcast("navbarDirective.initialize.andReload",o):(h.$routeParams=d,f.autoCalculateByQueryEndDateTimeAndReadablePeriod(),o.autoCalculateByQueryEndDateTimeAndReadablePeriod(),b.$broadcast("navbarDirective.initialize",o),b.$broadcast("serverListDirective.initialize",o),b.$broadcast("scatterDirective.initialize.forMain",o),b.$broadcast("serverMapDirective.initialize",o))},500),r=function(){return e.path().split("/")[1]||"main"},s=function(){var a="/"+r()+"/"+o.getApplication()+"/";o.isRealtime()?(a+=o.getPeriodType(),h.$routeParams={application:o.getApplication(),readablePeriod:o.getPeriodType()}):a+=o.getReadablePeriod()+"/"+o.getQueryEndDateTime(),e.path()!==a&&("/main"===e.path()?e.path(a).replace():e.skipReload().path(a).replace(),h.$routeParams={application:o.getApplication(),readablePeriod:o.getReadablePeriod().toString(),queryEndDateTime:o.getQueryEndDateTime().toString()},b.$$phase||b.$apply())},t=function(a,b){var c=j.getFilteredMapUrlWithFilterVo(o,a,b);h.open(c,"")},b.getMainContainerClass=function(){return""},b.getInfoDetailsClass=function(){var a=[];return b.hasScatter&&a.push("has-scatter"),b.hasFilter&&a.push("has-filter"),a.join(" ")},b.$on("serverMapDirective.hasData",function(a){q=!1,b.sidebarLoading=!1}),b.$on("serverMapDirective.hasNoData",function(a){q=!0,b.sidebarLoading=!1}),b.$on("navbarDirective.changed",function(a,c){q=!1,o=c,s(o),h.htoScatter={},b.hasScatter=!1,b.sidebarLoading=!0,b.$broadcast("realtimeChartController.close"),b.$broadcast("sidebarTitleDirective.empty.forMain"),b.$broadcast("serverListDirective.initialize",o),b.$broadcast("nodeInfoDetailsDirective.hide"),b.$broadcast("linkInfoDetailsDirective.hide"),b.$broadcast("scatterDirective.initialize.forMain",o),b.$broadcast("serverMapDirective.initialize",o),b.$broadcast("sidebarTitleDirective.empty.forMain")}),b.$on("serverMapDirective.passingTransactionResponseToScatterChart",function(a,c){b.$broadcast("scatterDirective.initializeWithNode.forMain",c)}),b.$on("serverMapDirective.nodeClicked",function(a,c,d,e,f,g){p=!0;var h=new i;h.setImageType(e.serviceType),e.isWas===!0?(e.isAuthorized===!0?(b.hasScatter=!0,b.$broadcast("scatterDirective.initializeWithNode.forMain",e)):b.hasScatter=!1,h.setTitle(e.applicationName)):e.unknownNodeGroup?(h.setTitle(e.serviceType.replace("_"," ")),b.hasScatter=!1):(h.setTitle(e.applicationName),b.hasScatter=!1),b.hasFilter=!1,b.$broadcast("sidebarTitleDirective.initialize.forMain",h,e,o),b.$broadcast("nodeInfoDetailsDirective.initialize",c,d,e,f,o,null,g),b.$broadcast("linkInfoDetailsDirective.hide")}),b.$on("serverMapDirective.linkClicked",function(a,c,d,e,f){p=!1;var g=new i;e.unknownLinkGroup?g.setImageType(e.sourceInfo.serviceType).setTitle("Unknown Group from "+e.sourceInfo.applicationName):g.setImageType(e.sourceInfo.serviceType).setTitle(e.sourceInfo.applicationName).setImageType2(e.targetInfo.serviceType).setTitle2(e.targetInfo.applicationName),b.hasScatter=!1;var h=j.findFilterInNavbarVo(e.sourceInfo.applicationName,e.sourceInfo.serviceType,e.targetInfo.applicationName,e.targetInfo.serviceType,o);h?(b.hasFilter=!0,b.$broadcast("filterInformationDirective.initialize.forMain",h.oServerMapFilterVoService)):b.hasFilter=!1,b.$broadcast("sidebarTitleDirective.initialize.forMain",g,e,o),b.$broadcast("nodeInfoDetailsDirective.hide"),b.$broadcast("linkInfoDetailsDirective.initialize",c,d,e,f,o)}),b.$on("serverMapDirective.openFilteredMap",function(a,b,c){t(b,c)}),b.$on("linkInfoDetailsDirective.openFilteredMap",function(a,b,c){t(b,c)}),b.$on("linkInfoDetailsDirective.openFilterWizard",function(a,c,d){b.$broadcast("serverMapDirective.openFilterWizard",c,d)}),b.$on("linkInfoDetailsDirective.ResponseSummary.barClicked",function(a,b){t(b)}),b.$on("linkInfoDetailsDirective.showDetailInformationClicked",function(a,c,d){b.hasScatter=!1;var e=new i;e.setImageType(d.sourceInfo.serviceType).setTitle(d.sourceInfo.applicationName).setImageType2(d.targetInfo.serviceType).setTitle2(d.targetInfo.applicationName),b.$broadcast("sidebarTitleDirective.initialize.forMain",e),b.$broadcast("nodeInfoDetailsDirective.hide")}),b.$on("nodeInfoDetailDirective.showDetailInformationClicked",function(a,c,d){b.hasScatter=!1;var e=new i;e.setImageType(d.serviceType),d.unknownNodeGroup?(e.setTitle(d.serviceType.replace("_"," ")),b.hasScatter=!1):(e.setTitle(d.applicationName),b.hasScatter=!1),b.$broadcast("sidebarTitleDirective.initialize.forMain",e),b.$broadcast("linkInfoDetailsDirective.hide")})}])}(),function(){"use strict";pinpointApp.constant("InspectorCtrlConfig",{ID:"INSPECTOR_CTRL_",PAGE_NAME:"inspector",SLASH:"/"}),pinpointApp.controller("InspectorCtrl",["InspectorCtrlConfig","$scope","$routeParams","locationService","CommonUtilService","UrlVoService","AnalyticsService",function(a,b,c,d,e,f,g){a.ID+=e.getRandomNum(),g.send(g.CONST.INSPECTOR_PAGE),b.$on("up.changed.application",function(a,c,d){f.setApplication(d),f.setAgentId(""),h(function(){b.$broadcast("down.changed.application",c),b.$broadcast("down.changed.agent.",c,{})})}),b.$on("up.changed.period",function(a,c){h(function(){b.$broadcast("down.changed.period",!0,c)})}),b.$on("up.changed.agent",function(a,c,d,g){f.getAgentId()===d.agentId?b.$broadcast("down.changed.agent",c,d,g):(e.isEmpty(d.agentId)===!1&&f.setAgentId(d.agentId),h(function(){b.$broadcast("down.changed.agent",c,d,g)}))});var h=function(a){var b=i();d.path()!==b&&(d.skipReload().path(b).replace(),a())},i=function(){var b=["",a.PAGE_NAME,f.getApplication(),f.getReadablePeriod(),f.getQueryEndDateTime()].join(a.SLASH);return""!==f.getAgentId()&&(b+=a.SLASH+f.getAgentId()),b};b.$broadcast("down.initialize",a.ID)}])}(),function(a){"use strict";pinpointApp.constant("TransactionListConfig",{applicationUrl:"/transactionmetadata.pinpoint",MIN_TRANSACTION_LIST_HEIGHT:75,MAX_FETCH_BLOCK_SIZE:100,TRANSACTION_LIST_HANDLE_POSITION:"transactionList.resizer"}),pinpointApp.controller("TransactionListCtrl",["TransactionListConfig","$scope","$location","locationService","$routeParams","$rootScope","$timeout","$window","$http","webStorage","TimeSliderVoService","TransactionDaoService","AnalyticsService","helpContentService",function(b,c,d,e,f,g,h,i,j,k,l,m,n,o){n.send(n.CONST.TRANSACTION_LIST_PAGE);var p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K="";h(function(){p=1,q=0,c.transactionDetailUrl="index.html?vs="+Date.now()+"#/transactionDetail",c.sidebarLoading=!0;var d=G(),e=H(),g=!angular.isUndefined(f.transactionInfo);if(g){var j=f.transactionInfo.lastIndexOf("-"),l=f.transactionInfo.lastIndexOf("-",j-1);u=[f.transactionInfo.substring(0,l),f.transactionInfo.substring(l+1,j),f.transactionInfo.substring(j+1)]}d&&e?(r=C(i.name),D(r.applicationName)?(s=E(r),I(g)):J(o.transactionList.openError.noData.replace(/\{\{application\}\}/,r.applicationName))):g===!1?J(o.transactionList.openError.noParent):(r=F(),s=[[u[0],u[1],u[2]]],I(g)),h(function(){var c=null===k.get(b.TRANSACTION_LIST_HANDLE_POSITION)?(window.innerHeight-40)/2:parseInt(k.get(b.TRANSACTION_LIST_HANDLE_POSITION));c=Math.max(b.MIN_TRANSACTION_LIST_HEIGHT,c),0!==a("#main-container").length&&a("#main-container").layout({north__minSize:30,north__size:c,center__maskContents:!0,onresize:function(){"north"===arguments[0]&&k.add(b.TRANSACTION_LIST_HANDLE_POSITION,arguments[2].innerHeight)}})},100)},100),J=function(a){alert(a),e.path("/main/"+f.application+"/"+f.readablePeriod+"/"+f.queryEndDateTime).replace()},I=function(a){t=new l,t.setTotal(s.length),v(a)},G=function(){return angular.isDefined(i.opener)},H=function(){if(angular.isUndefined(i.opener)||null===i.opener)return!1;var a=i.opener.$routeParams;if(angular.isDefined(f)&&angular.isDefined(a))if("realtime"===a.readablePeriod){if(angular.equals(f.application,a.application))return!0}else if(angular.equals(f.application,a.application)&&angular.equals(f.readablePeriod,a.readablePeriod)&&angular.equals(f.queryEndDateTime,a.queryEndDateTime))return!0;return!1},C=function(a){var b=a.split("|");return 6===b.length?{applicationName:b[0],type:b[1],min:b[2],max:b[3],agent:b[4],include:b[5]}:{applicationName:b[0],nXFrom:b[1],nXTo:b[2],nYFrom:b[3],nYTo:b[4],agent:b[5],include:b[6]}},F=function(){return{applicationName:f.application.split("@")[0],nXFrom:parseInt(u[1])-1e3,nXTo:parseInt(u[1])+1e3,nYFrom:0,nYTo:0}},D=function(a){return angular.isDefined(i.opener.htoScatter[a])},E=function(a){var b=i.opener.htoScatter[a.applicationName];return a.type?b.getDataByRange(a.type,a.min,a.max,a.agent,a.include):b.getDataByXY(a.nXFrom,a.nXTo,a.nYFrom,a.nYTo,a.agent,a.include)},y=function(a){c.$emit("transactionTableDirective.appendTransactionList",a.metadata)},z=function(){if(!s)return i.alert("Query failed - Query parameter cache deleted.\n\nPossibly due to scatter chart being refreshed."),!1;for(var a=[],c=q,d=0;c<b.MAX_FETCH_BLOCK_SIZE*p&&c<s.length;c++,d++)c>0&&a.push("&"),a=a.concat(["I",d,"=",s[c][0]]),a=a.concat(["&T",d,"=",s[c][1]]),a=a.concat(["&R",d,"=",s[c][2]]),q++;return p++,a},w=function(){A(z(),function(a){return 0===a.metadata.length?(c.$emit("timeSliderDirective.disableMore"),c.$emit("timeSliderDirective.changeMoreToDone"),!1):(a.metadata.length<b.MAX_FETCH_BLOCK_SIZE||t.getTotal()===a.metadata.length+t.getCount()?(c.$emit("timeSliderDirective.disableMore"),c.$emit("timeSliderDirective.changeMoreToDone"),t.setInnerFrom(r.nXFrom)):(c.$emit("timeSliderDirective.enableMore"),t.setInnerFrom(_.last(a.metadata).collectorAcceptTime)),y(a),t.addCount(a.metadata.length),c.$emit("timeSliderDirective.setInnerFromTo",t),void(c.sidebarLoading=!1))})},x=function(){b.MAX_FETCH_BLOCK_SIZE=1e8,w()};var L=0,M=3;v=function(a){var d=z();A(d,function(d){return 0===d.metadata.length?(c.$emit("timeSliderDirective.disableMore"),c.$emit("timeSliderDirective.changeMoreToDone"),L<M?(L++,h(function(){v(a)},3e3)):(i.alert("There is no data."),i.close()),!1):(d.metadata.length<b.MAX_FETCH_BLOCK_SIZE||t.getTotal()===d.metadata.length?(c.$emit("timeSliderDirective.disableMore"),c.$emit("timeSliderDirective.changeMoreToDone"),t.setInnerFrom(r.nXFrom)):(c.$emit("timeSliderDirective.enableMore"),t.setInnerFrom(_.last(d.metadata).collectorAcceptTime)),y(d),t.setFrom(r.nXFrom),t.setTo(r.nXTo),t.setInnerTo(r.nXTo),t.setCount(d.metadata.length),c.$emit("timeSliderDirective.initialize",t),c.sidebarLoading=!1,void(a&&B({agentId:d.metadata[0].agentId,spanId:d.metadata[0].spanId,traceId:u[0],collectorAcceptTime:u[1],elapsed:u[2]})))})},A=function(a,c){j.post(b.applicationUrl,a.join(""),{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(a,b){angular.isFunction(c)&&c(a)}).error(function(a,b){i.alert("Failed to fetching the request information.")})},B=function(a){var b="index.html?vs="+Date.now()+"#/transactionDetail";a.traceId&&a.collectorAcceptTime&&(b+="/"+i.encodeURIComponent(a.traceId)+"/"+a.collectorAcceptTime+"/"+a.agentId+"/"+a.spanId),K==b?c.$emit("transactionTableDirective.completedDetailPageLoad"):(K=b,d.path("/transactionList/"+f.application+"/"+f.readablePeriod+"/"+f.queryEndDateTime+"/"+a.traceId+"-"+a.collectorAcceptTime+"-"+a.elapsed,!1),h(function(){c.transactionDetailUrl=b}))},c.$on("transactionTableDirective.applicationSelected",function(a,b){B(b)}),c.$on("timeSliderDirective.moreClicked",function(a){c.sidebarLoading=!0,c.$emit("timeSliderDirective.disableMore"),h(function(){w()},1e3)}),c.completedDetailPageLoad=function(){c.$emit("transactionTableDirective.completedDetailPageLoad")}}])}(jQuery),function(){"use strict";pinpointApp.constant("TransactionDetailConfig",{applicationUrl:"/transactionInfo.pinpoint",CALL_STACK:"#CallStacks",SERVER_MAP:"#ServerMap",TIMELINE:"#Timeline"}),pinpointApp.controller("TransactionDetailCtrl",["TransactionDetailConfig","$scope","$rootScope","$routeParams","$timeout","$rootElement","AlertsService","ProgressBarService","TransactionDaoService","$window","$location","AnalyticsService","TooltipService",function(a,b,c,d,e,f,g,h,i,j,k,l,m){function n(a){b.transactionDetail=a,b.logLinkEnable=a.logLinkEnable||!1,b.loggingTransactionInfo=a.loggingTransactionInfo||!1,b.logButtonName=a.logButtonName||"",b.logPageUrl=a.logPageUrl||"",b.logDisableMessage=a.disableButtonMessage||"",b.completeStateClass=o(a.completeState),b.$digest(),f.find('[data-toggle="tooltip"]').tooltip("destroy").tooltip()}function o(a){var b="label-important";return"Complete"===a?b="label-success":"Progress"===a&&(b="label-warning"),b}function p(){w===!1&&(w=!0,b.$broadcast("distributedCallFlowDirective.initialize.forTransactionDetail",b.transactionDetail))}function q(){return z===a.CALL_STACK}function r(){return z===a.SERVER_MAP}function s(){u=!0,t=0,B.val(""),b.searchColumn="self",b.searchPlaceholder="1000(ms)",A.find("input").val("").attr("placeholder","1000(ms)"),r()?A.hide():(A.show(),$("#traceTabs option:first").attr("selected","selected"),q()?$("#traceTabs option:last").removeAttr("disabled"):$("#traceTabs option:last").attr("disabled","disabled"),$("#traceTabs option:first").removeAttr("selected"))}l.send(l.CONST.TRANSACTION_DETAIL_PAGE),c.wrapperClass="no-navbar",c.wrapperStyle={"padding-top":"70px"};var t=0,u=!1,v=!0,w=!1,x=new g(f),y=new h(f),z=a.CALL_STACK,A=$("#traceTabs ._searchForm"),B=A.find("input");$("#customLogPopup").modal("hide"),e(function(){d.traceId&&d.focusTimestamp&&(y.startLoading(),y.setLoading(30),i.getTransactionDetail(d.agentId,d.spanId,d.traceId,d.focusTimestamp,function(a,b){a||b.exception?(y.stopLoading(),a?x.showError("There is some error while downloading the data."):x.showError(b.exception)):(y.setLoading(70),n(b),p(),e(function(){y.setLoading(100),y.stopLoading()},100))}))}),b.viewLog=function(a){return b.loggingTransactionInfo===!1?($("#customLogPopup").find("h4").html("Notice").end().find("div.modal-body").html(b.logDisableMessage).end().modal("show"),!1):void window.open(a)},b.openInNewWindow=function(){j.open(k.absUrl())},window.onresize=function(a){b.$broadcast("distributedCallFlowDirective.resize.forTransactionDetail"),b.$broadcast("timelineDirective.resize")},b.openTransactionView=function(){j.open("/#/transactionView/"+b.transactionDetail.agentId+"/"+b.transactionDetail.transactionId+"/"+b.transactionDetail.callStackStart+"/"+d.spanId)},b.$on("transactionDetail.selectDistributedCallFlowRow",function(c,d){l.send(l.CONST.CALLSTACK,l.CONST.CLK_DISTRIBUTED_CALL_FLOW),$("#traceTabs li:nth-child(1) a").trigger("click"),z=a.CALL_STACK,s(),b.$broadcast("distributedCallFlowDirective.selectRow.forTransactionDetail",d)}),b.$on("transactionDetail.searchActionResult",function(a,c){"Loop"===c?t=1:(b.searchMessage=c,""===c&&t++)}),B.val(""),b.searchColumn="self",b.searchPlaceholder="1000(ms)",b.selectSearchColumn=function(){u=!0,"self"===b.searchColumn?b.searchPlaceholder="1000(ms)":b.searchPlaceholder="input your text"},b.searchByClick=function(){var a=$.trim(B.val());if(""!==a)if(u&&(t=0,u=!1),"self"===b.searchColumn){var c=parseInt(a);q()?b.$broadcast("distributedCallFlowDirective.searchCall.forTransactionDetail",c,t):b.$broadcast("timelineDirective.searchCall",c,t)}else b.$broadcast("distributedCallFlowDirective.searchArgument.forTransactionDetail",a,t)},b.searchByKeydown=function(a){13===a.keyCode?b.searchByClick():t=0},$("#traceTabs li:nth-child(1) a").bind("click",function(b){l.send(l.CONST.CALLSTACK,l.CONST.CLK_DISTRIBUTED_CALL_FLOW),z=a.CALL_STACK,s(),b.preventDefault()}),$("#traceTabs li:nth-child(2) a").bind("click",function(c){l.send(l.CONST.CALLSTACK,l.CONST.CLK_SERVER_MAP),z=a.SERVER_MAP,s(),b.$broadcast("serverMapDirective.initializeWithMapData",!1,b.transactionDetail),c.preventDefault()}),$("#traceTabs li:nth-child(3) a").bind("click",function(c){l.send(l.CONST.CALLSTACK,l.CONST.CLK_RPC_TIMELINE),z=a.TIMELINE,s(),v&&(b.$broadcast("timelineDirective.initialize",b.transactionDetail),v=!1),c.preventDefault()}),m.init("callTree");try{top.angular.element(top.document.getElementById("main-container")).scope().completedDetailPageLoad()}catch(C){}}])}(),function(){"use strict";pinpointApp.controller("FilteredMapCtrl",["filterConfig","$scope","$routeParams","$timeout","TimeSliderVoService","NavbarVoService","$window","SidebarTitleVoService","filteredMapUtilService","$rootElement","AnalyticsService",function(a,b,c,d,e,f,g,h,i,j,k){function l(a,b){var c=i.getFilteredMapUrlWithFilterVo(p,a,b);g.open(c,"")}function m(a){angular.isDefined(a)&&angular.forEach(a,function(a,c){b.$broadcast("scatterDirective.initializeWithData.forFilteredMap",c,a)})}function n(){var a=new f;a.setApplication(p.getApplication()).setQueryStartTime(p.getQueryStartTime()).setQueryEndTime(q.getInnerFrom()).autoCalcultateByQueryStartTimeAndQueryEndTime(),b.sidebarLoading=!0,b.$broadcast("timeSliderDirective.disableMore"),b.$broadcast("serverMapDirective.fetch",a.getQueryPeriod(),a.getQueryEndTime())}function o(){v=!1,w===!1&&u===!1&&(n(),v=!0)}k.send(k.CONST.FILTEREDMAP_PAGE);var p,q,r,s,t,u=!1,v=!0,w=!1;b.hasScatter=!1,g.htoScatter={},s=!1,t=!1,b.sidebarLoading=!1,d(function(){p=new f,c.application&&p.setApplication(c.application),c.readablePeriod&&p.setReadablePeriod(c.readablePeriod),c.queryEndDateTime&&p.setQueryEndDateTime(c.queryEndDateTime),c.filter&&p.setFilter(c.filter),c.hint&&p.setHint(c.hint),g.$routeParams=c,p.autoCalculateByQueryEndDateTimeAndReadablePeriod(),q=(new e).setFrom(p.getQueryStartTime()).setTo(p.getQueryEndTime()).setInnerFrom(p.getQueryEndTime()-1).setInnerTo(p.getQueryEndTime()),d(function(){b.$broadcast("timeSliderDirective.initialize",q),b.$broadcast("serverListDirective.initialize",p),b.$broadcast("scatterDirective.initialize.forFilteredMap",p),b.$broadcast("serverMapDirective.initialize",p)})},500),b.getMainContainerClass=function(){return""},b.getInfoDetailsClass=function(){var a=[];return b.hasScatter&&a.push("has-scatter"),b.hasFilter&&a.push("has-filter"),a.join(" ")},b.$on("serverMapDirective.hasData",function(){b.sidebarLoading=!1}),b.$on("serverMapDirective.hasNoData",function(){b.sidebarLoading=!1,o()}),b.$on("serverMapDirective.fetched",function(a,c,d){q.setInnerFrom(c),s=!0,t=!0,b.$broadcast("timeSliderDirective.setInnerFromTo",q),m(d.applicationScatterData)}),b.$on("serverMapDirective.allFetched",function(a,c){w=!0,q.setInnerFrom(q.getFrom()),s=!0,t=!0,b.$broadcast("timeSliderDirective.setInnerFromTo",q),b.$broadcast("timeSliderDirective.changeMoreToDone"),b.$broadcast("timeSliderDirective.disableMore"),m(c.applicationScatterData)}),b.$on("timeSliderDirective.changeLoadingStatus",function(a,b){u=b,u===!1&&v===!1&&n()}),b.$on("timeSliderDirective.moreClicked",function(){n()}),b.$on("serverMapDirective.nodeClicked",function(a,c,d,e,f){r=!0;var g=new h;g.setImageType(e.serviceType),e.isWas===!0?(b.hasScatter=!0,g.setTitle(e.applicationName),b.$broadcast("scatterDirective.showByNode.forFilteredMap",e)):e.unknownNodeGroup?(g.setTitle(e.serviceType.replace("_"," ")),b.hasScatter=!1):(g.setTitle(e.applicationName),b.hasScatter=!1),b.hasFilter=!1,b.$broadcast("sidebarTitleDirective.initialize.forFilteredMap",g,e,p),b.$broadcast("nodeInfoDetailsDirective.initialize",c,d,e,f,p,s),b.$broadcast("linkInfoDetailsDirective.hide",c,d,e,f,p),s=!1,o()}),b.$on("serverMapDirective.linkClicked",function(a,c,d,e,f){r=!1;var g=new h;e.unknownLinkGroup?g.setImageType(e.sourceInfo.serviceType).setTitle("Unknown Group from "+e.sourceInfo.applicationName):g.setImageType(e.sourceInfo.serviceType).setTitle(e.sourceInfo.applicationName).setImageType2(e.targetInfo.serviceType).setTitle2(e.targetInfo.applicationName),b.hasScatter=!1;var j=i.findFilterInNavbarVo(e.sourceInfo.applicationName,e.sourceInfo.serviceType,e.targetInfo.applicationName,e.targetInfo.serviceType,p);j?(b.hasFilter=!0,b.$broadcast("filterInformationDirective.initialize.forFilteredMap",j.oServerMapFilterVoService)):b.hasFilter=!1,b.$broadcast("sidebarTitleDirective.initialize.forFilteredMap",g,e),b.$broadcast("nodeInfoDetailsDirective.hide"),b.$broadcast("linkInfoDetailsDirective.initialize",c,d,e,f,p,t),t=!1}),b.$on("serverMapDirective.openFilteredMap",function(a,b,c){l(b,c)}),b.$on("linkInfoDetailsDirective.openFilteredMap",function(a,b,c){l(b,c)}),b.$on("linkInfoDetailsDirective.openFilterWizard",function(a,c,d){b.$broadcast("serverMapDirective.openFilterWizard",c,d)}),b.$on("linkInfoDetailsDirective.ResponseSummary.barClicked",function(a,b,c){
l(b,c)}),b.$on("linkInfoDetail.showDetailInformationClicked",function(a,c,d){b.hasScatter=!1;var e=new h;e.setImageType(d.sourceInfo.serviceType).setTitle(d.sourceInfo.applicationName).setImageType2(d.targetInfo.serviceType).setTitle2(d.targetInfo.applicationName),b.$broadcast("sidebarTitleDirective.initialize.forFilteredMap",e),b.$broadcast("nodeInfoDetailsDirective.hide")}),b.$on("nodeInfoDetail.showDetailInformationClicked",function(a,c,d){b.hasScatter=!1;var e=new h;e.setImageType(d.serviceType).setTitle(d.applicationName),b.$broadcast("sidebarTitleDirective.initialize.forMain",e,d),b.$broadcast("linkInfoDetailsDirective.hide")})}])}(),function(){"use strict";pinpointApp.constant("TransactionViewConfig",{applicationUrl:"/transactionInfo.pinpoint"}),pinpointApp.controller("TransactionViewCtrl",["TransactionViewConfig","$scope","$rootScope","$rootElement","CommonUtilService","AlertsService","ProgressBarService","$timeout","$routeParams","NavbarVoService","TransactionDaoService","AgentDaoService","AnalyticsService","PreferenceService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){m.send(m.CONST.TRANSACTION_VIEW_PAGE);var o,p,q,r,s,t,u,v;c.wrapperClass="no-navbar",c.wrapperStyle={"padding-top":"30px"},o=new f(d),p=new g(d),h(function(){i.agentId&&i.traceId&&i.focusTimestamp&&(p.startLoading(),p.setLoading(30),k.getTransactionDetail(i.agentId,i.spanId,i.traceId,i.focusTimestamp,function(a,c){(a||c.exception)&&(p.stopLoading(),a?o.showError("There is some error while downloading the data."):o.showError(c.exception)),p.setLoading(70),q(c),s(),t(),h(function(){p.setLoading(100),p.stopLoading(),$("#main-container").layout({north__minSize:50,north__size:210,onload_end:function(){b.$broadcast("distributedCallFlowDirective.resize.forTransactionView")},onresize_end:function(a){"center"===a&&(b.$broadcast("distributedCallFlowDirective.resize.forTransactionView"),b.$broadcast("agentChartGroupDirective.resize.forTransactionView"),b.$broadcast("serverMapDirective.zoomToFit"))},center__maskContents:!0})},100)}),u(i.agentId,i.focusTimestamp))},500),q=function(a){b.transactionDetail=a,b.completeStateClass=r(a.completeState),b.$digest(),d.find('[data-toggle="tooltip"]').tooltip("destroy").tooltip()},r=function(a){var b="label-important";return"Complete"===a?b="label-success":"Progress"===a&&(b="label-warning"),b},s=function(){b.$broadcast("distributedCallFlowDirective.initialize.forTransactionView",b.transactionDetail)},t=function(){var a=new j;a.setReadablePeriod(n.getPeriodTime()[0]),a.setQueryEndDateTime(e.formatDate(i.focusTimestamp)),b.$broadcast("serverMapDirective.initializeWithMapData",!0,b.transactionDetail,a)},u=function(a,c){c=parseInt(c,10);var d={agentId:a,from:c-6e5,to:c+6e5,sampleRate:l.getSampleRate(20)};b.$broadcast("agentChartGroupDirective.initialize.forTransactionView",d)},v=function(a){b.$broadcast("agentChartGroupDirective.showCursorAt.forTransactionView",a)},b.$on("distributedCallFlowDirective.rowSelected.forTransactionView",function(a,b){var c;if(b.execTime){var d=5e3,e=new Date(b.execTime);c=moment(Math.floor(e.getTime()/d)*d).format("YYYY-MM-DD HH:mm:ss")}else c=!1;v(c)})}])}(),function(){"use strict";pinpointApp.controller("ScatterFullScreenModeCtrl",["$scope","$rootScope","$window","$routeParams","$timeout","UrlVoService","AnalyticsService",function(a,b,c,d,e,f,g){g.send(g.CONST.SCATTER_FULL_SCREEN_PAGE),c.htoScatter=c.htoScatter||{},c.$routeParams=c.$routeParams||d,b.wrapperClass="no-navbar",b.wrapperStyle={"padding-top":"0px"},e(function(){f.initUrlVo("scatterFullScreenMode",d),f.autoCalculateByQueryEndDateTimeAndReadablePeriod(),a.$broadcast("scatterDirective.initialize.forMain"),a.$broadcast("scatterDirective.initializeWithNode.forMain",{key:f.getApplicationName()+"^"+f.getServiceType(),serviceType:f.getServiceType(),applicationName:f.getApplicationName(),agentList:f.getAgentList()},800,600)},500)}])}(),function(a){"use strict";pinpointApp.constant("ThreadDumpConfig",{}),pinpointApp.controller("ThreadDumpCtrl",["ThreadDumpConfig","$scope","$routeParams","$rootScope","$window","$http",function(a,b,c,d){d.wrapperStyle={"padding-top":"0px"},d.$broadcast("thread-dump-info-window.open",c.application.split("@")[0],c.agentId)}])}(jQuery);
//# sourceMappingURL=pinpoint.min.js.map